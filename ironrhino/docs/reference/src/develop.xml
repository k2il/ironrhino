<chapter id="develop">
	<title>简单开发</title>
	<para>
实现一个最简单的CRUD
		<itemizedlist>
			<listitem>
				<para>
新建一个类 com.mycompany.model.Customer
					<programlisting>
					<![CDATA[        	
package com.mycompany.model;

import java.util.Date;

import org.ironrhino.core.metadata.AutoConfig;
import org.ironrhino.core.metadata.NaturalId;
import org.ironrhino.core.model.BaseEntity;

@AutoConfig
public class Customer extends BaseEntity {

						@NaturalId
						private String name;

						private String address;

						private Date date = new Date();

						public String getName() {
							return name;
						}

						public void setName(String name) {
							this.name = name;
						}

						public String getAddress() {
							return address;
						}

						public void setAddress(String address) {
							this.address = address;
						}

						public Date getDate() {
							return date;
						}

						public void setDate(Date date) {
							this.date = date;
						}

}
					]]>      	
					</programlisting>        	
				</para>
			</listitem>
			<listitem>
				<para>
在src/resources/hibernate/mycompany下面增加hibernate映射文件Customer.hbm.xml
					<programlisting>
					<![CDATA[
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
						"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.mycompany.model" default-lazy="true">
						<class name="Customer" table="customer">
							<id name="id" type="java.lang.String" length="32" unsaved-value="null">
								<generator class="uuid" />
							</id>
							<natural-id>
								<property name="name" not-null="true" />
							</natural-id>
							<property name="address" />
							<property name="date" />
						</class>
</hibernate-mapping>
					]]>
					</programlisting>
				</para>
			</listitem>
			<listitem>
				<para>
      	修改src/struts.xml,让ironrhino知道你的@AutoConfig
					<programlisting>
					<![CDATA[
<constant name="ironrhino.autoconfig.packages" value="/common:org.ironrhino.common;org.ironrhino.security" />
					]]>
					</programlisting>
		改成
					<programlisting>
					<![CDATA[
<constant name="ironrhino.autoconfig.packages" value="/common:org.ironrhino.common;org.ironrhino.security,com.mycompany" />
					]]>
					</programlisting>
				</para>
			</listitem>
			<listitem>
				<para>
      	启动应用服务器,访问http://localhost:8080/customer试试
				</para>
			</listitem>
		</itemizedlist>
	</para>

	<para>
如果需要控制Customer
		<itemizedlist>
			<listitem>
				<para>
新建一个接口  com.mycompany.service.CustomerManager
					<programlisting>
					<![CDATA[
package com.mycompany.service;
import org.ironrhino.core.service.BaseManager;
import com.mycompany.model.Customer;
public interface CustomerManager extends BaseManager<Customer> {

}
					]]>
					</programlisting>
新建一个类  com.mycompany.service.CustomerManagerImpl
					<programlisting>
					<![CDATA[
package com.mycompany.service;
import javax.inject.Named;
import javax.inject.Singleton;
import org.springframework.transaction.annotation.Transactional;
import org.ironrhino.core.service.BaseManagerImpl;
import com.mycompany.model.Customer;
@Singleton
@Named("customerManager")
public class CustomerManagerImpl extends BaseManagerImpl<Customer> implements CustomerManager {
@Override
						@Transactional(readOnly = true)
						public boolean canDelete(Customer c) {
							return c.getName().startsWith("test");
						}
}
					]]>
					</programlisting>
				</para>
			</listitem>
			<listitem>
				<para>
      	修改src/resources/spring/applicationContext-common.xml,让spring知道你的bean
					<programlisting>
					<![CDATA[
<context:component-scan base-package="org.ironrhino"/>
					]]>
					</programlisting>
		改成
					<programlisting>
					<![CDATA[
<context:component-scan base-package="org.ironrhino,com.mycompany"/>
					]]>
					</programlisting>
				</para>
			</listitem>			
			<listitem>
				<para>
      	启动应用服务器,访问http://localhost:8080/customer,创建几个customer,试试name不以test开头的customer能否删除
				</para>
			</listitem>
		</itemizedlist>
	</para>
</chapter>