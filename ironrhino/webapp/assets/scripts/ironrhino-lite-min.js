/*
 MIT License
 MIT License
 MIT License
 MIT License
 MIT License
 MIT License
 MIT License
 MIT License
 MIT License
*/
jQuery.cookie=function(a,c,b){if(arguments.length>1&&(c===null||typeof c!=="object")){b=jQuery.extend({},b);if(c===null)b.expires=-1;if(typeof b.expires==="number"){var d=b.expires,e=b.expires=new Date;e.setDate(e.getDate()+d)}return document.cookie=[encodeURIComponent(a),"=",b.raw?String(c):encodeURIComponent(String(c)),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}b=c||{};e=b.raw?function(a){return a}:
decodeURIComponent;return(d=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?e(d[1]):null};
(function(a){a.fn.rc4=function(b){var d=a.extend({key:null,method:"encrypt",callback:null},b);if(a.fn.rc4.ctrlrInst==null)a.fn.rc4.ctrlrInst=new a.fn.rc4.ctrlr(d);return this.each(function(){a.fn.rc4.ctrlrInst.settings=d;a.fn.rc4.ctrlrInst.container=this;a.fn.rc4.ctrlrInst.initialise(this)})};a.extend({hexEncode:function(a){for(var d=[],e=0;e<256;e++)d[e]="0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(e&15);for(var f=[],e=0;e<a.length;e++)f[e]=d[a.charCodeAt(e)];return f.join("")},hexDecode:function(a){for(var d=
[],e=0;e<256;e++)d["0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(e&15)]=String.fromCharCode(e);if(!a.match(/^[a-f0-9]*$/i))return false;a.length%2&&(a="0"+a);for(var f=[],c=0,e=0;e<a.length;e+=2)f[c++]=d[a.substr(e,2)];return f.join("")},rc4Encrypt:function(a,d){s=[];for(var e=0;e<256;e++)s[e]=e;for(var f=0,c,e=0;e<256;e++)f=(f+s[e]+a.charCodeAt(e%a.length))%256,c=s[e],s[e]=s[f],s[f]=c;for(var f=e=0,h="",i=0;i<d.length;i++)e=(e+1)%256,f=(f+s[e])%256,c=s[e],s[e]=s[f],s[f]=c,h+=String.fromCharCode(d.charCodeAt(i)^
s[(s[e]+s[f])%256]);return h},rc4Decrypt:function(b,d){return a.rc4Encrypt(b,d)},rc4EncryptStr:function(b,d){return a.hexEncode(a.rc4Encrypt(d,unescape(encodeURIComponent(b))))},rc4DecryptStr:function(b,d){return decodeURIComponent(escape(a.rc4Decrypt(d,a.hexDecode(b))))}});a.rc4={};a.fn.rc4.ctrlrInst=null;a.fn.rc4.ctrlr=function(a){this.settings=a};var c=a.fn.rc4.ctrlr;c.prototype.initialise=function(){this.settings.key&&this.settings.method&&(a.trim(this.settings.method.toUpperCase())=="ENCRYPT"&&
this.setObjectValue(a.hexEncode(a.rc4Encrypt(this.settings.key,this.getObjectValue()))),a.trim(this.settings.method.toUpperCase())=="DECRYPT"&&this.setObjectValue(a.rc4Decrypt(this.settings.key,a.hexDecode(this.getObjectValue()))))};c.prototype.getObjectValue=function(){if(a.fn.rc4.ctrlrInst.container.innerHTML)return a.fn.rc4.ctrlrInst.container.innerHTML;if(a.fn.rc4.ctrlrInst.container.value)return a.fn.rc4.ctrlrInst.container.value};c.prototype.setObjectValue=function(b){if(a.fn.rc4.ctrlrInst.container.innerHTML)a.fn.rc4.ctrlrInst.container.innerHTML=
b;if(a.fn.rc4.ctrlrInst.container.value)a.fn.rc4.ctrlrInst.container.value=b}})(jQuery);
(function(a){function c(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function d(e){for(var d=new FormData,f=0;f<e.length;f++)e[f].type!="file"&&d.append(e[f].name,e[f].value);h.find("input:file:enabled").each(function(){var b=a(this).attr("name"),e=this.files;if(b)for(var f=0;f<e.length;f++)d.append(b,e[f])});
if(b.extraData)for(var c in b.extraData)d.append(c,b.extraData[c]);b.data=null;e=a.extend(true,{},a.ajaxSettings,b,{contentType:false,processData:false,cache:false,type:"POST"});e.data=null;var g=e.beforeSend;e.beforeSend=function(a,e){e.data=d;if(a.upload)a.upload.onprogress=function(a){e.progress(a.position,a.total)};g&&g.call(e,a,b)};a.ajax(e)}function e(e){function d(){function b(){try{var a=(q.contentWindow?q.contentWindow.document:q.contentDocument?q.contentDocument:q.document).readyState;c("state = "+
a);a.toLowerCase()=="uninitialized"&&setTimeout(b,50)}catch(e){c("Server abort: ",e," (",e.name,")"),g(x),w&&clearTimeout(w),w=void 0}}var e=h.attr("target"),j=h.attr("action");i.setAttribute("target",o);f||i.setAttribute("method","POST");j!=k.url&&i.setAttribute("action",k.url);!k.skipEncodingOverride&&(!f||/post/i.test(f))&&h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});k.timeout&&(w=setTimeout(function(){y=true;g(z)},k.timeout));var u=[];try{if(k.extraData)for(var t in k.extraData)u.push(a('<input type="hidden" name="'+
t+'">').attr("value",k.extraData[t]).appendTo(i)[0]);k.iframeTarget||(v.appendTo("body"),q.attachEvent?q.attachEvent("onload",g):q.addEventListener("load",g,false));setTimeout(b,15);i.submit()}finally{i.setAttribute("action",j),e?i.setAttribute("target",e):h.removeAttr("target"),a(u).remove()}}function g(b){if(!l.aborted&&!A){try{r=q.contentWindow?q.contentWindow.document:q.contentDocument?q.contentDocument:q.document}catch(e){c("cannot access response document: ",e),b=x}if(b===z&&l)l.abort("timeout");
else if(b==x&&l)l.abort("server abort");else if(r&&r.location.href!=k.iframeSrc||y){q.detachEvent?q.detachEvent("onload",g):q.removeEventListener("load",g,false);var b="success",d;try{if(y)throw"timeout";var f=k.dataType=="xml"||r.XMLDocument||a.isXMLDoc(r);c("isXml="+f);if(!f&&window.opera&&(r.body==null||r.body.innerHTML=="")&&--E){c("requeing onLoad callback, DOM not available");setTimeout(g,250);return}var h=r.body?r.body:r.documentElement;l.responseText=h?h.innerHTML:null;l.responseXML=r.XMLDocument?
r.XMLDocument:r;if(f)k.dataType="xml";l.getResponseHeader=function(a){return{"content-type":k.dataType}[a]};if(h)l.status=Number(h.getAttribute("status"))||l.status,l.statusText=h.getAttribute("statusText")||l.statusText;var i=(k.dataType||"").toLowerCase(),j=/(json|script|text)/.test(i);if(j||k.textarea){var u=r.getElementsByTagName("textarea")[0];if(u)l.responseText=u.value,l.status=Number(u.getAttribute("status"))||l.status,l.statusText=u.getAttribute("statusText")||l.statusText;else if(j){var t=
r.getElementsByTagName("pre")[0],m=r.getElementsByTagName("body")[0];if(t)l.responseText=t.textContent?t.textContent:t.innerText;else if(m)l.responseText=m.textContent?m.textContent:m.innerText}}else if(i=="xml"&&!l.responseXML&&l.responseText!=null)l.responseXML=F(l.responseText);try{B=G(l,i,k)}catch(D){b="parsererror",l.error=d=D||b}}catch(o){c("error caught: ",o),b="error",l.error=d=o||b}l.aborted&&(c("upload aborted"),b=null);l.status&&(b=l.status>=200&&l.status<300||l.status===304?"success":
"error");if(b==="success")k.success&&k.success.call(k.context,B,"success",l),n&&a.event.trigger("ajaxSuccess",[l,k]);else if(b){if(d==void 0)d=l.statusText;k.error&&k.error.call(k.context,l,b,d);n&&a.event.trigger("ajaxError",[l,k,d])}n&&a.event.trigger("ajaxComplete",[l,k]);n&&!--a.active&&a.event.trigger("ajaxStop");k.complete&&k.complete.call(k.context,l,b);A=true;k.timeout&&clearTimeout(w);setTimeout(function(){k.iframeTarget||v.remove();l.responseXML=null},100)}}}var i=h[0],j,m,k,n,o,v,q,l,y,
w;j=!!a.fn.prop;if(e)if(j)for(m=0;m<e.length;m++)j=a(i[e[m].name]),j.prop("disabled",false);else for(m=0;m<e.length;m++)j=a(i[e[m].name]),j.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",i).length)alert('Error: Form elements must not have name or id of "submit".');else if(k=a.extend(true,{},a.ajaxSettings,b),k.context=k.context||k,o="jqFormIO"+(new Date).getTime(),k.iframeTarget?(v=a(k.iframeTarget),j=v.attr("name"),j==null?v.attr("name",o):o=j):(v=a('<iframe name="'+o+'" src="'+
k.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),q=v[0],l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var e=b==="timeout"?"timeout":"aborted";c("aborting upload... "+e);this.aborted=1;v.attr("src",k.iframeSrc);l.error=e;k.error&&k.error.call(k.context,l,e,b);n&&a.event.trigger("ajaxError",[l,k,e]);k.complete&&k.complete.call(k.context,
l,e)}},(n=k.global)&&!a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[l,k]),k.beforeSend&&k.beforeSend.call(k.context,l,k)===false)k.global&&a.active--;else if(!l.aborted){if(e=i.clk)if((j=e.name)&&!e.disabled)if(k.extraData=k.extraData||{},k.extraData[j]=e.value,e.type=="image")k.extraData[j+".x"]=i.clk_x,k.extraData[j+".y"]=i.clk_y;var z=1,x=2,e=a("meta[name=csrf-token]").attr("content");if((j=a("meta[name=csrf-param]").attr("content"))&&e)k.extraData=k.extraData||{},k.extraData[j]=
e;k.forceSync?d():setTimeout(d,10);var B,r,E=50,A,F=a.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},H=a.parseJSON||function(a){return window.eval("("+a+")")},G=function(b,e,d){var f=b.getResponseHeader("content-type")||"",c=e==="xml"||!e&&f.indexOf("xml")>=0,b=c?b.responseXML:b.responseText;c&&b.documentElement.nodeName===
"parsererror"&&a.error&&a.error("parsererror");d&&d.dataFilter&&(b=d.dataFilter(b,e));typeof b==="string"&&(e==="json"||!e&&f.indexOf("json")>=0?b=H(b):(e==="script"||!e&&f.indexOf("javascript")>=0)&&a.globalEval(b));return b}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;var f,g,h=this;typeof b=="function"&&(b={success:b});f=this.attr("method");g=this.attr("action");(g=(g=typeof g==="string"?a.trim(g):"")||window.location.href||"")&&(g=(g.match(/^([^#]+)/)||
[])[1]);b=a.extend(true,{url:g,success:a.ajaxSettings.success,type:f||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);g={};this.trigger("form-pre-serialize",[this,b,g]);if(g.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===false)return c("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i=b.traditional;if(i===void 0)i=a.ajaxSettings.traditional;var j,m=this.formToArray(b.semantic);
if(b.data)b.extraData=b.data,j=a.param(b.data,i);if(b.beforeSubmit&&b.beforeSubmit(m,this,b)===false)return c("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[m,this,b,g]);if(g.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;g=a.param(m,i);j&&(g=g?g+"&"+j:j);b.type.toUpperCase()=="GET"?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+g,b.data=null):b.data=g;var n=[];b.resetForm&&n.push(function(){h.resetForm()});b.clearForm&&
n.push(function(){h.clearForm(b.includeHidden)});if(!b.dataType&&b.target){var o=b.success||function(){};n.push(function(e){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](e).each(o,arguments)})}else b.success&&n.push(b.success);b.success=function(a,e,d){for(var f=b.context||b,c=0,g=n.length;c<g;c++)n[c].apply(f,[a,e,d||h,h])};i=a("input:file:enabled[value]",this);j=i.length>0;g=h.attr("enctype")=="multipart/form-data"||h.attr("encoding")=="multipart/form-data";i=!(!j||!i.get(0).files||
!window.FormData);c("fileAPI :"+i);b.iframe!==false&&(b.iframe||(j||g)&&!i)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){e(m)}):e(m):(j||g)&&i?(b.progress=b.progress||a.noop,d(m)):a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){if(this.length===0){var d=this.selector,e=this.context;if(!a.isReady&&d)return c("DOM not ready, queuing ajaxForm"),a(function(){a(d,e).ajaxForm(b)}),this;c("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),a(this).ajaxSubmit(b))}).bind("click.form-plugin",function(b){var e=b.target,d=a(e);if(!d.is(":submit,input:image")){e=d.closest(":submit");if(e.length==0)return;e=e[0]}var c=this;c.clk=e;if(e.type=="image")b.offsetX!=void 0?(c.clk_x=b.offsetX,c.clk_y=b.offsetY):typeof a.fn.offset=="function"?(d=d.offset(),c.clk_x=b.pageX-d.left,c.clk_y=b.pageY-d.top):(c.clk_x=b.pageX-e.offsetLeft,
c.clk_y=b.pageY-e.offsetTop);setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var d=[];if(this.length===0)return d;var e=this[0],f=b?e.getElementsByTagName("*"):e.elements;if(!f)return d;var c,h,i,j,m,n;for(c=0,m=f.length;c<m;c++)if(h=f[c],i=h.name)if(b&&e.clk&&h.type=="image")!h.disabled&&e.clk==h&&(d.push({name:i,value:a(h).val(),type:h.type}),d.push({name:i+".x",value:e.clk_x},
{name:i+".y",value:e.clk_y}));else if((j=a.fieldValue(h,true))&&j.constructor==Array)for(h=0,n=j.length;h<n;h++)d.push({name:i,value:j[h]});else j!==null&&typeof j!="undefined"&&d.push({name:i,value:j,type:h.type});if(!b&&e.clk&&(b=a(e.clk),f=b[0],(i=f.name)&&!f.disabled&&f.type=="image"))d.push({name:i,value:b.val()}),d.push({name:i+".x",value:e.clk_x},{name:i+".y",value:e.clk_y});return d};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var d=
[];this.each(function(){var e=this.name;if(e){var c=a.fieldValue(this,b);if(c&&c.constructor==Array)for(var g=0,h=c.length;g<h;g++)d.push({name:e,value:c[g]});else c!==null&&typeof c!="undefined"&&d.push({name:this.name,value:c})}});return a.param(d)};a.fn.fieldValue=function(b){for(var d=[],e=0,c=this.length;e<c;e++){var g=a.fieldValue(this[e],b);g===null||typeof g=="undefined"||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(d,g):d.push(g))}return d};a.fieldValue=function(b,d){var e=
b.name,c=b.type,g=b.tagName.toLowerCase();d===void 0&&(d=true);if(d&&(!e||b.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!b.checked||(c=="submit"||c=="image")&&b.form&&b.form.clk!=b||g=="select"&&b.selectedIndex==-1))return null;if(g=="select"){var h=b.selectedIndex;if(h<0)return null;for(var e=[],g=b.options,i=(c=c=="select-one")?h+1:g.length,h=c?h:0;h<i;h++){var j=g[h];if(j.selected){var m=j.value;m||(m=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);
if(c)return m;e.push(m)}}return e}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(a){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,c=this.tagName.toLowerCase();if(d.test(e)||c=="textarea"||a&&/hidden/.test(e))this.value="";else if(e=="checkbox"||e=="radio")this.checked=false;else if(c==
"select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(a){a===void 0&&(a=true);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){b===void 0&&(b=true);return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option")d=a(this).parent("select"),b&&d[0]&&d[0].type==
"select-one"&&d.find("option").selected(false),this.selected=b})};a.fn.ajaxSubmit.debug=false})(jQuery);
(function(a){function c(e){function d(b){var e=RegExp(a.map(b,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(e,decodeURIComponent)}}e=a.extend({unescape:false},e||{});b.encoder=function(a){return a===true?function(a){return a}:typeof a=="string"&&(a=d(a.split("")))||typeof a=="function"?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(e.unescape)}var b={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(b){b=(b||window).location.hash.replace(/^#/,
"");try{return a.browser.mozilla?b:decodeURIComponent(b)}catch(e){return b}},encoder:encodeURIComponent},d={id:"__jQuery_history",init:function(){var b='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(b);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(a){var e=this._document();e.open();e.close();b.put(a,e)},get:function(){return b.get(this._document())}},e={base:{callback:void 0,type:void 0,check:function(){},
load:function(){},init:function(a,b){c(b);f.callback=a;f._options=b;f._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=b.get();f._appState=a;f.callback(a);setInterval(f.check,100)},check:function(){var a=b.get();if(a!=f._appState)f._appState=a,f.callback(a)},load:function(a){if(a!=f._appState)b.put(a),f._appState=a,f.callback(a)}},iframeTimer:{_appState:void 0,_init:function(){var a=b.get();f._appState=a;d.init().put(a);f.callback(a);setInterval(f.check,100)},
check:function(){var a=d.get(),e=b.get();if(e!=a)e==f._appState?(f._appState=a,b.put(a),f.callback(a)):(f._appState=e,d.put(e),f.callback(e))},load:function(a){if(a!=f._appState)b.put(a),d.put(a),f._appState=a,f.callback(a)}},hashchangeEvent:{_init:function(){f.callback(b.get());a(window).bind("hashchange",f.check)},check:function(){f.callback(b.get())},load:function(a){b.put(a)}}},f=a.extend({},e.base);f.type=a.browser.msie&&(a.browser.version<8||document.documentMode<8)?"iframeTimer":"onhashchange"in
window?"hashchangeEvent":"timer";a.extend(f,e[f.type]);a.history=f})(jQuery);
(function(a){a.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.01,overlayColor:"#FFF",draggable:true,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(c,b,d){b==null&&(b="Alert");a.alerts._show(b,c,null,"alert",function(a){d&&d(a)})},confirm:function(c,b,d){b==null&&(b="Confirm");a.alerts._show(b,c,null,"confirm",function(a){d&&d(a)})},prompt:function(c,b,d,e){d==null&&(d="Prompt");a.alerts._show(d,c,b,"prompt",function(a){e&&
e(a)})},_show:function(c,b,d,e,f){a.alerts._hide();a.alerts._overlay("show");a("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_icon"></div><div id="popup_message"></div></div></div>');a.alerts.dialogClass&&a("#popup_container").addClass(a.alerts.dialogClass);var g=a.browser.msie&&parseInt(a.browser.version)<=6?"absolute":"fixed";a("#popup_container").css({position:g,zIndex:99999,padding:0,margin:0});a("#popup_title").text(c);a("#popup_content").addClass(e);
a("#popup_message").text(b);a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />"));a("#popup_container").css({minWidth:a("#popup_container").outerWidth(),maxWidth:a("#popup_container").outerWidth()});a.alerts._reposition();a.alerts._maintainPosition(true);switch(e){case "alert":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f(true)});a("#popup_ok").focus().keypress(function(b){(b.keyCode==
13||b.keyCode==27)&&a("#popup_ok").trigger("click")});break;case "confirm":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f&&f(true)});a("#popup_cancel").click(function(){a.alerts._hide();f&&f(false)});a("#popup_ok").focus();a("#popup_ok, #popup_cancel").keypress(function(b){b.keyCode==13&&a("#popup_ok").trigger("click");
b.keyCode==27&&a("#popup_cancel").trigger("click")});break;case "prompt":a("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>"),a("#popup_prompt").width(a("#popup_message").width()),a("#popup_ok").click(function(){var b=a("#popup_prompt").val();a.alerts._hide();f&&f(b)}),a("#popup_cancel").click(function(){a.alerts._hide();
f&&f(null)}),a("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(b){b.keyCode==13&&a("#popup_ok").trigger("click");b.keyCode==27&&a("#popup_cancel").trigger("click")}),d&&a("#popup_prompt").val(d),a("#popup_prompt").focus().select()}if(a.alerts.draggable)try{a("#popup_container").draggable({handle:a("#popup_title")}),a("#popup_title").css({cursor:"move"})}catch(h){}},_hide:function(){a("#popup_container").remove();a.alerts._overlay("hide");a.alerts._maintainPosition(false)},_overlay:function(c){switch(c){case "show":a.alerts._overlay("hide");
a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});break;case "hide":a("#popup_overlay").remove()}},_reposition:function(){var c=a(window).height()/2-a("#popup_container").outerHeight()/2+a.alerts.verticalOffset,b=a(window).width()/2-a("#popup_container").outerWidth()/2+a.alerts.horizontalOffset;c<0&&(c=0);b<0&&(b=
0);a.browser.msie&&parseInt(a.browser.version)<=6&&(c+=a(window).scrollTop());a("#popup_container").css({top:c+"px",left:b+"px"});a("#popup_overlay").height(a(document).height())},_maintainPosition:function(c){if(a.alerts.repositionOnResize)switch(c){case true:a(window).bind("resize",a.alerts._reposition);break;case false:a(window).unbind("resize",a.alerts._reposition)}}};jAlert=function(c,b,d){a.alerts.alert(c,b,d)};jConfirm=function(c,b,d){a.alerts.confirm(c,b,d)};jPrompt=function(c,b,d,e){a.alerts.prompt(c,
b,d,e)}})(jQuery);
(function(a){function c(){}function b(){}function d(){}function e(a,b){typeof b==="string"&&(b=b.split("."));var d=b.join(".").replace(/\.(\w)/g,function(a,b){return b.toUpperCase()}),c=b.shift();if(typeof(d=a[d])==j)if(typeof(d=a[c])!=j&&b.length>0)d=e(d,b);return d}function f(){function a(b,c){d.bind(b,function(){return c.apply(e,arguments)})}var b=i.apply(arguments),e=this,d=b.length===1?e:b.shift(),c,b=b[0]||{};for(c in b)a(c,b[c])}function g(a,b){return{input:a,form:b}}var h=(window.JSON||{}).stringify,
i=Array.prototype.slice,j="undefined",m={itemManager:b,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};h||(h=function(){alert("JSON.stringify() not found")});p=b.prototype;p.init=function(){};p.filter=function(a,b){var e=[],d,c;for(d=0;d<a.length;d++)c=a[d],this.itemContains(c,b)&&e.push(c);return e};p.itemContains=
function(a,b){return this.itemToString(a).toLowerCase().indexOf(b.toLowerCase())==0};p.stringToItem=function(a){return a};p.itemToString=function(a){return a};p.compareItems=function(a,b){return a==b};p=c.prototype;p.init=function(b,e){var d=this,c,f,h;d._defaults=a.extend({},m);d._opts=e||{};d._plugins={};d._itemManager=f=new (d.opts("item.manager"));b=a(b);h=a(d.opts("html.wrap"));c=a(d.opts("html.hidden"));b.wrap(h).keydown(function(a){return d.onKeyDown(a)}).keyup(function(a){return d.onKeyUp(a)}).data("textext",
d);a(d).data({hiddenInput:c,wrapElement:b.parents(".text-wrap").first(),input:b});c.attr("name",b.attr("name"));b.attr("name",null);c.insertAfter(b);a.extend(true,f,d.opts("ext.item.manager"));a.extend(true,d,d.opts("ext.*"),d.opts("ext.core"));d.originalWidth=b.outerWidth();d.invalidateBounds();f.init(d);d.initPatches();d.initPlugins(d.opts("plugins"),a.fn.textext.plugins);d.on({setFormData:d.onSetFormData,getFormData:d.onGetFormData,setInputData:d.onSetInputData,anyKeyUp:d.onAnyKeyUp});d.trigger("postInit");
d.trigger("ready");d.getFormData(0)};p.initPatches=function(){var b=[],e=a.fn.textext.patches,d;for(d in e)b.push(d);this.initPlugins(b,e)};p.initPlugins=function(b,e){var d,c,f=[],h;typeof b=="string"&&(b=b.split(/\s*,\s*|\s+/g));for(h=0;h<b.length;h++)if(d=b[h],c=e[d])this._plugins[d]=c=new c,this[d]=function(a){return function(){return a}}(c),f.push(c),a.extend(true,c,this.opts("ext.*"),this.opts("ext."+d));f.sort(function(a,b){a=a.initPriority();b=b.initPriority();return a===b?0:a<b?1:-1});for(h=
0;h<f.length;h++)f[h].init(this)};p.hasPlugin=function(a){return!!this._plugins[a]};p.on=f;p.bind=function(a,b){this.input().bind(a,b)};p.trigger=function(){var a=arguments;this.input().trigger(a[0],i.call(a,1))};p.itemManager=function(){return this._itemManager};p.input=function(){return a(this).data("input")};p.opts=function(a){var b=e(this._opts,a);return typeof b=="undefined"?e(this._defaults,a):b};p.wrapElement=function(){return a(this).data("wrapElement")};p.invalidateBounds=function(){var a=
this.input(),b=this.wrapElement(),e=b.parent(),d=this.originalWidth,c;this.trigger("preInvalidate");c=a.outerHeight();a.width(d);b.width(d).height(c);e.height(c);this.trigger("postInvalidate")};p.focusInput=function(){this.input()[0].focus()};p.serializeData=h;p.hiddenInput=function(){return a(this).data("hiddenInput")};p.getWeightedEventResponse=function(a,b){var e={},d=0;this.trigger(a,e,b);for(var c in e)d=Math.max(d,c);return e[d]};p.getFormData=function(a){a=this.getWeightedEventResponse("getFormData",
a||0);this.trigger("setFormData",a.form);this.trigger("setInputData",a.input)};p.onAnyKeyUp=function(a,b){this.getFormData(b)};p.onSetInputData=function(a,b){this.input().val(b)};p.onSetFormData=function(a,b){this.hiddenInput().val(this.serializeData(b))};p.onGetFormData=function(a,b){var e=this.input().val();b[0]=g(e,e)};a(["Down","Up"]).each(function(){var a=this.toString();p["onKey"+a]=function(b){var e=this.opts("keys")[b.keyCode],d=true;if(e){d=e.substr(-1)!="!";e=e.replace("!","");this.trigger(e+
"Key"+a);if(a=="Up"&&this._lastKeyDown==b.keyCode)this._lastKeyDown=null,this.trigger(e+"KeyPress");if(a=="Down")this._lastKeyDown=b.keyCode}this.trigger("anyKey"+a,b.keyCode);return d}});p=d.prototype;p.on=f;p.formDataObject=g;p.init=function(){throw Error("Not implemented");};p.baseInit=function(b,e){b._defaults=a.extend(true,b._defaults,e);this._core=b;this._timers={}};p.startTimer=function(a,b,e){var d=this;d.stopTimer(a);d._timers[a]=setTimeout(function(){delete d._timers[a];e.apply(d)},b*1E3)};
p.stopTimer=function(a){clearTimeout(this._timers[a])};p.core=function(){return this._core};p.opts=function(a){return this.core().opts(a)};p.itemManager=function(){return this.core().itemManager()};p.input=function(){return this.core().input()};p.val=function(a){var b=this.input();if(typeof a===j)return b.val();else b.val(a)};p.trigger=function(){var a=this.core();a.trigger.apply(a,arguments)};p.bind=function(a,b){this.core().bind(a,b)};p.initPriority=function(){return 0};var n=false,o=a.fn.textext=
function(b){var e;if(!n&&(e=a.fn.textext.css)!=null)a("head").append("<style>"+e+"</style>"),n=true;return this.map(function(){var e=a(this);if(b==null)return e.data("textext");var d=new c;d.init(e,b);e.data("textext",d);return d.input()[0]})};o.addPlugin=function(a,b){o.plugins[a]=b;b.prototype=new o.TextExtPlugin};o.addPatch=function(a,b){o.patches[a]=b;b.prototype=new o.TextExtPlugin};o.TextExt=c;o.TextExtPlugin=d;o.ItemManager=b;o.plugins={};o.patches={}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtIE9Patches=c;a.fn.textext.addPatch("ie9",c);a=c.prototype;a.init=function(a){if(navigator.userAgent.indexOf("MSIE 9")!=-1)a.on({postInvalidate:this.onPostInvalidate})};a.onPostInvalidate=function(){var a=this.input(),d=a.val();a.val(Math.random());a.val(d)}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAjax=c;a.fn.textext.addPlugin("ajax",c);var b=c.prototype,d={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:false,dataCallback:null}};b.init=function(a){this.baseInit(a,d);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};b.load=function(b){var d=this,c=d.opts("ajax.data.callback")||function(a){return{q:a}},c=a.extend(true,{data:c(b),success:function(a){d.onComplete(a,b)},error:function(a,d){console.error(d,
b)}},d.opts("ajax"));a.ajax(c)};b.onComplete=function(a,b){var d=a;this.dontShowLoading();if(this.opts("ajax.cache.results")==true)this._suggestions=a,d=this.itemManager().filter(a,b);this.trigger("setSuggestions",{result:d})};b.dontShowLoading=function(){this.stopTimer("loading")};b.showLoading=function(){var a=this;a.dontShowLoading();a.startTimer("loading",a.opts("ajax.loading.delay"),function(){a.trigger("showDropdown",function(b){b.clearItems();b.addDropdownItem(a.opts("ajax.loading.message")).addClass("text-loading")})})};
b.onGetSuggestions=function(a,b){var d=this,c=d._suggestions,i=(b||{}).query||"";if(c&&d.opts("ajax.cache.results")===true)return d.onComplete(c,i);d.startTimer("ajax",d.opts("ajax.type.delay"),function(){d.showLoading();d.load(i)})}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtArrow=c;a.fn.textext.addPlugin("arrow",c);var b=c.prototype,d={html:{arrow:'<div class="text-arrow"/>'}};b.init=function(b){var c=this;c.baseInit(b,d);c._arrow=b=a(c.opts("html.arrow"));c.core().wrapElement().append(b);b.bind("click",function(a){c.onArrowClick(a)})};b.onArrowClick=function(){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAutocomplete=c;a.fn.textext.addPlugin("autocomplete",c);var b=c.prototype,d={autocomplete:{enabled:true,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};b.init=function(b){var c=this;c.baseInit(b,d);var b=c.input(),g;c.opts("autocomplete.enabled")===true&&(c.on({blur:c.onBlur,anyKeyUp:c.onAnyKeyUp,deleteKeyUp:c.onAnyKeyUp,
backspaceKeyPress:c.onBackspaceKeyPress,enterKeyPress:c.onEnterKeyPress,escapeKeyPress:c.onEscapeKeyPress,setSuggestions:c.onSetSuggestions,showDropdown:c.onShowDropdown,hideDropdown:c.onHideDropdown,toggleDropdown:c.onToggleDropdown,postInvalidate:c.positionDropdown,getFormData:c.onGetFormData,downKeyDown:c.onDownKeyDown,upKeyDown:c.onUpKeyDown}),g=a(c.opts("html.dropdown")),g.insertAfter(b),c.on(g,{mouseover:c.onMouseOver,mousedown:c.onMouseDown,click:c.onClick}),g.css("maxHeight",c.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+
c.opts("autocomplete.dropdown.position")),a(c).data("container",g),a(document.body).click(function(a){c.isDropdownVisible()&&!c.withinWrapElement(a.target)&&c.trigger("hideDropdown")}),c.positionDropdown())};b.containerElement=function(){return a(this).data("container")};b.onMouseOver=function(b){b=a(b.target).closest(".text-suggestion");b.is(".text-suggestion")&&(this.clearSelected(),b.addClass("text-selected"))};b.onMouseDown=function(){this.containerElement().data("mousedownOnAutocomplete",true)};
b.onClick=function(b){b=a(b.target).closest(".text-label");(b.is(".text-suggestion")||b.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};b.onBlur=function(){var a=this.containerElement(),b=a.data("mousedownOnAutocomplete")===true;this.isDropdownVisible()&&(b?this.core().focusInput():this.trigger("hideDropdown"));a.removeData("mousedownOnAutocomplete")};b.onBackspaceKeyPress=function(){(this.val().length>0||this.isDropdownVisible())&&this.getSuggestions()};
b.onAnyKeyUp=function(a,b){var d=this.opts("keys."+b)!=null;this.val().length>0&&!d&&this.getSuggestions()};b.onDownKeyDown=function(){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};b.onUpKeyDown=function(){this.togglePreviousSuggestion()};b.onEnterKeyPress=function(){this.isDropdownVisible()&&this.selectFromDropdown()};b.onEscapeKeyPress=function(){this.isDropdownVisible()&&this.trigger("hideDropdown")};b.positionDropdown=function(){var a=this.containerElement(),b=this.opts("autocomplete.dropdown.position"),
d=this.core().wrapElement().outerHeight(),c={};c[b==="above"?"bottom":"top"]=d+"px";a.css(c)};b.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};b.setSelectedSuggestion=function(b){if(b){var d=this.suggestionElements(),c=d.first(),h,i;this.clearSelected();for(i=0;i<d.length;i++)if(h=a(d[i]),this.itemManager().compareItems(h.data("text-suggestion"),b)){c=h.addClass("text-selected");break}c.addClass("text-selected");this.scrollSuggestionIntoView(c)}};b.selectedSuggestionElement=
function(){return this.suggestionElements().filter(".text-selected").first()};b.isDropdownVisible=function(){return this.containerElement().is(":visible")===true};b.onGetFormData=function(a,b){var d=this.val();b[100]=this.formDataObject(d,d)};b.initPriority=function(){return 200};b.onHideDropdown=function(){this.hideDropdown()};b.onToggleDropdown=function(){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};b.onShowDropdown=function(b,d){var c=this.selectedSuggestionElement().data("text-suggestion");
if(!this._suggestions)return this.trigger("getSuggestions");a.isFunction(d)?d(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());this.showDropdown(this.containerElement());this.setSelectedSuggestion(c)};b.onSetSuggestions=function(a,b){var d=this._suggestions=b.result;b.showHideDropdown!==false&&this.trigger(d===null||d.length===0?"hideDropdown":"showDropdown")};b.getSuggestions=function(){var a=this.val();if(this._previousInputValue!=a)a==""&&(current=null),this._previousInputValue=
a,this.trigger("getSuggestions",{query:a})};b.clearItems=function(){this.containerElement().find(".text-list").children().remove()};b.renderSuggestions=function(b){var d=this;d.clearItems();a.each(b||[],function(a,b){d.addSuggestion(b)})};b.showDropdown=function(){this.containerElement().show()};b.hideDropdown=function(){var a=this.containerElement();this._previousInputValue=null;a.hide()};b.addSuggestion=function(a){var b=this.opts("autocomplete.render");this.addDropdownItem(b?b.call(this,a):this.itemManager().itemToString(a)).data("text-suggestion",
a)};b.addDropdownItem=function(b){var d=this.containerElement().find(".text-list"),c=a(this.opts("html.suggestion"));c.find(".text-label").html(b);d.append(c);return c};b.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};b.toggleNextSuggestion=function(){var a=this.selectedSuggestionElement(),b;a.length>0?(b=a.next(),b.length>0&&a.removeClass("text-selected")):b=this.suggestionElements().first();b.addClass("text-selected");this.scrollSuggestionIntoView(b)};b.togglePreviousSuggestion=
function(){var a=this.selectedSuggestionElement().prev();a.length!=0&&(this.clearSelected(),a.addClass("text-selected"),this.scrollSuggestionIntoView(a))};b.scrollSuggestionIntoView=function(a){var b=a.outerHeight(),d=this.containerElement(),c=d.innerHeight(),i=d.scrollTop(),a=(a.position()||{}).top,j=null,m=parseInt(d.css("paddingTop"));a!=null&&(a+b>c&&(j=a+i+b-c+m),a<0&&(j=a+i-m),j!=null&&d.scrollTop(j))};b.selectFromDropdown=function(){var a=this.selectedSuggestionElement().data("text-suggestion");
a&&(this.val(this.itemManager().itemToString(a)),this.core().getFormData());this.trigger("hideDropdown")};b.withinWrapElement=function(a){return this.core().wrapElement().find(a).size()>0}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFilter=c;a.fn.textext.addPlugin("filter",c);var a=c.prototype,b={filter:{enabled:true,items:null}};a.init=function(a){this.baseInit(a,b);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};a.onGetFormData=function(a,b){var c=this.val(),g="";this.core().hasPlugin("tags")||(this.isValueAllowed(c)&&(g=c),b[300]=this.formDataObject(c,g))};a.isValueAllowed=function(a){var b=
this.opts("filterItems")||this._suggestions||[],c=this.itemManager(),g=!this.opts("filter.enabled"),h;for(h=0;h<b.length&&!g;h++)c.compareItems(a,b[h])&&(g=true);return g};a.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)};a.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFocus=c;a.fn.textext.addPlugin("focus",c);var a=c.prototype,b={html:{focus:'<div class="text-focus"/>'}};a.init=function(a){this.baseInit(a,b);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};a.onBlur=function(){var a=this;clearTimeout(a._timeoutId);a._timeoutId=setTimeout(function(){a.getFocus().hide()},100)};a.onFocus=function(){clearTimeout(this._timeoutId);this.getFocus().show()};
a.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtPrompt=c;a.fn.textext.addPlugin("prompt",c);var b=c.prototype,d={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};b.init=function(b){var c;this.baseInit(b,d);c=a(this.opts("html.prompt"));a(this).data("container",c);this.core().wrapElement().append(c);this.setPrompt(this.opts("prompt"));(c=b.input().attr("placeholder"))||(c=this.opts("prompt"));b.input().attr("placeholder","");c&&this.setPrompt(c);a.trim(this.val()).length>0&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};b.onPostInit=function(){this.invalidateBounds()};b.onPostInvalidate=function(){this.invalidateBounds()};b.invalidateBounds=function(){var a=this.input();this.containerElement().css({paddingLeft:a.css("paddingLeft"),paddingTop:a.css("paddingTop")})};b.onBlur=function(){var a=this;a.startTimer("prompt",0.1,function(){a.showPrompt()})};b.showPrompt=function(){var b=this.input();a.trim(this.val()).length===
0&&!b.is(":focus")&&this.containerElement().removeClass("text-hide-prompt")};b.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};b.onFocus=function(){this.hidePrompt()};b.setPrompt=function(a){this.containerElement().text(a)};b.containerElement=function(){return a(this).data("container")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtSuggestions=c;a.fn.textext.addPlugin("suggestions",c);var a=c.prototype,b={suggestions:null};a.init=function(a){this.baseInit(a,b);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};a.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:b!=false})};a.onPostInit=function(){this.setSuggestions(this.opts("suggestions"),false)};a.onGetSuggestions=function(a,b){var c=this.opts("suggestions");c.sort();
this.setSuggestions(this.itemManager().filter(c,b.query))}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtTags=c;a.fn.textext.addPlugin("tags",c);var b=c.prototype,d="text-tag",e="."+d,f=".text-label",g={tags:{enabled:true,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};b.init=function(b){this.baseInit(b,g);var b=this.input(),c;this.opts("tags.enabled")&&(c=a(this.opts("html.tags")),b.after(c),a(this).data("container",c),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(c,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(b,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(b.css("paddingLeft")||0),top:parseInt(b.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};b.containerElement=function(){return a(this).data("container")};b.onPostInit=function(){this.addTags(this.opts("tags.items"))};
b.onGetFormData=function(a,b,c){a=c===13?"":this.val();b[200]=this.formDataObject(a,this._formData)};b.initPriority=function(){return 100};b.onInputMouseMove=function(a){this.toggleZIndex(a)};b.onContainerMouseMove=function(a){this.toggleZIndex(a)};b.onBackspaceKeyDown=function(){var a=this.tagElements().last();this.val().length==0&&this.removeTag(a)};b.onPreInvalidate=function(){var a=this.tagElements().last(),b=a.position();a.length>0?b.left+=a.innerWidth():b=this._originalPadding;this._paddingBox=
b;this.input().css({paddingLeft:b.left,paddingTop:b.top})};b.onClick=function(b){function c(a,b){o.data(d,a);o.find(f).text(g.itemManager().itemToString(a));g.updateFormCache();m.getFormData();m.invalidateBounds();b&&m.focusInput()}var g=this,m=g.core(),b=a(b.target),n=0,o;b.is(".text-tags")?n=1:b.is(".text-remove")?(g.removeTag(b.parents(e+":first")),n=1):b.is(f)&&(o=b.parents(e+":first"),g.trigger("tagClick",o,o.data(d),c));n&&m.focusInput()};b.onEnterKeyPress=function(){var a=this.val(),a=this.itemManager().stringToItem(a);
this.isTagAllowed(a)&&(this.addTags([a]),this.core().focusInput())};b.updateFormCache=function(){var b=[];this.tagElements().each(function(){b.push(a(this).data(d))});this._formData=b};b.toggleZIndex=function(a){var b=this.input().offset(),c=a.clientX-b.left,d=a.clientY-b.top,e=this._paddingBox,a=this.containerElement(),b=a.is(".text-tags-on-top"),c=c>e.left&&d>e.top;if(!b&&!c||b&&c)a[(!b?"add":"remove")+"Class"]("text-tags-on-top")};b.tagElements=function(){return this.containerElement().find(e)};
b.isTagAllowed=function(a){a={tag:a,result:true};this.trigger("isTagAllowed",a);return a.result===true};b.addTags=function(a){if(a&&a.length!=0){var b=this.core(),c=this.containerElement(),d,e;for(d=0;d<a.length;d++)(e=a[d])&&this.isTagAllowed(e)&&c.append(this.renderTag(e));this.updateFormCache();b.getFormData();b.invalidateBounds()}};b.getTagElement=function(b){var c=this.tagElements(),e,f;for(e=0;f=a(c[e]);e++)if(this.itemManager().compareItems(f.data(d),b))return f};b.removeTag=function(b){var c=
this.core(),e;b instanceof a?(e=b,b.data(d)):e=this.getTagElement(b);e.remove();this.updateFormCache();c.getFormData();c.invalidateBounds()};b.renderTag=function(b){var c=a(this.opts("html.tag"));c.find(".text-label").text(this.itemManager().itemToString(b));c.data(d,b);return c}})(jQuery);(!$.browser.msie||$.browser.version>"8")&&function(a){var c=document,b=c.getElementsByTagName("head")[0]||c.getElementsByTagName("body")[0],c=c.createElement("style");c.innerHTML=a;b.appendChild(c)}('\n.text-core {  position: relative;}.text-core .text-wrap {  background: #fff;  position: absolute;}.text-core .text-wrap textarea, .text-core .text-wrap input {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  -webkit-border-radius: 0px;  -moz-border-radius: 0px;  border-radius: 0px;  border: 1px solid #9daccc;  outline: none;  resize: none;  position: absolute;  z-index: 1;  background: none;  overflow: hidden;  margin: 0;  padding: 3px 5px 4px 5px;  white-space: nowrap;  font: 11px "lucida grande", tahoma, verdana, arial, sans-serif;  line-height: 13px;  height: auto;}\n.text-core .text-wrap .text-arrow {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  position: absolute;  top: 0;  right: 0;  width: 22px;  height: 22px;  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOAQMAAADHWqTrAAAAA3NCSVQICAjb4U/gAAAABlBMVEX///8yXJnt8Ns4AAAACXBIWXMAAAsSAAALEgHS3X78AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1MzmNZGAwAAABpJREFUCJljYEAF/xsY6hkY7BgYZBgYOFBkADkdAmFDagYFAAAAAElFTkSuQmCC") 50% 50% no-repeat;  cursor: pointer;  z-index: 2;}\n.text-core .text-wrap .text-dropdown {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  padding: 0;  position: absolute;  z-index: 3;  background: #fff;  border: 1px solid #9daccc;  width: 100%;  max-height: 100px;  padding: 1px;  font: 11px "lucida grande", tahoma, verdana, arial, sans-serif;  display: none;  overflow-x: hidden;  overflow-y: auto;}.text-core .text-wrap .text-dropdown.text-position-below {  margin-top: 1px;}.text-core .text-wrap .text-dropdown.text-position-above {  margin-bottom: 1px;}.text-core .text-wrap .text-dropdown .text-list .text-suggestion {  padding: 3px 5px;  cursor: pointer;}.text-core .text-wrap .text-dropdown .text-list .text-suggestion em {  font-style: normal;  text-decoration: underline;}.text-core .text-wrap .text-dropdown .text-list .text-suggestion.text-selected {  color: #fff;  background: #6d84b4;}\n.text-core .text-wrap .text-focus {  -webkit-box-shadow: 0px 0px 6px #6d84b4;  -moz-box-shadow: 0px 0px 6px #6d84b4;  box-shadow: 0px 0px 6px #6d84b4;  position: absolute;  width: 100%;  height: 100%;  display: none;}.text-core .text-wrap .text-focus.text-show-focus {  display: block;}\n.text-core .text-wrap .text-prompt {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  position: absolute;  width: 100%;  height: 100%;  margin: 1px 0 0 2px;  font: 11px "lucida grande", tahoma, verdana, arial, sans-serif;  color: #c0c0c0;  overflow: hidden;  white-space: pre;}.text-core .text-wrap .text-prompt.text-hide-prompt {  display: none;}\n.text-core .text-wrap .text-tags {  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  position: absolute;  width: 100%;  height: 100%;  padding: 3px 35px 3px 3px;  cursor: text;}.text-core .text-wrap .text-tags.text-tags-on-top {  z-index: 2;}.text-core .text-wrap .text-tags .text-tag {  float: left;}.text-core .text-wrap .text-tags .text-tag .text-button {  -webkit-border-radius: 2px;  -moz-border-radius: 2px;  border-radius: 2px;  -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;  box-sizing: border-box;  position: relative;  float: left;  border: 1px solid #9daccc;  background: #e2e6f0;  color: #000;  padding: 0px 17px 0px 3px;  margin: 0 2px 2px 0;  cursor: pointer;  height: 16px;  font: 11px "lucida grande", tahoma, verdana, arial, sans-serif;}.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove {  position: absolute;  right: 3px;  top: 2px;  display: block;  width: 11px;  height: 11px;  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAhCAYAAAAPm1F2AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAAQ5JREFUOI2dlD0WwiAQhCc8L6HHgAPoASwtSYvX8BrQxtIyveYA8RppLO1jE+LwE8lzms2yH8MCj1QoaBzH+VuUYNYMS213UlvDRamtUbXb5ZyPHuDoxwGgip3ipfvGuGzPz+vZ/coDONdzFuYCO6ramQQG0DJIE1oPBBvM6e9LqaS2FwD7FWwnVoIAsOc2Xn1jDlyd8pfPBRVOBHA8cc/3yCmQqt0jcY4LuTyAF3pOYS6wI48LAm4MUrx5JthgSQJAt5LtNgAUgEMBBIC3AL2xgo58dEPfhE9wygef89FtCeC49UwltR1pQrK2qr9vNr7uRTCBF3pOYS6wI4/zdQ8MUpxPI9hgSQL0Xyio/QBt54DzsHQx6gAAAABJRU5ErkJggg==") 0 0 no-repeat;}.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove:hover {  background-position: 0 -11px;}.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove:active {  background-position: 0 -22px;}');
(function(a,c){var b=a.jQuery||a.Cowboy||(a.Cowboy={}),d;b.throttle=d=function(a,d,g,h){function i(){function b(){m=+new Date;g.apply(u,C)}function i(){j=c}var u=this,t=+new Date-m,C=arguments;h&&!j&&b();j&&clearTimeout(j);h===c&&t>a?b():d!==true&&(j=setTimeout(h?i:b,h===c?a-t:a))}var j,m=0;typeof d!=="boolean"&&(h=g,g=d,d=c);if(b.guid)i.guid=g.guid=g.guid||b.guid++;return i};b.debounce=function(a,b,g){return g===c?d(a,b,false):d(a,g,b!==false)}})(this);
MessageBundle={en:{"ajax.loading":"loading...","ajax.error":"network error,please try later",required:"please input value","selection.required":"please select",phone:"please input valid phone number",email:"please input valid email",integer:"must be a integer","integer.positive":"must be a positive integer","double":"must be a decimal","double.positive":"must be a positive decimal","save.and.create":"save and add","no.selection":"no selection","no.modification":"no modification",select:"please select",
"confirm.delete":"are sure to delete?","confirm.save":"are sure to save?","confirm.exit":"you have unsaved modification,are sure to exit?"},"zh-cn":{"ajax.loading":"\u6b63\u5728\u52a0\u8f7d...","ajax.error":"\u9519\u8bef,\u8bf7\u7a0d\u540e\u518d\u8bd5",required:"\u8bf7\u586b\u5199","selection.required":"\u8bf7\u9009\u62e9",email:"email\u4e0d\u5408\u6cd5",phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u53f7\u7801",integer:"\u8bf7\u586b\u5199\u6574\u6570","integer.positive":"\u8bf7\u586b\u5199\u6b63\u6574\u6570",
"double":"\u8bf7\u586b\u5199\u6570\u5b57","double.positive":"\u8bf7\u586b\u5199\u5927\u4e8e\u96f6\u7684\u6570\u5b57","save.and.create":"\u4fdd\u5b58\u5e76\u65b0\u5efa","no.selection":"\u6ca1\u6709\u9009\u4e2d","no.modification":"\u6ca1\u6709\u66f4\u6539",add:"\u6dfb\u52a0",remove:"\u5220\u9664",browse:"\u6d4f\u89c8\u6587\u4ef6",select:"\u8bf7\u9009\u62e9",save:"\u4fdd\u5b58",restore:"\u8fd8\u539f",cancel:"\u53d6\u6d88",error:"\u9519\u8bef",success:"\u64cd\u4f5c\u6210\u529f",confirm:"\u786e\u5b9a",
"confirm.delete":"\u786e\u5b9a\u8981\u5220\u9664?","confirm.save":"\u786e\u5b9a\u8981\u4fdd\u5b58?","confirm.exit":"\u6709\u6539\u52a8\u672a\u4fdd\u5b58,\u786e\u5b9a\u8981\u79bb\u5f00?","true":"\u662f","false":"\u5426"},get:function(){var a=arguments[0],c=MessageBundle.lang(),c=MessageBundle[c][a];typeof c=="undefined"&&(c=a);for(a=1;a<arguments.length;a++)c=c.replace("{"+a+"}",arguments[a]);return c},lang:function(){var a=(navigator.language||navigator.browserLanguage||"").toLowerCase();MessageBundle[a]||
(a="en");return a},shortLang:function(){var a=MessageBundle.lang(),c=a.indexOf("-");c>0&&(a=a.substring(0,c));return a}};var MODERN_BROWSER=!$.browser.msie||$.browser.version>8;
(function(){var a=document.domain;if(!a.match(/^(\d+\.){3}\d+$/)){a=a.split(".");try{if(a.length>2)document.domain=a[a.length-2]+"."+a[a.length-1]}catch(c){if(a.length>3)document.domain=a[a.length-3]+"."+a[a.length-2]+"."+a[a.length-1]}}$.ajaxSettings.traditional=true;var b=$.ajax;if(MODERN_BROWSER)$.ajax=function(a){a.url=UrlUtils.makeSameOrigin(a.url);a.xhrFields={withCredentials:true};return b(a)};if(typeof $.rc4EncryptStr!="undefined"&&$('meta[name="pe"]').attr("content")!="false"){var d=$.param;
$.param=function(a,b){(jQuery.isArray(a)||a.jquery)&&jQuery.each(a,function(){if(/password$/.test(this.name.toLowerCase()))try{var a=$.cookie("T"),a=a.substring(15,25);this.value=$.rc4EncryptStr(encodeURIComponent(this.value+a),a)}catch(b){}});return d(a,b)}}})();
Indicator={text:"",show:function(a){$("#indicator").length||$('<div id="indicator"></div>').appendTo(document.body);var c=$("#indicator");a&&c.hasClass("loading")&&c.removeClass("loading");!a&&!c.hasClass("loading")&&c.addClass("loading");c.html(Indicator.text||MessageBundle.get("ajax.loading"));c.show();Indicator.text=""},showError:function(){Indicator.text=MessageBundle.get("ajax.error");Indicator.show(true)},hide:function(){Indicator.text="";$("#indicator")&&$("#indicator").hide()}};
UrlUtils={extractDomain:function(a){if(UrlUtils.isAbsolute(a)){var a=a.replace(/:\d+/,""),a=a.substring(a.indexOf("://")+3),c=a.indexOf("/");c>0&&(a=a.substring(0,c));return a}else return document.location.hostname},isSameDomain:function(a,c){var c=c||document.location.href,b=UrlUtils.extractDomain(a),d=UrlUtils.extractDomain(c);return b==d},isSameOrigin:function(a,c){var c=c||document.location.href,b=UrlUtils.extractDomain(a),d=UrlUtils.extractDomain(c);if($.browser.msie&&b!=d)return false;b=b.split(".");
d=d.split(".");return b[b.length-1]==d[d.length-1]&&b[b.length-2]==d[d.length-2]},makeSameOrigin:function(a,c){c=c||document.location.href;return UrlUtils.isSameOrigin(a,c)?a:c.substring(0,c.indexOf("/",c.indexOf("://")+3))+CONTEXT_PATH+"/webproxy/"+a},isAbsolute:function(a){if(!a)return false;a=a.indexOf("://");return a==4||a==5},absolutize:function(a){if(UrlUtils.isAbsolute(a))return a;var c=document.location.href,b=c.indexOf("://");return a.length==0||a.indexOf("/")==0?c.substring(0,c.indexOf("/",
b+3))+CONTEXT_PATH+a:c.substring(0,c.lastIndexOf("/")+1)+a}};
Message={compose:function(a,c){return'<div class="'+c+'"><a class="close" data-dismiss="alert">&times;</a>'+a+"</div>"},showMessage:function(){Message.showActionMessage(MessageBundle.get.apply(this,arguments))},showError:function(){Message.showActionError(MessageBundle.get.apply(this,arguments))},showActionError:function(a,c){Message.showActionMessage(a,c,true)},showActionMessage:function(a,c,b){if(a){if(typeof a=="string"){var d=[];d.push(a);a=d}for(var d="",e=0;e<a.length;e++)d+=Message.compose(a[e],
b?"action-error alert alert-error":"action-message alert alert-info");d&&(a=$("#content"),b&&c&&$(c).parents("#_window_").length&&(a=$("#_window_")),$("#message",a).length||$('<div id="message"></div>').prependTo(a),a=$("#message",a),b&&c&&$(c).prop("tagName")=="FORM"&&$("#"+c.id+"_message").length==0&&(a=$(c).before('<div id="'+c.id+'_message"></div>')),a.html(d),$("html,body").animate({scrollTop:a.offset().top-20},100))}},showFieldError:function(a,c,b){c=c||MessageBundle.get(b);if(a&&$(a).length&&
$(a).is(":visible")){a=$(a);a.closest(".control-group").addClass("error");$(".field-error",a.parent()).remove();c=$('<div class="field-error removeonclick"><div class="field-error-content">'+c+"</div><div>").insertAfter(a);$('<div class="field-error-arrow"/>').html('<div class="line10"><\!-- --\></div><div class="line9"><\!-- --\></div><div class="line8"><\!-- --\></div><div class="line7"><\!-- --\></div><div class="line6"><\!-- --\></div><div class="line5"><\!-- --\></div><div class="line4"><\!-- --\></div><div class="line3"><\!-- --\></div><div class="line2"><\!-- --\></div><div class="line1"><\!-- --\></div>').appendTo(c);
var d=a.width(),e=c.height(),b=a.position().top,a=a.position().left+d-30;c.css({top:b+"px",left:a+"px",marginTop:-e+"px",opacity:0});c.animate({opacity:0.8})}else Message.showActionError(c)}};
Form={focus:function(a){for(var c=$(":input:visible",a).get(),b=0;b<c.length;b++)if($(".field-error",$(c[b]).parent()).length){setTimeout(function(){$(c[b]).focus()},50);break}},validate:function(a){if($(a).prop("tagName")!="FORM"){$(a).closest(".control-group").removeClass("error");$(".field-error",$(a).parent()).fadeIn().remove();if($(a).is(":visible")&&!$(a).prop("disabled"))if($(a).hasClass("required")&&!$(a).val())return $(a).prop("tagName")=="SELECT"?Message.showFieldError(a,null,"selection.required"):
Message.showFieldError(a,null,"required"),false;else if($(a).hasClass("email")&&$(a).val()&&!$(a).val().match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))return Message.showFieldError(a,null,"email"),false;else if($(a).hasClass("phone")&&$(a).val()&&!$(a).val().match(/^[\d-]+$/))return Message.showFieldError(a,null,"phone"),false;else if($(a).hasClass("integer")&&$(a).val()){if($(a).hasClass("positive")&&!$(a).val().match(/^[+]?\d*$/))return Message.showFieldError(a,null,"integer.positive"),
false;if(!$(a).hasClass("positive")&&!$(a).val().match(/^[-+]?\d*$/))return Message.showFieldError(a,null,"integer"),false}else if($(a).hasClass("double")&&$(a).val()){if($(a).hasClass("positive")&&!$(a).val().match(/^[+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double.positive"),false;if(!$(a).hasClass("positive")&&!$(a).val().match(/^[-+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double"),false}return true}else{var c=true;$(":input",a).each(function(){Form.validate(this)||
(c=false)});c||Form.focus(a);return c}}};
Ajax={defaultRepacement:"content",fire:function(a,c){if(!a)return true;var b=a[c];typeof b=="undefined"&&(b=$(a).attr(c));if(typeof b=="undefined"||!b)return true;var d=[];if(arguments.length>2)for(var e=2;e<arguments.length;e++)d[e-2]=arguments[e];var f;if(typeof b=="function")f=b.apply(a,d);else{b.indexOf("return")>-1&&(b=b.replace("return",""));a._temp=function(){return eval(b)};try{f=a._temp()}catch(g){alert(g)}}return false==f?false:true},handleResponse:function(a,c){if(a){var b=false,d=c.target;
if(d&&$(d).parents("div.ui-dialog").length)c.quiet=true;if(typeof a=="string"&&(a.indexOf("{")==0||a.indexOf("[")==0))a=$.parseJSON(a);if(typeof a=="string"){if(a.indexOf("<title>")>=0&&a.indexOf("</title>")>0&&(Ajax.title=a.substring(a.indexOf("<title>")+7,a.indexOf("</title>")),c.replaceTitle))document.title=Ajax.title;for(var e={},f=(c.replacement||$(d).attr("replacement")||($(d).prop("tagName")=="FORM"?$(d).attr("id"):null)||Ajax.defaultRepacement).split(","),g=0;g<f.length;g++){var h=f[g].split(":",
2);e[h[0]]=h.length==2?h[1]:h[0]}var f=a.replace(/<script(.|\s)*?\/script>/g,""),g=$("<div/>").html(f),i;for(i in e){h=$("#"+i);i==Ajax.defaultRepacement&&!h.length&&(h=$("body"));!c.quiet&&h.length&&$("html,body").animate({scrollTop:h.offset().top-50},100);var j=g.find("#"+e[i]);j.length?h.html(j.html()):g.find("#content").length?h.html(g.find("#content").html()):g.find("body").length?h.html(g.find("body").html()):h.html(f);!c.quiet&&typeof $.effects!="undefined"&&h.effect("highlight");_observe(h)}g.remove();
Ajax.fire(d,"onsuccess",a)}else if(Ajax.jsonResult=a,a.fieldErrors||a.actionErrors?(b=true,c.onerror&&c.onerror.apply(window),Ajax.fire(d,"onerror",a)):(c.onsuccess&&c.onsuccess.apply(window),Ajax.fire(d,"onsuccess",a)),Message.showActionError(a.actionErrors,d),Message.showActionMessage(a.actionMessages,d),a.fieldErrors)if(d){for(i in a.fieldErrors)Message.showFieldError(d[i],a.fieldErrors[i]);Form.focus(d)}else for(i in a.fieldErrors)Message.showActionError(a.fieldErrors[i]);d&&d.tagName=="FORM"&&
(setTimeout(function(){$('button[type="submit"]',d).prop("disabled",false);Captcha.refresh()},100),!b&&$(d).hasClass("reset")&&(typeof d.reset=="function"||typeof d.reset=="object"&&!d.reset.nodeType)&&d.reset());Indicator.text="";Ajax.fire(d,"oncomplete",a)}},jsonResult:null,title:""};
function ajaxOptions(a){a=a||{};if(!a.dataType)a.dataType="text";if(!a.headers)a.headers={};$.extend(a.headers,{"X-Data-Type":a.dataType});var c=a.beforeSend;a.beforeSend=function(b){c&&c(b);Indicator.text=a.indicator;Ajax.fire(null,a.onloading)};var b=a.success;a.success=function(c,e,f){Ajax.handleResponse(c,a);b&&!c.fieldErrors&&!c.actionErrors&&b(c,e,f)};return a}function ajax(a){$.ajax(ajaxOptions(a))}var CONTEXT_PATH=$('meta[name="context_path"]').attr("content")||"";
typeof Initialization=="undefined"&&(Initialization={});typeof Observation=="undefined"&&(Observation={});function _init(){var a=[],c;for(c in Initialization)typeof Initialization[c]=="function"&&a.push(c);a.sort();for(c=0;c<a.length;c++)Initialization[a[c]].call(this);_observe()}
function _observe(a){a||(a=document);$(".chart,form.ajax,.ajaxpanel",a).each(function(a){if(!this.id)this.id=("a"+(a+Math.random())).replace(".","").substring(0,5)});var c=[],b;for(b in Observation)typeof Observation[b]=="function"&&c.push(b);c.sort();for(b=0;b<c.length;b++)Observation[c[b]].call(this,a)}$(_init);
Initialization.common=function(){$(document).ajaxStart(function(){Indicator.show()});$(document).ajaxError(function(){Indicator.showError()});$(document).ajaxSuccess(function(a,c){Indicator.hide();var b=c.getResponseHeader("X-Redirect-To");if(b){b=UrlUtils.absolutize(b);try{var d=top.location.href;d&&UrlUtils.isSameDomain(d,b)?top.location.href=b:document.location.href=b}catch(e){document.location.href=b}}});$(".removeonclick").live("click",function(){$(this).remove()});$("input").live("keyup",$.debounce(500,
function(a){!$(this).hasClass("email")&&a.keyCode!=13&&Form.validate(this);return true})).live("blur",function(){this.value!=this.defaultValue&&Form.validate(this);return true});$("select").live("change",function(){Form.validate(this);return true});$(".ui-dialog-titlebar").live("dblclick",function(){Dialog.toggleMaximization($(".ui-dialog-content",$(this).closest(".ui-dialog")))});$(".popover,.tooltip").live("mouseenter",function(){$(this).remove()});$.alerts.okButton=MessageBundle.get("confirm");
$.alerts.cancelButton=MessageBundle.get("cancel");$(".nav li a").each(function(){$(this).attr("href")==document.location.pathname&&$(this).closest("li").addClass("active")});$(".nav li a").click(function(){$("li",$(this).closest(".nav")).removeClass("active");$(this).closest("li").addClass("active")})};var HISTORY_ENABLED=MODERN_BROWSER&&(typeof history.pushState!="undefined"||typeof $.history!="undefined")&&$('meta[name="history_enabled"]').attr("content")!="false";
if(HISTORY_ENABLED){var SESSION_HISTORY_SUPPORT=typeof history.pushState!="undefined"&&document.location.hash.indexOf("#!/")!=0,_historied_=false;Initialization.history=function(){if(SESSION_HISTORY_SUPPORT){var a=document.location.href;history.replaceState({url:a},"",a);window.onpopstate=function(a){var b=document.location.href;a.state&&ajax({url:b,replaceTitle:true,replacement:a.state.replacement,cache:false,success:function(){$(".nav li a").each(function(){if(this.href==b||b.indexOf(this.href+
"?")==0)$("li",$(this).closest(".nav")).removeClass("active"),$(this).closest("li").addClass("active")})},headers:{"X-Fragment":"_"}})}}else $.history.init(function(a){if(!(!a&&!_historied_||a&&a.indexOf("!")<0)){var b=document.location.href;b.indexOf("#")>0&&(b=b.substring(0,b.indexOf("#")));a.length&&(a=a.substring(1),UrlUtils.isSameDomain(a)&&CONTEXT_PATH&&(a=CONTEXT_PATH+a),b=a);_historied_=true;ajax({url:b,cache:true,replaceTitle:true,success:function(){$(".nav li a").each(function(){$(this).attr("href")==
b&&($("li",$(this).closest(".nav")).removeClass("active"),$(this).closest("li").addClass("active"))})},headers:{"X-Fragment":"_"}})}},{unescape:true})}}
Observation.common=function(a){$(".controls .field-error",a).each(function(){var a=$(this).text(),b=$(":input",$(this).parent());$(this).remove();Message.showFieldError(b,a)});var c=$(a).prop("tagName")=="FORM"&&$(a).hasClass("focus")?a:$(".focus:eq(0)",a);if(c.prop("tagName")!="FORM")c.focus();else for(var c=$(":input:visible",c).toArray(),b=0;b<c.length;b++)if(!$(c[b]).val()){$(c[b]).focus();break}$("form",a).each(function(){$(this).hasClass("ajax")||$(this).submit(function(){$(".action-error").remove();
return Form.validate(this)})});$('input[type="text"]',a).each(function(){$(this).attr("autocomplete")||$(this).attr("autocomplete","off");var a=$(this).attr("maxlength");if(!a||a>3E3)$(this).hasClass("date")?$(this).attr("maxlength","10"):$(this).hasClass("integer")?$(this).attr("maxlength","11"):$(this).hasClass("double")?$(this).attr("maxlength","22"):$(this).attr("maxlength","255")});$(".linkage",a).each(function(){var a=$(this);a.data("originalclass",a.attr("class"));var b=$(".linkage_switch",
a);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val());b.change(function(){var a=$(this).closest(".linkage"),b=$(this);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val())})});$(":input.conjunct",a).change(function(){var a=$(this),b=$(this).closest("form"),c=$(':input[type=hidden][name$=".id"]',
b),b=b.attr("action"),b=b.indexOf("/")>-1?b.substring(0,b.lastIndexOf("/"))+"/input":"input",g={};c.val()&&(g.id=c.val());g[a.attr("name")]=a.val();ajax({global:false,quiet:true,method:"GET",url:b,data:g,replacement:a.attr("replacement")})});!$.browser.msie&&typeof $.fn.elastic!="undefined"&&$("textarea.elastic",a).elastic();typeof $.fn.tabs!="undefined"&&$("div.tabs",a).each(function(){$(this).tabs({select:function(a,b){$(b.panel).trigger("load")}}).tabs("select",$(this).data("tab"))});typeof $.fn.datepicker!=
"undefined"&&$("input.date",a).datepicker({dateFormat:"yy-mm-dd",zIndex:2E3});$("input.captcha",a).focus(function(){$(this).data("_captcha_")||($(this).after('<img class="captcha" src="'+this.id+'"/>'),$("img.captcha",a).click(Captcha.refresh),$(this).data("_captcha_",true))});typeof $.fn.treeTable!="undefined"&&$(".treeTable",a).each(function(){$(this).treeTable({initialState:$(this).hasClass("expanded")?"expanded":"collapsed"})});$(".carousel",a).each(function(){var a=$(this);a.carousel((new Function("return "+
(a.data("options")||"{}")))())});$(".tiped,:input[title]",a).each(function(){var a=$(this),b={trigger:a.data("trigger")||"hover",placement:a.data("placement")||"top"};!a.attr("title")&&a.data("tipurl")&&a.attr("title",MessageBundle.get("ajax.loading"));a.bind(b.trigger,function(){a.hasClass("_tiped")||(a.addClass("_tiped"),$.ajax({url:a.data("tipurl"),global:false,dataType:"html",success:function(c){a.attr("data-original-title",c);a.tooltip(b).tooltip("show")}}))});if(a.is(":input"))b.trigger="focus",
b.placement="right";a.tooltip(b)});$(".poped",a).each(function(){var a=$(this),b={trigger:a.data("trigger")||"hover",placement:a.data("placement")||"right",title:a.data("title"),content:a.data("content")};if(!b.content&&a.data("popurl"))b.title=MessageBundle.get("ajax.loading");a.bind(b.trigger,function(){a.hasClass("_poped")||(a.addClass("_poped"),$.ajax({url:a.data("popurl"),global:false,dataType:"html",success:function(c){c.indexOf("<title>")>=0&&c.indexOf("</title>")>0&&a.attr("data-original-title",
c.substring(c.indexOf("<title>")+7,c.indexOf("</title>")));c.indexOf("<body>")>=0&&c.indexOf("</body>")>0&&a.attr("data-content",c.substring(c.indexOf("<body>")+6,c.indexOf("</body>")));a.popover(b).popover("show")}}))});a.popover(b)});$(".switch",a).each(function(){var a=$(this);a.children().css("cursor","pointer").click(function(){a.children().removeClass("active").css({"font-weight":"normal"});$(this).addClass("active").css({"font-weight":"bold"})})});if(typeof swfobject!="undefined")$(".chart",
a).each(function(){var a=this.id,b=$(this).width(),c=$(this).height(),g=$(this).attr("data");g.indexOf("/")==0&&(g=document.location.protocol+"//"+document.location.host+g);g=encodeURIComponent(g);(!a||!b||!c||!g)&&alert("id,width,height,data all required");swfobject.embedSWF(CONTEXT_PATH+"/assets/images/open-flash-chart.swf",a,b,c,"9.0.0",CONTEXT_PATH+"/assets/images/expressInstall.swf",{"data-file":g},{wmode:"transparent"})}),window.save_image=function(){var a=[];a.push("<html><head><title>Charts: Export as Image</title></head><body>");
$("object[data]").each(function(){a.push('<img src="data:image/png;base64,'+this.get_img_binary()+'"/>')});a.push("</body></html>");var b=window.open("","_blank");with(b.document)write(a.join("")),b.document.close()};$("a.ajax,form.ajax",a).each(function(){var a=this,b=[],c=$(a).attr("id");typeof c!="string"&&(c="");for(var c=($(a).attr("replacement")||($(a).prop("tagName")=="FORM"?c:"")).split(","),g=0;g<c.length;g++){var h=c[g].split(":",2);(h=h.length==2?h[1]:h[0])&&b.push(h)}if(this.tagName==
"FORM"){var i={beforeSubmit:function(){if(!Ajax.fire(a,"onprepare"))return false;$(".action-error").remove();if(!Form.validate(a))return false;Indicator.text=$(a).data("indicator");$('button[type="submit"]',a).prop("disabled",true);Ajax.fire(a,"onloading")},error:function(){Form.focus(a);a&&a.tagName=="FORM"&&setTimeout(function(){$('button[type="submit"]',a).prop("disabled",false)},100);Ajax.fire(a,"onerror")},success:function(b){Ajax.handleResponse(b,{target:a})},headers:{}};$(this).hasClass("view")||
$.extend(i.headers,{"X-Data-Type":"json"});b.length>0&&$.extend(i.headers,{"X-Fragment":b.join(",")});$(this).bind("submit",function(){$(this).ajaxSubmit(i);return false})}else $(this).click(function(){if(!Ajax.fire(a,"onprepare"))return false;if(HISTORY_ENABLED&&$(this).hasClass("view")&&($(this).hasClass("history")||!$(this).attr("replacement"))){var c=this.href;if(UrlUtils.isSameDomain(c))if(c=c.substring(c.indexOf("//")+2),c=c.substring(c.indexOf("/")),SESSION_HISTORY_SUPPORT)history.pushState({replacement:$(this).attr("replacement"),
url:c},"",c);else return CONTEXT_PATH&&(c=c.substring(CONTEXT_PATH.length)),c=c.replace(/^.*#/,""),$.history.load("!"+c),false}var c={url:this.href,type:$(this).attr("method")||"GET",cache:$(this).hasClass("cache"),beforeSend:function(){$(".action-error").remove();Indicator.text=$(a).data("indicator");Ajax.fire(a,"onloading")},error:function(){Ajax.fire(a,"onerror")},headers:{}},f={target:a};$(this).hasClass("view")||$.extend(c.headers,{"X-Data-Type":"json"});b.length>0?$.extend(c.headers,{"X-Fragment":b.join(",")}):
($.extend(c.headers,{"X-Fragment":"_"}),f.replaceTitle=true);c.success=function(a){Ajax.handleResponse(a,f)};$.ajax(c);return false})})};
var Dialog={adapt:function(a,c){if(c){var b=c.document;if(c.contentDocument)b=c.contentDocument;else if(c.contentWindow)b=c.contentWindow.document;$(a).dialog("option","title",b.title);$(a).dialog("option","minHeight",d);var d=$(b).height()+20;$(c).height(d)}else $(a).dialog("option","title",Ajax.title);a.dialog("option","position","center");d=a.height();d>600&&a.dialog("option","position","top");a.dialog("moveToTop")},toggleMaximization:function(a){var c=$(a).closest(".ui-dialog"),b=c.data("orginal-width");
if(b)c.width(b),c.height(c.data("orginal-height")),c.removeData("orginal-width").removeData("orginal-height"),Dialog.adapt($(a));else{c.data("orginal-width",c.width()+0.2).data("orginal-height",c.height()+0.2);var b=$(window).width()-10,d=$(window).height()-10;c.width(b);$(a).dialog("option","minHeight")<d&&c.height(d);a.dialog("option","position","top")}}};
Captcha={refresh:function(){$("img.captcha").each(function(){var a=this.src,c=a.lastIndexOf("&");c>0&&(a=a.substring(0,c));this.src=a+"&"+Math.random()});$("input.captcha").val("")}};ArrayUtils={unique:function(a){if(a){for(var c=[],b={},d=0,e;(e=a[d])!=null;d++)b[e]||(c.push(e),b[e]=true);return c}}};
(function(a){a.fn.checkavailable=function(){this.each(function(){var c=a(this);c.bind("checkavailable",function(){if(c.val()){var b=a("input[type=hidden]",c.closest("form")).not('[name^="__"]').add(c),d=c.attr("checkurl");d||(d=c.closest("form").prop("action"),d=d.substring(0,d.lastIndexOf("/"))+"/checkavailable");ajax({global:false,target:c.closest("form")[0],url:d,data:b.serialize()})}}).change(function(){c.addClass("dirty")}).blur(function(){c.hasClass("dirty")&&c.trigger("checkavailable")})});
return this}})(jQuery);Observation.checkavailable=function(a){$(":input.checkavailable",a).checkavailable()};
Observation.tags=function(a){typeof $.fn.textext!="undefined"&&(!$.browser.msie||$.browser.version>"8")&&$("input.tags",a).each(function(){var a=$(this),b={prompt:"...",autocomplete:{dropdownMaxHeight:"200px",render:function(a){return typeof a=="string"?a:a.label?'<div value="'+a.value+'">'+a.label+"</div>":a.value}},ext:{core:{serializeData:function(a){return a.join(",")}},itemManager:{itemToString:function(a){return typeof a=="string"?a:a.value}}}},d=a.val();if(d)b.tagsItems=d.indexOf('["')==0?
$.parseJSON(d):d.split(",");a.attr("source")?(b.plugins="tags prompt focus autocomplete ajax arrow",b.ajax={global:false,url:a.attr("source"),cacheResults:false,dataCallback:function(a){return{keyword:a}}}):b.plugins="tags prompt focus";a.val("").textext(b)})};
(function(a){function c(a,c,e){if(typeof FileReaderSync!="undefined"){for(var f=new BlobBuilder,g=new FileReaderSync,a=event.data,h=0;h<a.length;h++)f.append("--"),f.append(e),f.append("\r\n"),f.append("Content-Disposition: form-data; name="),f.append(c),f.append("; filename="),f.append(a[h].name),f.append("\r\n"),f.append("Content-Type: "),f.append(a[h].type),f.append("\r\n\r\n"),f.append(g.readAsArrayBuffer(a[h])),f.append("\r\n");f.append("--");f.append(e);f.append("--");return f.getBlob()}else if(a[0].getAsBinary){f=
"";for(h=0;h<a.length;h++)f+="--"+e+"\r\n",f+="Content-Disposition: form-data; name="+c+"; filename="+a[h].name+"\r\n",f+="Content-Type: "+a[h].type+"\r\n\r\n",f+=a[h].getAsBinary()+"\r\n";f+="--"+e+"--";return f}else return null}a.ajaxupload=function(b,d){if(!b)return false;var e={url:document.location.href,name:"file"},d=d||{};a.extend(e,d);var d=e,f;d.progress?f=a(d.progress):(f=a("#_uploadprogress"),f.length||(f=a('<progress id="_uploadprogress" style="position: fixed;z-index: 10001;left: 45%;top: 0px;width: 100px;" min="0" max="100" value="0">0</progress>').appendTo(document.body)));
var g=new XMLHttpRequest;g.open("POST",d.url);g.onreadystatechange=function(){g.readyState==4&&(g.status>=200&&g.status<=200||g.status==304)&&g.responseText!=""&&typeof d.success!="undefined"&&d.success(g)};if(f&&f.length&&(g.onload=function(){f.val(100).html(100).hide()},"upload"in g))g.upload.onprogress=function(a){a.lengthComputable&&(a=a.loaded/a.total*100|0,f.val(a).html(a).show())};if(window.FormData){for(var h=new FormData,e=0;e<b.length;e++)h.append(d.name,b[e]);g.send(h)}else{var i="xxxxxxxxx";
g.setRequestHeader("Content-Type","multipart/form-data, boundary="+i);if(!window.BlobBuilder&&window.WebKitBlobBuilder)window.BlobBuilder=window.WebKitBlobBuilder;if(typeof FileReader!="undefined"&&typeof BlobBuilder!="undefined"){for(e=0;e<b.length;e++){var h=b[e],j=new FileReader;j.sourceFile=h;var m=0,i="xxxxxxxxx",n=new BlobBuilder;j.onload=function(a){var c=a.target.sourceFile,e=new BlobBuilder;e.append("--");e.append(i);e.append("\r\n");e.append("Content-Disposition: form-data; name=");e.append(d.name);
e.append("; filename=");e.append(c.name);e.append("\r\n");e.append("Content-Type: ");e.append(c.type);e.append("\r\n\r\n");e.append(a.target.result);e.append("\r\n");n.append(e.getBlob());m++;m==b.length&&(n.append("--"),n.append(i),n.append("--"),typeof d.beforeSend!="undefined"&&d.beforeSend(),g.send(n.getBlob()))};j.readAsArrayBuffer(h)}return true}if(n=c(b,d.name,i))return typeof d.beforeSend!="undefined"&&d.beforeSend(),g.sendAsBinary?g.sendAsBinary(n):g.send(n),true;else g.abort()}return false}})(jQuery);
(function(a){function c(b){var c={url:b.data("url")||document.location.href,global:false,quiet:true,beforeSend:function(){typeof a.fn.mask!="undefined"?b.mask(MessageBundle.get("ajax.loading")):b.html('<div style="text-align:center;">'+MessageBundle.get("ajax.loading")+"</div>")},complete:function(){typeof a.fn.unmask!="undefined"&&b.unmask()},success:function(c){typeof c!="string"&&(b.empty(),a.tmpl(a("#"+b.attr("tmpl")),c).appendTo(b),_observe(b))}};c.replacement=b.attr("url")?b.attr("id")+":"+
(b.attr("replacement")||"content"):b.attr("id");ajax(c)}a.fn.ajaxpanel=function(){a(this).each(function(){var b=a(this);b.bind("load",function(){c(b)});b.data("timeout")?setTimeout(function(){c(b)},parseInt(b.data("timeout"))):b.data("interval")?setInterval(function(){c(b)},parseInt(b.data("interval"))):b.hasClass("manual")||c(b)});return this}})(jQuery);Observation.ajaxpanel=function(a){$(".ajaxpanel",a).ajaxpanel();$(".ajaxpanel .load",a).click(function(){$(this).closest(".ajaxpanel").trigger("load")})};
