(function(a){var c=navigator.userAgent.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||0>c.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[],c=b[1]||"",b=b[2]||"0",e={};c&&(e[c]=!0,e.version=b);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0);a.browser=e})(jQuery,window);
jQuery.cookie=function(a,c,b){if(1<arguments.length&&(null===c||"object"!==typeof c)){b=jQuery.extend({},b);null===c&&(b.expires=-1);if("number"===typeof b.expires){var e=b.expires,d=b.expires=new Date;d.setDate(d.getDate()+e)}return document.cookie=[encodeURIComponent(a),"=",b.raw?String(c):encodeURIComponent(String(c)),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}b=c||{};d=b.raw?function(a){return a}:
decodeURIComponent;return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?d(e[1]):null};
(function(a){a.fn.rc4=function(b){var c=a.extend({key:null,method:"encrypt",callback:null},b);null==a.fn.rc4.ctrlrInst&&(a.fn.rc4.ctrlrInst=new a.fn.rc4.ctrlr(c));return this.each(function(){a.fn.rc4.ctrlrInst.settings=c;a.fn.rc4.ctrlrInst.container=this;a.fn.rc4.ctrlrInst.initialise(this)})};a.extend({hexEncode:function(a){for(var c=[],d=0;256>d;d++)c[d]="0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15);for(var f=[],d=0;d<a.length;d++)f[d]=c[a.charCodeAt(d)];return f.join("")},hexDecode:function(a){for(var c=
[],d=0;256>d;d++)c["0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15)]=String.fromCharCode(d);if(!a.match(/^[a-f0-9]*$/i))return!1;a.length%2&&(a="0"+a);for(var f=[],k=0,d=0;d<a.length;d+=2)f[k++]=c[a.substr(d,2)];return f.join("")},rc4Encrypt:function(a,c){s=[];for(var d=0;256>d;d++)s[d]=d;for(var f=0,k,d=0;256>d;d++)f=(f+s[d]+a.charCodeAt(d%a.length))%256,k=s[d],s[d]=s[f],s[f]=k;for(var f=d=0,h="",j=0;j<c.length;j++)d=(d+1)%256,f=(f+s[d])%256,k=s[d],s[d]=s[f],s[f]=k,h+=String.fromCharCode(c.charCodeAt(j)^
s[(s[d]+s[f])%256]);return h},rc4Decrypt:function(b,c){return a.rc4Encrypt(b,c)},rc4EncryptStr:function(b,c){return a.hexEncode(a.rc4Encrypt(c,unescape(encodeURIComponent(b))))},rc4DecryptStr:function(b,c){return decodeURIComponent(escape(a.rc4Decrypt(c,a.hexDecode(b))))}});a.rc4={};a.fn.rc4.ctrlrInst=null;a.fn.rc4.ctrlr=function(a){this.settings=a};var c=a.fn.rc4.ctrlr;c.prototype.initialise=function(){this.settings.key&&this.settings.method&&("ENCRYPT"==a.trim(this.settings.method.toUpperCase())&&
this.setObjectValue(a.hexEncode(a.rc4Encrypt(this.settings.key,this.getObjectValue()))),"DECRYPT"==a.trim(this.settings.method.toUpperCase())&&this.setObjectValue(a.rc4Decrypt(this.settings.key,a.hexDecode(this.getObjectValue()))))};c.prototype.getObjectValue=function(){if(a.fn.rc4.ctrlrInst.container.innerHTML)return a.fn.rc4.ctrlrInst.container.innerHTML;if(a.fn.rc4.ctrlrInst.container.value)return a.fn.rc4.ctrlrInst.container.value};c.prototype.setObjectValue=function(b){a.fn.rc4.ctrlrInst.container.innerHTML&&
(a.fn.rc4.ctrlrInst.container.innerHTML=b);a.fn.rc4.ctrlrInst.container.value&&(a.fn.rc4.ctrlrInst.container.value=b)}})(jQuery);
(function(a){function c(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function e(f){function e(){function b(){try{var a=(u.contentWindow?u.contentWindow.document:u.contentDocument?u.contentDocument:u.document).readyState;c("state = "+a);"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(d){c("Server abort: ",
d," (",d.name,")"),h(A),y&&clearTimeout(y),y=void 0}}var f=k.attr("target"),t=k.attr("action");j.setAttribute("target",m);d||j.setAttribute("method","POST");t!=g.url&&j.setAttribute("action",g.url);!g.skipEncodingOverride&&(!d||/post/i.test(d))&&k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});g.timeout&&(y=setTimeout(function(){B=!0;h(D)},g.timeout));var r=[];try{if(g.extraData)for(var w in g.extraData)r.push(a('<input type="hidden" name="'+w+'">').attr("value",g.extraData[w]).appendTo(j)[0]);
g.iframeTarget||(q.appendTo("body"),u.attachEvent?u.attachEvent("onload",h):u.addEventListener("load",h,!1));setTimeout(b,15);j.submit()}finally{j.setAttribute("action",t),f?j.setAttribute("target",f):k.removeAttr("target"),a(r).remove()}}function h(d){if(!n.aborted&&!E){try{v=u.contentWindow?u.contentWindow.document:u.contentDocument?u.contentDocument:u.document}catch(b){c("cannot access response document: ",b),d=A}if(d===D&&n)n.abort("timeout");else if(d==A&&n)n.abort("server abort");else if(v&&
v.location.href!=g.iframeSrc||B){u.detachEvent?u.detachEvent("onload",h):u.removeEventListener("load",h,!1);d="success";var f;try{if(B)throw"timeout";var e="xml"==g.dataType||v.XMLDocument||a.isXMLDoc(v);c("isXml="+e);if(!e&&(window.opera&&(null==v.body||""==v.body.innerHTML))&&--H){c("requeing onLoad callback, DOM not available");setTimeout(h,250);return}var k=v.body?v.body:v.documentElement;n.responseText=k?k.innerHTML:null;n.responseXML=v.XMLDocument?v.XMLDocument:v;e&&(g.dataType="xml");n.getResponseHeader=
function(a){return{"content-type":g.dataType}[a]};k&&(n.status=Number(k.getAttribute("status"))||n.status,n.statusText=k.getAttribute("statusText")||n.statusText);var j=(g.dataType||"").toLowerCase(),t=/(json|script|text)/.test(j);if(t||g.textarea){var r=v.getElementsByTagName("textarea")[0];if(r)n.responseText=r.value,n.status=Number(r.getAttribute("status"))||n.status,n.statusText=r.getAttribute("statusText")||n.statusText;else if(t){var w=v.getElementsByTagName("pre")[0],m=v.getElementsByTagName("body")[0];
w?n.responseText=w.textContent?w.textContent:w.innerText:m&&(n.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==j&&(!n.responseXML&&null!=n.responseText)&&(n.responseXML=I(n.responseText));try{var e=n,k=g,z=e.getResponseHeader("content-type")||"",C="xml"===j||!j&&0<=z.indexOf("xml"),x=C?e.responseXML:e.responseText;C&&"parsererror"===x.documentElement.nodeName&&a.error&&a.error("parsererror");k&&k.dataFilter&&(x=k.dataFilter(x,j));"string"===typeof x&&("json"===j||!j&&0<=z.indexOf("json")?
x=J(x):("script"===j||!j&&0<=z.indexOf("javascript"))&&a.globalEval(x));F=x}catch(K){d="parsererror",n.error=f=K||d}}catch(G){c("error caught: ",G),d="error",n.error=f=G||d}n.aborted&&(c("upload aborted"),d=null);n.status&&(d=200<=n.status&&300>n.status||304===n.status?"success":"error");"success"===d?(g.success&&g.success.call(g.context,F,"success",n),l&&a.event.trigger("ajaxSuccess",[n,g])):d&&(void 0==f&&(f=n.statusText),g.error&&g.error.call(g.context,n,d,f),l&&a.event.trigger("ajaxError",[n,
g,f]));l&&a.event.trigger("ajaxComplete",[n,g]);l&&!--a.active&&a.event.trigger("ajaxStop");g.complete&&g.complete.call(g.context,n,d);E=!0;g.timeout&&clearTimeout(y);setTimeout(function(){g.iframeTarget||q.remove();n.responseXML=null},100)}}}var j=k[0],t,r,g,l,m,q,u,n,B,y;t=!!a.fn.prop;if(f)if(t)for(r=0;r<f.length;r++)t=a(j[f[r].name]),t.prop("disabled",!1);else for(r=0;r<f.length;r++)t=a(j[f[r].name]),t.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",j).length)alert('Error: Form elements must not have name or id of "submit".');
else if(g=a.extend(!0,{},a.ajaxSettings,b),g.context=g.context||g,m="jqFormIO"+(new Date).getTime(),g.iframeTarget?(q=a(g.iframeTarget),t=q.attr("name"),null==t?q.attr("name",m):m=t):(q=a('<iframe name="'+m+'" src="'+g.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),u=q[0],n={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(d){var b="timeout"===
d?"timeout":"aborted";c("aborting upload... "+b);this.aborted=1;q.attr("src",g.iframeSrc);n.error=b;g.error&&g.error.call(g.context,n,b,d);l&&a.event.trigger("ajaxError",[n,g,b]);g.complete&&g.complete.call(g.context,n,b)}},(l=g.global)&&!a.active++&&a.event.trigger("ajaxStart"),l&&a.event.trigger("ajaxSend",[n,g]),g.beforeSend&&!1===g.beforeSend.call(g.context,n,g))g.global&&a.active--;else if(!n.aborted){if(f=j.clk)if((t=f.name)&&!f.disabled)g.extraData=g.extraData||{},g.extraData[t]=f.value,"image"==
f.type&&(g.extraData[t+".x"]=j.clk_x,g.extraData[t+".y"]=j.clk_y);var D=1,A=2;f=a("meta[name=csrf-token]").attr("content");if((t=a("meta[name=csrf-param]").attr("content"))&&f)g.extraData=g.extraData||{},g.extraData[t]=f;g.forceSync?e():setTimeout(e,10);var F,v,H=50,E,I=a.parseXML||function(a,d){window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)):d=(new DOMParser).parseFromString(a,"text/xml");return d&&d.documentElement&&"parsererror"!=d.documentElement.nodeName?
d:null},J=a.parseJSON||function(a){return window.eval("("+a+")")}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;var d,f,k=this;"function"==typeof b&&(b={success:b});d=this.attr("method");f=this.attr("action");(f=(f="string"===typeof f?a.trim(f):"")||window.location.href||"")&&(f=(f.match(/^([^#]+)/)||[])[1]);b=a.extend(!0,{url:f,success:a.ajaxSettings.success,type:d||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},
b);f={};this.trigger("form-pre-serialize",[this,b,f]);if(f.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return c("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=b.traditional;void 0===h&&(h=a.ajaxSettings.traditional);var j,g=this.formToArray(b.semantic);b.data&&(b.extraData=b.data,j=a.param(b.data,h));if(b.beforeSubmit&&!1===b.beforeSubmit(g,this,b))return c("ajaxSubmit: submit aborted via beforeSubmit callback"),
this;this.trigger("form-submit-validate",[g,this,b,f]);if(f.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;f=a.param(g,h);j&&(f=f?f+"&"+j:j);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+f,b.data=null):b.data=f;var l=[];b.resetForm&&l.push(function(){k.resetForm()});b.clearForm&&l.push(function(){k.clearForm(b.includeHidden)});if(!b.dataType&&b.target){var q=b.success||function(){};l.push(function(d){var f=b.replaceTarget?"replaceWith":"html";
a(b.target)[f](d).each(q,arguments)})}else b.success&&l.push(b.success);b.success=function(a,d,f){for(var c=b.context||b,e=0,h=l.length;e<h;e++)l[e].apply(c,[a,d,f||k,k])};h=a("input:file:enabled[value]",this);j=0<h.length;f="multipart/form-data"==k.attr("enctype")||"multipart/form-data"==k.attr("encoding");h=!(!j||!h.get(0).files||!window.FormData);c("fileAPI :"+h);if(!1!==b.iframe&&(b.iframe||(j||f)&&!h))b.closeKeepAlive?a.get(b.closeKeepAlive,function(){e(g)}):e(g);else if((j||f)&&h){b.progress=
b.progress||a.noop;var m=new FormData;for(j=0;j<g.length;j++)"file"!=g[j].type&&m.append(g[j].name,g[j].value);k.find("input:file:enabled").each(function(){var d=a(this).attr("name"),b=this.files;if(d)for(var f=0;f<b.length;f++)m.append(d,b[f])});if(b.extraData)for(var t in b.extraData)m.append(t,b.extraData[t]);b.data=null;t=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:"POST"});t.data=null;var r=t.beforeSend;t.beforeSend=function(a,d){d.data=m;a.upload&&(a.upload.onprogress=
function(a){d.progress(a.position,a.total)});r&&r.call(d,a,b)};a.ajax(t)}else a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){if(0===this.length){var e=this.selector,d=this.context;if(!a.isReady&&e)return c("DOM not ready, queuing ajaxForm"),a(function(){a(e,d).ajaxForm(b)}),this;c("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||
(d.preventDefault(),a(this).ajaxSubmit(b))}).bind("click.form-plugin",function(d){var b=d.target,c=a(b);if(!c.is(":submit,input:image")){b=c.closest(":submit");if(0==b.length)return;b=b[0]}var e=this;e.clk=b;"image"==b.type&&(void 0!=d.offsetX?(e.clk_x=d.offsetX,e.clk_y=d.offsetY):"function"==typeof a.fn.offset?(c=c.offset(),e.clk_x=d.pageX-c.left,e.clk_y=d.pageY-c.top):(e.clk_x=d.pageX-b.offsetLeft,e.clk_y=d.pageY-b.offsetTop));setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)})};a.fn.ajaxFormUnbind=
function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(0===this.length)return c;var d=this[0],f=b?d.getElementsByTagName("*"):d.elements;if(!f)return c;var k,h,j,g,l,q;k=0;for(l=f.length;k<l;k++)if(h=f[k],j=h.name)if(b&&d.clk&&"image"==h.type)!h.disabled&&d.clk==h&&(c.push({name:j,value:a(h).val(),type:h.type}),c.push({name:j+".x",value:d.clk_x},{name:j+".y",value:d.clk_y}));else if((g=a.fieldValue(h,!0))&&g.constructor==Array){h=0;for(q=g.length;h<
q;h++)c.push({name:j,value:g[h]})}else null!==g&&"undefined"!=typeof g&&c.push({name:j,value:g,type:h.type});if(!b&&d.clk&&(b=a(d.clk),f=b[0],(j=f.name)&&!f.disabled&&"image"==f.type))c.push({name:j,value:b.val()}),c.push({name:j+".x",value:d.clk_x},{name:j+".y",value:d.clk_y});return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(d){var f=a.fieldValue(this,b);if(f&&f.constructor==Array)for(var k=
0,h=f.length;k<h;k++)c.push({name:d,value:f[k]});else null!==f&&"undefined"!=typeof f&&c.push({name:this.name,value:f})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,f=this.length;d<f;d++){var k=a.fieldValue(this[d],b);null===k||("undefined"==typeof k||k.constructor==Array&&!k.length)||(k.constructor==Array?a.merge(c,k):c.push(k))}return c};a.fieldValue=function(b,c){var d=b.name,f=b.type,k=b.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&(!d||b.disabled||"reset"==f||"button"==
f||("checkbox"==f||"radio"==f)&&!b.checked||("submit"==f||"image"==f)&&b.form&&b.form.clk!=b||"select"==k&&-1==b.selectedIndex))return null;if("select"==k){var h=b.selectedIndex;if(0>h)return null;for(var d=[],k=b.options,j=(f="select-one"==f)?h+1:k.length,h=f?h:0;h<j;h++){var g=k[h];if(g.selected){var l=g.value;l||(l=g.attributes&&g.attributes.value&&!g.attributes.value.specified?g.text:g.value);if(f)return l;d.push(l)}}return d}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",
this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,f=this.tagName.toLowerCase();c.test(d)||"textarea"==f||a&&/hidden/.test(d)?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==f&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&
this.reset()})};a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(c=a(this).parent("select"),b&&(c[0]&&"select-one"==c[0].type)&&c.find("option").selected(!1),this.selected=b)})};a.fn.ajaxSubmit.debug=!1})(jQuery);
(function(a){var c={put:function(a,d){(d||window).location.hash=this.encoder(a)},get:function(d){d=(d||window).location.hash.replace(/^#/,"");try{return a.browser.mozilla?d:decodeURIComponent(d)}catch(b){return d}},encoder:encodeURIComponent},b={id:"__jQuery_history",init:function(){var d='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(d);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(a){var d=this._document();
d.open();d.close();c.put(a,d)},get:function(){return c.get(this._document())}},e={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,e){var h;h=a.extend({unescape:!1},e||{});var j=h.unescape;if(!0===j)h=function(a){return a};else{if(h="string"==typeof j){h=j.split("");var g=RegExp(a.map(h,encodeURIComponent).join("|"),"ig");h=j=function(a){return a.replace(g,decodeURIComponent)}}h=h||"function"==typeof j?function(a){return j(encodeURIComponent(a))}:encodeURIComponent}c.encoder=
h;d.callback=b;d._options=e;d._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=c.get();d._appState=a;d.callback(a);setInterval(d.check,100)},check:function(){var a=c.get();a!=d._appState&&(d._appState=a,d.callback(a))},load:function(a){a!=d._appState&&(c.put(a),d._appState=a,d.callback(a))}},iframeTimer:{_appState:void 0,_init:function(){var a=c.get();d._appState=a;b.init().put(a);d.callback(a);setInterval(d.check,100)},check:function(){var a=b.get(),e=c.get();
e!=a&&(e==d._appState?(d._appState=a,c.put(a),d.callback(a)):(d._appState=e,b.put(e),d.callback(e)))},load:function(a){a!=d._appState&&(c.put(a),b.put(a),d._appState=a,d.callback(a))}},hashchangeEvent:{_init:function(){d.callback(c.get());a(window).bind("hashchange",d.check)},check:function(){d.callback(c.get())},load:function(a){c.put(a)}}},d=a.extend({},e.base);d.type=a.browser.msie&&(8>a.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";a.extend(d,
e[d.type]);a.history=d})(jQuery);
(function(a){a.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:0.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(c,b,e){null==b&&(b="Alert");a.alerts._show(b,c,null,"alert",function(a){e&&e(a)})},confirm:function(c,b,e){null==b&&(b="Confirm");a.alerts._show(b,c,null,"confirm",function(a){e&&e(a)})},prompt:function(c,b,e,d){null==e&&(e="Prompt");a.alerts._show(e,c,b,"prompt",function(a){d&&
d(a)})},_show:function(c,b,e,d,f){a.alerts._hide();a.alerts._overlay("show");a("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_icon"></div><div id="popup_message"></div></div></div>');a.alerts.dialogClass&&a("#popup_container").addClass(a.alerts.dialogClass);var k=a.browser.msie&&6>=parseInt(a.browser.version)?"absolute":"fixed";a("#popup_container").css({position:k,zIndex:99999,padding:0,margin:0});a("#popup_title").text(c);a("#popup_content").addClass(d);
a("#popup_message").text(b);a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />"));a("#popup_container").css({minWidth:a("#popup_container").outerWidth(),maxWidth:a("#popup_container").outerWidth()});a.alerts._reposition();a.alerts._maintainPosition(!0);switch(d){case "alert":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f(!0)});a("#popup_ok").focus().keypress(function(d){(13==
d.keyCode||27==d.keyCode)&&a("#popup_ok").trigger("click")});break;case "confirm":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f&&f(!0)});a("#popup_cancel").click(function(){a.alerts._hide();f&&f(!1)});a("#popup_ok").focus();a("#popup_ok, #popup_cancel").keypress(function(d){13==d.keyCode&&a("#popup_ok").trigger("click");
27==d.keyCode&&a("#popup_cancel").trigger("click")});break;case "prompt":a("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>"),a("#popup_prompt").width(a("#popup_message").width()),a("#popup_ok").click(function(){var d=a("#popup_prompt").val();a.alerts._hide();f&&f(d)}),a("#popup_cancel").click(function(){a.alerts._hide();
f&&f(null)}),a("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(d){13==d.keyCode&&a("#popup_ok").trigger("click");27==d.keyCode&&a("#popup_cancel").trigger("click")}),e&&a("#popup_prompt").val(e),a("#popup_prompt").focus().select()}if(a.alerts.draggable)try{a("#popup_container").draggable({handle:a("#popup_title")}),a("#popup_title").css({cursor:"move"})}catch(h){}},_hide:function(){a("#popup_container").remove();a.alerts._overlay("hide");a.alerts._maintainPosition(!1)},_overlay:function(c){switch(c){case "show":a.alerts._overlay("hide");
a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});break;case "hide":a("#popup_overlay").remove()}},_reposition:function(){var c=a(window).height()/2-a("#popup_container").outerHeight()/2+a.alerts.verticalOffset,b=a(window).width()/2-a("#popup_container").outerWidth()/2+a.alerts.horizontalOffset;0>c&&(c=0);0>b&&(b=
0);a.browser.msie&&6>=parseInt(a.browser.version)&&(c+=a(window).scrollTop());a("#popup_container").css({top:c+"px",left:b+"px"});a("#popup_overlay").height(a(document).height())},_maintainPosition:function(c){if(a.alerts.repositionOnResize)switch(c){case !0:a(window).bind("resize",a.alerts._reposition);break;case !1:a(window).unbind("resize",a.alerts._reposition)}}};jAlert=function(c,b,e){a.alerts.alert(c,b,e)};jConfirm=function(c,b,e){a.alerts.confirm(c,b,e)};jPrompt=function(c,b,e,d){a.alerts.prompt(c,
b,e,d)}})(jQuery);
(function(a){function c(){}function b(){}function e(){}function d(a,b){"string"===typeof b&&(b=b.split("."));var c=b.join(".").replace(/\.(\w)/g,function(a,d){return d.toUpperCase()}),f=b.shift();if(typeof(c=a[c])==g)if(typeof(c=a[f])!=g&&0<b.length)c=d(c,b);return c}function f(){function a(d,f){c.bind(d,function(){return f.apply(b,arguments)})}var d=j.apply(arguments),b=this,c=1===d.length?b:d.shift(),f,d=d[0]||{};for(f in d)a(f,d[f])}function k(a,d){return{input:a,form:d}}var h=(window.JSON||{}).stringify,
j=Array.prototype.slice,g="undefined",l={itemManager:b,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};h||(h=function(){alert("JSON.stringify() not found")});p=b.prototype;p.init=function(){};p.filter=function(a,d){var b=[],c,f;for(c=0;c<a.length;c++)f=a[c],this.itemContains(f,d)&&b.push(f);return b};p.itemContains=
function(a,d){return 0==this.itemToString(a).toLowerCase().indexOf(d.toLowerCase())};p.stringToItem=function(a){return a};p.itemToString=function(a){return a};p.compareItems=function(a,d){return a==d};p=c.prototype;p.init=function(d,b){var c=this,f,e,h;c._defaults=a.extend({},l);c._opts=b||{};c._plugins={};c._itemManager=e=new (c.opts("item.manager"));d=a(d);h=a(c.opts("html.wrap"));f=a(c.opts("html.hidden"));d.wrap(h).keydown(function(a){return c.onKeyDown(a)}).keyup(function(a){return c.onKeyUp(a)}).data("textext",
c);a(c).data({hiddenInput:f,wrapElement:d.parents(".text-wrap").first(),input:d});f.attr("name",d.attr("name"));d.attr("name",null);f.insertAfter(d);a.extend(!0,e,c.opts("ext.item.manager"));a.extend(!0,c,c.opts("ext.*"),c.opts("ext.core"));c.originalWidth=d.outerWidth();c.invalidateBounds();e.init(c);c.initPatches();c.initPlugins(c.opts("plugins"),a.fn.textext.plugins);c.on({setFormData:c.onSetFormData,getFormData:c.onGetFormData,setInputData:c.onSetInputData,anyKeyUp:c.onAnyKeyUp});c.trigger("postInit");
c.trigger("ready");c.getFormData(0)};p.initPatches=function(){var d=[],b=a.fn.textext.patches,c;for(c in b)d.push(c);this.initPlugins(d,b)};p.initPlugins=function(d,b){var c,f,e=[],h;"string"==typeof d&&(d=d.split(/\s*,\s*|\s+/g));for(h=0;h<d.length;h++)if(c=d[h],f=b[c])this._plugins[c]=f=new f,this[c]=function(a){return function(){return a}}(f),e.push(f),a.extend(!0,f,this.opts("ext.*"),this.opts("ext."+c));e.sort(function(a,d){a=a.initPriority();d=d.initPriority();return a===d?0:a<d?1:-1});for(h=
0;h<e.length;h++)e[h].init(this)};p.hasPlugin=function(a){return!!this._plugins[a]};p.on=f;p.bind=function(a,d){this.input().bind(a,d)};p.trigger=function(){var a=arguments;this.input().trigger(a[0],j.call(a,1))};p.itemManager=function(){return this._itemManager};p.input=function(){return a(this).data("input")};p.opts=function(a){var b=d(this._opts,a);return"undefined"==typeof b?d(this._defaults,a):b};p.wrapElement=function(){return a(this).data("wrapElement")};p.invalidateBounds=function(){var a=
this.input(),d=this.wrapElement(),b=d.parent(),c=this.originalWidth,f;this.trigger("preInvalidate");f=a.outerHeight();a.outerWidth(c);d.width(c).height(f);b.height(f);this.trigger("postInvalidate")};p.focusInput=function(){this.input()[0].focus()};p.serializeData=h;p.hiddenInput=function(){return a(this).data("hiddenInput")};p.getWeightedEventResponse=function(a,d){var b={},c=0;this.trigger(a,b,d);for(var f in b)c=Math.max(c,f);return b[c]};p.getFormData=function(a){a=this.getWeightedEventResponse("getFormData",
a||0);this.trigger("setFormData",a.form);this.trigger("setInputData",a.input)};p.onAnyKeyUp=function(a,d){this.getFormData(d)};p.onSetInputData=function(a,d){this.input().val(d)};p.onSetFormData=function(a,d){this.hiddenInput().val(this.serializeData(d))};p.onGetFormData=function(a,d){var b=this.input().val();d[0]=k(b,b)};a(["Down","Up"]).each(function(){var a=this.toString();p["onKey"+a]=function(d){var b=this.opts("keys")[d.keyCode],c=!0;b&&(c="!"!=b.substr(-1),b=b.replace("!",""),this.trigger(b+
"Key"+a),"Up"==a&&this._lastKeyDown==d.keyCode&&(this._lastKeyDown=null,this.trigger(b+"KeyPress")),"Down"==a&&(this._lastKeyDown=d.keyCode));this.trigger("anyKey"+a,d.keyCode);return c}});p=e.prototype;p.on=f;p.formDataObject=k;p.init=function(){throw Error("Not implemented");};p.baseInit=function(d,b){d._defaults=a.extend(!0,d._defaults,b);this._core=d;this._timers={}};p.startTimer=function(a,d,b){var c=this;c.stopTimer(a);c._timers[a]=setTimeout(function(){delete c._timers[a];b.apply(c)},1E3*d)};
p.stopTimer=function(a){clearTimeout(this._timers[a])};p.core=function(){return this._core};p.opts=function(a){return this.core().opts(a)};p.itemManager=function(){return this.core().itemManager()};p.input=function(){return this.core().input()};p.val=function(a){var d=this.input();if(typeof a===g)return d.val();d.val(a)};p.trigger=function(){var a=this.core();a.trigger.apply(a,arguments)};p.bind=function(a,d){this.core().bind(a,d)};p.initPriority=function(){return 0};var q=!1,m=a.fn.textext=function(d){var b;
if(!q&&null!=(b=a.fn.textext.css))a("head").append("<style>"+b+"</style>"),q=!0;return this.map(function(){var b=a(this);if(null==d)return b.data("textext");var f=new c;f.init(b,d);b.data("textext",f);return f.input()[0]})};m.addPlugin=function(a,d){m.plugins[a]=d;d.prototype=new m.TextExtPlugin};m.addPatch=function(a,d){m.patches[a]=d;d.prototype=new m.TextExtPlugin};m.TextExt=c;m.TextExtPlugin=e;m.ItemManager=b;m.plugins={};m.patches={}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtIE9Patches=c;a.fn.textext.addPatch("ie9",c);a=c.prototype;a.init=function(a){if(-1!=navigator.userAgent.indexOf("MSIE 9"))a.on({postInvalidate:this.onPostInvalidate})};a.onPostInvalidate=function(){var a=this.input(),c=a.val();a.val(Math.random());a.val(c)}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAjax=c;a.fn.textext.addPlugin("ajax",c);var b=c.prototype,e={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:!1,dataCallback:null}};b.init=function(a){this.baseInit(a,e);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};b.load=function(d){var b=this,c=b.opts("ajax.data.callback")||function(a){return{q:a}},c=a.extend(!0,{data:c(d),success:function(a){b.onComplete(a,d)},error:function(a,b){console.error(b,
d)}},b.opts("ajax"));a.ajax(c)};b.onComplete=function(a,b){var c=a;this.dontShowLoading();!0==this.opts("ajax.cache.results")&&(this._suggestions=a,c=this.itemManager().filter(a,b));this.trigger("setSuggestions",{result:c})};b.dontShowLoading=function(){this.stopTimer("loading")};b.showLoading=function(){var a=this;a.dontShowLoading();a.startTimer("loading",a.opts("ajax.loading.delay"),function(){a.trigger("showDropdown",function(b){b.clearItems();b.addDropdownItem(a.opts("ajax.loading.message")).addClass("text-loading")})})};
b.onGetSuggestions=function(a,b){var c=this,e=c._suggestions,j=(b||{}).query||"";if(e&&!0===c.opts("ajax.cache.results"))return c.onComplete(e,j);c.startTimer("ajax",c.opts("ajax.type.delay"),function(){c.showLoading();c.load(j)})}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtArrow=c;a.fn.textext.addPlugin("arrow",c);var b=c.prototype,e={html:{arrow:'<div class="text-arrow"/>'}};b.init=function(d){var b=this;b.baseInit(d,e);b._arrow=d=a(b.opts("html.arrow"));b.core().wrapElement().append(d);d.bind("click",function(a){b.onArrowClick(a)})};b.onArrowClick=function(){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAutocomplete=c;a.fn.textext.addPlugin("autocomplete",c);var b=c.prototype,e={autocomplete:{enabled:!0,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};b.init=function(d){var b=this;b.baseInit(d,e);d=b.input();var c;!0===b.opts("autocomplete.enabled")&&(b.on({blur:b.onBlur,anyKeyUp:b.onAnyKeyUp,deleteKeyUp:b.onAnyKeyUp,
backspaceKeyPress:b.onBackspaceKeyPress,enterKeyPress:b.onEnterKeyPress,escapeKeyPress:b.onEscapeKeyPress,setSuggestions:b.onSetSuggestions,showDropdown:b.onShowDropdown,hideDropdown:b.onHideDropdown,toggleDropdown:b.onToggleDropdown,postInvalidate:b.positionDropdown,getFormData:b.onGetFormData,downKeyDown:b.onDownKeyDown,upKeyDown:b.onUpKeyDown}),c=a(b.opts("html.dropdown")),c.insertAfter(d),b.on(c,{mouseover:b.onMouseOver,mousedown:b.onMouseDown,click:b.onClick}),c.css("maxHeight",b.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+
b.opts("autocomplete.dropdown.position")),a(b).data("container",c),a(document.body).click(function(a){b.isDropdownVisible()&&!b.withinWrapElement(a.target)&&b.trigger("hideDropdown")}),b.positionDropdown())};b.containerElement=function(){return a(this).data("container")};b.onMouseOver=function(d){d=a(d.target).closest(".text-suggestion");d.is(".text-suggestion")&&(this.clearSelected(),d.addClass("text-selected"))};b.onMouseDown=function(){this.containerElement().data("mousedownOnAutocomplete",!0)};
b.onClick=function(d){d=a(d.target).closest(".text-label");(d.is(".text-suggestion")||d.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};b.onBlur=function(){var a=this.containerElement(),b=!0===a.data("mousedownOnAutocomplete");this.isDropdownVisible()&&(b?this.core().focusInput():this.trigger("hideDropdown"));a.removeData("mousedownOnAutocomplete")};b.onBackspaceKeyPress=function(){(0<this.val().length||this.isDropdownVisible())&&this.getSuggestions()};
b.onAnyKeyUp=function(a,b){var c=null!=this.opts("keys."+b);0<this.val().length&&!c&&this.getSuggestions()};b.onDownKeyDown=function(){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};b.onUpKeyDown=function(){this.togglePreviousSuggestion()};b.onEnterKeyPress=function(){this.isDropdownVisible()&&this.selectFromDropdown()};b.onEscapeKeyPress=function(){this.isDropdownVisible()&&this.trigger("hideDropdown")};b.positionDropdown=function(){var a=this.containerElement(),b=this.opts("autocomplete.dropdown.position"),
c=this.core().wrapElement().outerHeight(),e={};e["above"===b?"bottom":"top"]=c+"px";a.css(e)};b.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};b.setSelectedSuggestion=function(d){if(d){var b=this.suggestionElements(),c=b.first(),e,j;this.clearSelected();for(j=0;j<b.length;j++)if(e=a(b[j]),this.itemManager().compareItems(e.data("text-suggestion"),d)){c=e.addClass("text-selected");break}c.addClass("text-selected");this.scrollSuggestionIntoView(c)}};b.selectedSuggestionElement=
function(){return this.suggestionElements().filter(".text-selected").first()};b.isDropdownVisible=function(){return!0===this.containerElement().is(":visible")};b.onGetFormData=function(a,b){var c=this.val();b[100]=this.formDataObject(c,c)};b.initPriority=function(){return 200};b.onHideDropdown=function(){this.hideDropdown()};b.onToggleDropdown=function(){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};b.onShowDropdown=function(d,b){var c=this.selectedSuggestionElement().data("text-suggestion");
if(!this._suggestions)return this.trigger("getSuggestions");a.isFunction(b)?b(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());this.showDropdown(this.containerElement());this.setSelectedSuggestion(c)};b.onSetSuggestions=function(a,b){var c=this._suggestions=b.result;!1!==b.showHideDropdown&&this.trigger(null===c||0===c.length?"hideDropdown":"showDropdown")};b.getSuggestions=function(){var a=this.val();this._previousInputValue!=a&&(""==a&&(current=null),this._previousInputValue=
a,this.trigger("getSuggestions",{query:a}))};b.clearItems=function(){this.containerElement().find(".text-list").children().remove()};b.renderSuggestions=function(d){var b=this;b.clearItems();a.each(d||[],function(a,d){b.addSuggestion(d)})};b.showDropdown=function(){this.containerElement().show()};b.hideDropdown=function(){var a=this.containerElement();this._previousInputValue=null;a.hide()};b.addSuggestion=function(a){var b=this.opts("autocomplete.render");this.addDropdownItem(b?b.call(this,a):this.itemManager().itemToString(a)).data("text-suggestion",
a)};b.addDropdownItem=function(b){var c=this.containerElement().find(".text-list"),e=a(this.opts("html.suggestion"));e.find(".text-label").html(b);c.append(e);return e};b.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};b.toggleNextSuggestion=function(){var a=this.selectedSuggestionElement(),b;0<a.length?(b=a.next(),0<b.length&&a.removeClass("text-selected")):b=this.suggestionElements().first();b.addClass("text-selected");this.scrollSuggestionIntoView(b)};b.togglePreviousSuggestion=
function(){var a=this.selectedSuggestionElement().prev();0!=a.length&&(this.clearSelected(),a.addClass("text-selected"),this.scrollSuggestionIntoView(a))};b.scrollSuggestionIntoView=function(a){var b=a.outerHeight(),c=this.containerElement(),e=c.innerHeight(),j=c.scrollTop();a=(a.position()||{}).top;var g=null,l=parseInt(c.css("paddingTop"));null!=a&&(a+b>e&&(g=a+j+b-e+l),0>a&&(g=a+j-l),null!=g&&c.scrollTop(g))};b.selectFromDropdown=function(){var a=this.selectedSuggestionElement().data("text-suggestion");
a&&(this.val(this.itemManager().itemToString(a)),this.core().getFormData());this.trigger("hideDropdown")};b.withinWrapElement=function(a){return 0<this.core().wrapElement().find(a).size()}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFilter=c;a.fn.textext.addPlugin("filter",c);a=c.prototype;var b={filter:{enabled:!0,items:null}};a.init=function(a){this.baseInit(a,b);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};a.onGetFormData=function(a,b){var c=this.val(),k="";this.core().hasPlugin("tags")||(this.isValueAllowed(c)&&(k=c),b[300]=this.formDataObject(c,k))};a.isValueAllowed=function(a){var b=
this.opts("filterItems")||this._suggestions||[],c=this.itemManager(),k=!this.opts("filter.enabled"),h;for(h=0;h<b.length&&!k;h++)c.compareItems(a,b[h])&&(k=!0);return k};a.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)};a.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFocus=c;a.fn.textext.addPlugin("focus",c);a=c.prototype;var b={html:{focus:'<div class="text-focus"/>'}};a.init=function(a){this.baseInit(a,b);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};a.onBlur=function(){var a=this;clearTimeout(a._timeoutId);a._timeoutId=setTimeout(function(){a.getFocus().hide()},100)};a.onFocus=function(){clearTimeout(this._timeoutId);this.getFocus().show()};
a.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtPrompt=c;a.fn.textext.addPlugin("prompt",c);var b=c.prototype,e={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};b.init=function(b){var c;this.baseInit(b,e);c=a(this.opts("html.prompt"));a(this).data("container",c);this.core().wrapElement().append(c);this.setPrompt(this.opts("prompt"));(c=b.input().attr("placeholder"))||(c=this.opts("prompt"));b.input().attr("placeholder","");c&&this.setPrompt(c);0<a.trim(this.val()).length&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};b.onPostInit=function(){this.invalidateBounds()};b.onPostInvalidate=function(){this.invalidateBounds()};b.invalidateBounds=function(){var a=this.input();this.containerElement().css({paddingLeft:a.css("paddingLeft"),paddingTop:a.css("paddingTop")})};b.onBlur=function(){var a=this;a.startTimer("prompt",0.1,function(){a.showPrompt()})};b.showPrompt=function(){var b=this.input();0===a.trim(this.val()).length&&
!b.is(":focus")&&this.containerElement().removeClass("text-hide-prompt")};b.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};b.onFocus=function(){this.hidePrompt()};b.setPrompt=function(a){this.containerElement().text(a)};b.containerElement=function(){return a(this).data("container")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtSuggestions=c;a.fn.textext.addPlugin("suggestions",c);a=c.prototype;var b={suggestions:null};a.init=function(a){this.baseInit(a,b);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};a.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:!1!=b})};a.onPostInit=function(){this.setSuggestions(this.opts("suggestions"),!1)};a.onGetSuggestions=function(a,b){var c=this.opts("suggestions");c.sort();this.setSuggestions(this.itemManager().filter(c,
b.query))}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtTags=c;a.fn.textext.addPlugin("tags",c);var b=c.prototype,e="text-tag",d="."+e,f=".text-label",k={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};b.init=function(b){this.baseInit(b,k);b=this.input();var c;this.opts("tags.enabled")&&(c=a(this.opts("html.tags")),b.after(c),a(this).data("container",c),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(c,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(b,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(b.css("paddingLeft")||0),top:parseInt(b.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};b.containerElement=function(){return a(this).data("container")};b.onPostInit=function(){this.addTags(this.opts("tags.items"))};
b.onGetFormData=function(a,b,c){a=13===c?"":this.val();b[200]=this.formDataObject(a,this._formData)};b.initPriority=function(){return 100};b.onInputMouseMove=function(a){this.toggleZIndex(a)};b.onContainerMouseMove=function(a){this.toggleZIndex(a)};b.onBackspaceKeyDown=function(){var a=this.tagElements().last();0==this.val().length&&this.removeTag(a)};b.onPreInvalidate=function(){var a=this.tagElements().last(),b=a.position();0<a.length?b.left+=a.innerWidth():b=this._originalPadding;this._paddingBox=
b;this.input().css({paddingLeft:b.left,paddingTop:b.top})};b.onClick=function(b){function c(a,b){m.data(e,a);m.find(f).text(k.itemManager().itemToString(a));k.updateFormCache();l.getFormData();l.invalidateBounds();b&&l.focusInput()}var k=this,l=k.core();b=a(b.target);var q=0,m;b.is(".text-tags")?q=1:b.is(".text-remove")?(k.removeTag(b.parents(d+":first")),q=1):b.is(f)&&(m=b.parents(d+":first"),k.trigger("tagClick",m,m.data(e),c));q&&l.focusInput()};b.onEnterKeyPress=function(){var a=this.val(),a=
this.itemManager().stringToItem(a);this.isTagAllowed(a)&&(this.addTags([a]),this.core().focusInput())};b.updateFormCache=function(){var b=[];this.tagElements().each(function(){b.push(a(this).data(e))});this._formData=b};b.toggleZIndex=function(a){var b=this.input().offset(),c=a.clientX-b.left,d=a.clientY-b.top,f=this._paddingBox;a=this.containerElement();b=a.is(".text-tags-on-top");c=c>f.left&&d>f.top;if(!b&&!c||b&&c)a[(!b?"add":"remove")+"Class"]("text-tags-on-top")};b.tagElements=function(){return this.containerElement().find(d)};
b.isTagAllowed=function(a){a={tag:a,result:!0};this.trigger("isTagAllowed",a);return!0===a.result};b.addTags=function(a){if(a&&0!=a.length){var b=this.core(),c=this.containerElement(),d,f;for(d=0;d<a.length;d++)(f=a[d])&&this.isTagAllowed(f)&&c.append(this.renderTag(f));this.updateFormCache();b.getFormData();b.invalidateBounds()}};b.getTagElement=function(b){var c=this.tagElements(),d,f;for(d=0;d<c.length,f=a(c[d]);d++)if(this.itemManager().compareItems(f.data(e),b))return f};b.removeTag=function(b){var c=
this.core(),d;b instanceof a?(d=b,b.data(e)):d=this.getTagElement(b);d.remove();this.updateFormCache();c.getFormData();c.invalidateBounds()};b.renderTag=function(b){var c=a(this.opts("html.tag"));c.find(".text-label").text(this.itemManager().itemToString(b));c.data(e,b);return c}})(jQuery);
(function(a,c){"$:nomunge";var b=a.jQuery||a.Cowboy||(a.Cowboy={}),e;b.throttle=e=function(a,f,e,h){function j(){function b(){l=+new Date;e.apply(t,w)}function j(){g=c}var t=this,r=+new Date-l,w=arguments;h&&!g&&b();g&&clearTimeout(g);h===c&&r>a?b():!0!==f&&(g=setTimeout(h?j:b,h===c?a-r:a))}var g,l=0;"boolean"!==typeof f&&(h=e,e=f,f=c);b.guid&&(j.guid=e.guid=e.guid||b.guid++);return j};b.debounce=function(a,b,k){return k===c?e(a,b,!1):e(a,k,!1!==b)}})(this);
MessageBundle={en:{"ajax.loading":"loading...","ajax.error":"network error,please try later",required:"please input value","selection.required":"please select",phone:"please input valid phone number",email:"please input valid email",regex:"please input valid value",integer:"must be a integer","integer.positive":"must be a positive integer","double":"must be a decimal","double.positive":"must be a positive decimal","save.and.create":"save and add","no.selection":"no selection","no.modification":"no modification",
select:"please select","confirm.delete":"are sure to delete?","confirm.save":"are sure to save?","confirm.exit":"you have unsaved modification,are sure to exit?","unsupported.browser":"unsupported browser","action.denied":"requested action denied","maximum.exceeded":"{0} , exceed maximum {1}"},"zh-cn":{"ajax.loading":"\u6b63\u5728\u52a0\u8f7d...","ajax.error":"\u9519\u8bef,\u8bf7\u7a0d\u540e\u518d\u8bd5",required:"\u8bf7\u586b\u5199","selection.required":"\u8bf7\u9009\u62e9",email:"email\u4e0d\u5408\u6cd5",
regex:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u683c\u5f0f",phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u53f7\u7801",integer:"\u8bf7\u586b\u5199\u6574\u6570","integer.positive":"\u8bf7\u586b\u5199\u6b63\u6574\u6570","double":"\u8bf7\u586b\u5199\u6570\u5b57","double.positive":"\u8bf7\u586b\u5199\u5927\u4e8e\u96f6\u7684\u6570\u5b57","save.and.create":"\u4fdd\u5b58\u5e76\u65b0\u5efa","no.selection":"\u6ca1\u6709\u9009\u4e2d","no.modification":"\u6ca1\u6709\u66f4\u6539",add:"\u6dfb\u52a0",remove:"\u5220\u9664",
browse:"\u6d4f\u89c8\u6587\u4ef6",select:"\u8bf7\u9009\u62e9",pick:"\u8bf7\u6311\u9009",save:"\u4fdd\u5b58",restore:"\u8fd8\u539f",cancel:"\u53d6\u6d88",error:"\u9519\u8bef",success:"\u64cd\u4f5c\u6210\u529f",confirm:"\u786e\u5b9a","confirm.delete":"\u786e\u5b9a\u8981\u5220\u9664?","confirm.save":"\u786e\u5b9a\u8981\u4fdd\u5b58?","confirm.exit":"\u6709\u6539\u52a8\u672a\u4fdd\u5b58,\u786e\u5b9a\u8981\u79bb\u5f00?","true":"\u662f","false":"\u5426","unsupported.browser":"\u4f60\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd",
"action.denied":"\u4f60\u62d2\u7edd\u4e86\u8bf7\u6c42","maximum.exceeded":"{0} ,\u8d85\u8fc7\u6700\u5927\u9650\u5236\u6570{1}"},get:function(){var a=arguments[0],c=MessageBundle.lang(),c=MessageBundle[c][a];"undefined"==typeof c&&(c=a);for(a=1;a<arguments.length;a++)c=c.replace("{"+(a-1)+"}",arguments[a]);return c},lang:function(){var a=($.cookie("locale")||navigator.language||navigator.browserLanguage||"").toLowerCase();if(!MessageBundle[a]){var c=a.indexOf("_");0<c&&(a=a.substring(0,c));MessageBundle[a]||
(a="en")}return a},shortLang:function(){var a=MessageBundle.lang(),c=a.indexOf("-");0<c&&(a=a.substring(0,c));return a}};var MODERN_BROWSER=!$.browser.msie||8<$.browser.version;
(function(){var a=document.domain;if(!a.match(/^(\d+\.){3}\d+$/)){a=a.split(".");try{2<a.length&&(document.domain=a[a.length-2]+"."+a[a.length-1])}catch(c){3<a.length&&(document.domain=a[a.length-3]+"."+a[a.length-2]+"."+a[a.length-1])}}$.ajaxSettings.traditional=!0;var b=$.ajax;MODERN_BROWSER&&($.ajax=function(a){a.url=UrlUtils.makeSameOrigin(a.url);a.xhrFields={withCredentials:!0};return b(a)});if("undefined"!=typeof $.rc4EncryptStr&&"false"!=$('meta[name="pe"]').attr("content")){var e=$.param;
$.param=function(a,b){(jQuery.isArray(a)||a.jquery)&&jQuery.each(a,function(){if(/password$/.test(this.name.toLowerCase()))try{var a=$.cookie("T"),a=a.substring(15,25);this.value=$.rc4EncryptStr(encodeURIComponent(this.value+a),a)}catch(b){}});return e(a,b)}}})();
Indicator={text:"",show:function(a){$("#indicator").length||$('<div id="indicator"></div>').appendTo(document.body);var c=$("#indicator");a&&c.hasClass("loading")&&c.removeClass("loading");!a&&!c.hasClass("loading")&&c.addClass("loading");c.html(Indicator.text||MessageBundle.get("ajax.loading"));c.show();Indicator.text=""},showError:function(){Indicator.text=MessageBundle.get("ajax.error");Indicator.show(!0)},hide:function(){Indicator.text="";$("#indicator")&&$("#indicator").hide()}};
UrlUtils={extractDomain:function(a){if(UrlUtils.isAbsolute(a)){a=a.replace(/:\d+/,"");a=a.substring(a.indexOf("://")+3);var c=a.indexOf("/");0<c&&(a=a.substring(0,c));return a}return document.location.hostname},isSameDomain:function(a,c){c=c||document.location.href;var b=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(c);return b==e},isSameOrigin:function(a,c){c=c||document.location.href;var b=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(c);if($.browser.msie&&b!=e)return!1;b=b.split(".");
e=e.split(".");return b[b.length-1]==e[e.length-1]&&b[b.length-2]==e[e.length-2]},makeSameOrigin:function(a,c){c=c||document.location.href;return UrlUtils.isSameOrigin(a,c)?a:c.substring(0,c.indexOf("/",c.indexOf("://")+3))+CONTEXT_PATH+"/webproxy/"+a},isAbsolute:function(a){if(!a)return!1;a=a.indexOf("://");return 4==a||5==a},absolutize:function(a){if(UrlUtils.isAbsolute(a))return a;var c=document.location.href,b=c.indexOf("://");return 0==a.length||0==a.indexOf("/")?c.substring(0,c.indexOf("/",
b+3))+CONTEXT_PATH+a:c.substring(0,c.lastIndexOf("/")+1)+a}};
Message={compose:function(a,c){return'<div class="'+c+'"><a class="close" data-dismiss="alert">&times;</a>'+a+"</div>"},showMessage:function(){Message.showActionMessage(MessageBundle.get.apply(this,arguments))},showError:function(){Message.showActionError(MessageBundle.get.apply(this,arguments))},showActionError:function(a,c){Message.showActionMessage(a,c,!0)},showActionMessage:function(a,c,b){if(a){if("string"==typeof a){var e=[];e.push(a);a=e}for(var e="",d=0;d<a.length;d++)e+=Message.compose(a[d],
b?"action-error alert alert-error":"action-message alert alert-info");if(e){a=$("#content");if(c&&$(c).parents("#_window_").length&&(b||$(c).hasClass("view")||$(c).hasClass("keepopen")))a=$("#_window_");$("#message",a).length||$('<div id="message"></div>').prependTo(a);a=$("#message",a);b&&(c&&"FORM"==$(c).prop("tagName"))&&($(c).attr("id")||$(c).attr("id","form"+(new Date).getTime()),b=$(c).attr("id"),0==$("#"+b+"_message").length&&$('<div id="'+b+'_message"></div>').insertBefore(c),a=$("#"+b+"_message"));
a.html(e);_observe(a);$("html,body").animate({scrollTop:a.offset().top-20},100)}}},showFieldError:function(a,c,b){c=c||MessageBundle.get(b);if(a&&$(a).length)if(a=$(a),b=a.closest(".control-group"),b.addClass("error"),$(".field-error",a.parent()).remove(),$(a).is(":visible")){c=$('<div class="field-error removeonclick"><div class="field-error-content">'+c+"</div><div>").insertAfter(a);$('<div class="field-error-arrow"/>').html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>').appendTo(c);
var e=a.width(),d=c.height();b=a.position().top;a=a.position().left+e-30;c.css({top:b+"px",left:a+"px",marginTop:-d+"px",opacity:0});c.animate({opacity:0.8})}else b.length&&$(a).is('[type="hidden"]')?($(".controls span",b).text(""),$('<span class="field-error help-inline">'+c+"</span>").appendTo($(".controls",b))):Message.showActionError(c);else Message.showActionError(c)}};
Form={focus:function(a){for(var c=$(":input:visible",a).get(),b=0;b<c.length;b++)if($(".field-error",$(c[b]).parent()).length){setTimeout(function(){$(c[b]).focus()},50);break}},validate:function(a){if("FORM"!=$(a).prop("tagName")){$(a).closest(".control-group").removeClass("error");$(".field-error",$(a).parent()).fadeIn().remove();if($(a).is(":visible")||$(a).is('[type="hidden"]')&&!$(a).prop("disabled")){var c=$(a).val();if($(a).hasClass("required")&&!c)return"SELECT"==$(a).prop("tagName")?Message.showFieldError(a,
null,"selection.required"):Message.showFieldError(a,null,"required"),!1;if($(a).hasClass("email")&&c&&!c.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))return Message.showFieldError(a,null,"email"),!1;if($(a).hasClass("regex")&&c&&!c.match(RegExp($(a).data("regex"))))return Message.showFieldError(a,null,"regex"),!1;if($(a).hasClass("phone")&&c&&!c.match(/^[\d-]+$/))return Message.showFieldError(a,null,"phone"),!1;if($(a).hasClass("integer")&&c){if($(a).hasClass("positive")&&!c.match(/^[+]?\d*$/))return Message.showFieldError(a,
null,"integer.positive"),!1;if(!$(a).hasClass("positive")&&!c.match(/^[-+]?\d*$/))return Message.showFieldError(a,null,"integer"),!1}else if($(a).hasClass("double")&&c){if($(a).hasClass("positive")&&!c.match(/^[+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double.positive"),!1;if(!$(a).hasClass("positive")&&!c.match(/^[-+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double"),!1}}return!0}var b=!0;$(":input",a).each(function(){Form.validate(this)||(b=!1)});b||Form.focus(a);return b}};
Ajax={defaultRepacement:"content",fire:function(a,c){if(!a)return!0;var b=a[c];"undefined"==typeof b&&(b=$(a).attr(c));if("undefined"==typeof b||!b)return!0;var e=[];if(2<arguments.length)for(var d=2;d<arguments.length;d++)e[d-2]=arguments[d];var f;if("function"==typeof b)f=b.apply(a,e);else{-1<b.indexOf("return")&&(b=b.replace("return",""));a._temp=function(){return eval(b)};try{f=a._temp()}catch(k){alert(k)}}return!1==f?!1:!0},handleResponse:function(a,c){if(a){var b=!1,e=c.target;e&&$(e).parents("div.ui-dialog").length&&
(c.quiet=!0);if("string"==typeof a&&(0==a.indexOf("{")||0==a.indexOf("[")))a=$.parseJSON(a);if("string"==typeof a){0<=a.indexOf("<title>")&&0<a.indexOf("</title>")&&(Ajax.title=a.substring(a.indexOf("<title>")+7,a.indexOf("</title>")),c.replaceTitle&&(document.title=Ajax.title));for(var d={},f=(c.replacement||$(e).data("replacement")||("FORM"==$(e).prop("tagName")?$(e).attr("id"):null)||Ajax.defaultRepacement).split(","),k=0;k<f.length;k++){var h=f[k].split(":",2);d[h[0]]=2==h.length?h[1]:h[0]}var f=
a.replace(/<script(.|\s)*?\/script>/g,""),k=$("<div/>").html(f),j;for(j in d){h=$("#"+j);j==Ajax.defaultRepacement&&!h.length&&(h=$("body"));!c.quiet&&h.length&&$("html,body").animate({scrollTop:h.offset().top-50},100);var g=k.find("#"+d[j]);g.length?h.html(g.html()):k.find("#content").length?h.html(k.find("#content").html()):k.find("body").length?h.html(k.find("body").html()):h.html(f);!c.quiet&&"undefined"!=typeof $.effects&&h.effect("highlight");_observe(h)}k.remove();Ajax.fire(e,"onsuccess",a)}else if(Ajax.jsonResult=
a,a.fieldErrors||a.actionErrors?(b=!0,c.onerror&&c.onerror.apply(window),Ajax.fire(e,"onerror",a)):(c.onsuccess&&c.onsuccess.apply(window),Ajax.fire(e,"onsuccess",a)),Message.showActionError(a.actionErrors,e),Message.showActionMessage(a.actionMessages,e),a.fieldErrors)if(e){for(j in a.fieldErrors)Message.showFieldError(e[j],a.fieldErrors[j]);Form.focus(e)}else for(j in a.fieldErrors)Message.showActionError(a.fieldErrors[j]);e&&"FORM"==e.tagName&&(!b&&$(e).hasClass("disposable")?setTimeout(function(){$(":input",
e).prop("disabled",!0)},100):setTimeout(function(){$('button[type="submit"]',e).prop("disabled",!1);Captcha.refresh()},100),!b&&($(e).hasClass("reset")&&e.reset)&&e.reset());Indicator.text="";Ajax.fire(e,"oncomplete",a)}},jsonResult:null,title:""};
function ajaxOptions(a){a=a||{};a.dataType||(a.dataType="text");a.headers||(a.headers={});$.extend(a.headers,{"X-Data-Type":a.dataType});var c=a.beforeSend;a.beforeSend=function(b){c&&c(b);Indicator.text=a.indicator;Ajax.fire(null,a.onloading)};var b=a.success;a.success=function(c,d,f){Ajax.handleResponse(c,a);b&&(!c.fieldErrors&&!c.actionErrors)&&b(c,d,f)};return a}function ajax(a){$.ajax(ajaxOptions(a))}var CONTEXT_PATH=$('meta[name="context_path"]').attr("content")||"";
"undefined"==typeof Initialization&&(Initialization={});"undefined"==typeof Observation&&(Observation={});function _init(){var a=[],c;for(c in Initialization)"function"==typeof Initialization[c]&&a.push(c);a.sort();for(c=0;c<a.length;c++)Initialization[a[c]].call(this);_observe()}
function _observe(a){a||(a=document);$(".chart,form.ajax,.ajaxpanel",a).each(function(a){$(this).attr("id")||$(this).attr("id",("a"+(a+Math.random())).replace(".","").substring(0,5))});var c=[],b;for(b in Observation)"function"==typeof Observation[b]&&c.push(b);c.sort();for(b=0;b<c.length;b++)Observation[c[b]].call(this,a)}$(_init);
Initialization.common=function(){$(document).ajaxStart(function(){Indicator.show()});$(document).ajaxError(function(){Indicator.showError()});$(document).ajaxSuccess(function(a,b){Indicator.hide();var e=b.getResponseHeader("X-Redirect-To");if(e){$("body").html('<div class="modal"><div class="modal-body"><div class="progress progress-striped active"><div class="bar" style="width: 50%;"></div></div></div></div>');e=UrlUtils.absolutize(e);try{var d=top.location.href;d&&UrlUtils.isSameDomain(d,e)?top.location.href=
e:document.location.href=e}catch(f){document.location.href=e}}});$(document).on("click",".removeonclick",function(){$(this).remove()}).on("keyup","input",$.debounce(200,function(a){!$(this).hasClass("email")&&(!$(this).hasClass("regex")&&13!=a.keyCode)&&Form.validate(this);return!0})).on("focusout","input",function(){($(this).hasClass("email")||$(this).hasClass("regex")||!$(this).hasClass("required"))&&Form.validate(this);return!0}).on("change","select",function(){Form.validate(this);return!0}).on("dblclick",
".ui-dialog-titlebar",function(){Dialog.toggleMaximization($(".ui-dialog-content",$(this).closest(".ui-dialog")))}).on("mouseenter",".popover,.tooltip",function(){$(this).remove()});$.alerts.okButton=MessageBundle.get("confirm");$.alerts.cancelButton=MessageBundle.get("cancel");Nav.init();Nav.activate(document.location.pathname);var a=document.location.hash;a&&$(".nav-tabs").each(function(){var c=!1;$('a[data-toggle="tab"]',this).each(function(){var b=$(this);if(!c){var e=b.attr("data-target");e||
(e=(e=b.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));e==a&&(c=!0,b.tab("show"),$target=$(e),$target.hasClass("ajaxpanel")&&$target.removeClass("manual"))}})});$(document.body).hasClass("render-location-qrcode")&&($('<div id="render-location-qrcode" style="width:15px;position:fixed;bottom:0;right:0;cursor:pointer;"><i class="icon-qrcode"></i></div>').appendTo(document.body),$("#render-location-qrcode").click(function(){var a=$(this);a.hide();var b=$('<div class="modal" style="z-index:10000;"><div style="padding: 5px 5px 0 0;"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button></div><div class="modal-body" style="max-height:600px;"><div class="location-qrcode">'+
document.location.href+"</div></div></div>").appendTo(document.body);$(".location-qrcode",b).encodeqrcode();$("button.close",b).click(function(){b.remove();a.show()})}));-1!=document.location.search.indexOf("printpage=true")&&(window.print(),window.close())};var HISTORY_ENABLED=MODERN_BROWSER&&("undefined"!=typeof history.pushState||"undefined"!=typeof $.history)&&"false"!=$('meta[name="history_enabled"]').attr("content");
if(HISTORY_ENABLED){var SESSION_HISTORY_SUPPORT="undefined"!=typeof history.pushState&&0!=document.location.hash.indexOf("#!/"),_historied_=!1;Initialization.history=function(){SESSION_HISTORY_SUPPORT?window.onpopstate=function(a){var c=document.location.href;Nav.activate(c);a.state&&ajax({url:c,replaceTitle:!0,replacement:a.state.replacement,cache:!1,headers:{"X-Fragment":"_"}})}:$.history.init(function(a){if(!(!a&&!_historied_||a&&0>a.indexOf("!"))){var c=document.location.href;0<c.indexOf("#")&&
(c=c.substring(0,c.indexOf("#")));a.length&&(a=a.substring(1),UrlUtils.isSameDomain(a)&&CONTEXT_PATH&&(a=CONTEXT_PATH+a),c=a);_historied_=!0;ajax({url:c,cache:!0,replaceTitle:!0,success:function(){Nav.activate(c)},headers:{"X-Fragment":"_"}})}},{unescape:!0})}}
Observation.common=function(a){$(".controls .field-error",a).each(function(){var a=$(this).text(),b=$(":input",$(this).parent());$(this).remove();Message.showFieldError(b,a)});var c="FORM"==$(a).prop("tagName")&&$(a).hasClass("focus")?a:$(".focus:eq(0)",a);if("FORM"!=c.prop("tagName")&&c.attr("name"))c.focus();else for(var c=$(":input:visible",c).toArray(),b=0;b<c.length;b++){var e=$(c[b]);if(e.attr("name")&&!e.val()){e.focus();break}}$("form",a).each(function(){$(this).hasClass("ajax")||$(this).submit(function(){$(".action-error").remove();
return Form.validate(this)})});$('input[type="text"]',a).each(function(){$(this).attr("autocomplete")||$(this).attr("autocomplete","off");var a=$(this).attr("maxlength");if(!a||3E3<a)$(this).hasClass("date")?$(this).attr("maxlength","10"):$(this).hasClass("integer")?$(this).attr("maxlength","11"):$(this).hasClass("double")?$(this).attr("maxlength","22"):$(this).attr("maxlength","255")});$('input[type="checkbox"].custom,input[type="radio"].custom').each(function(a){$(this).hide();this.id||(this.id=
("a"+(a+Math.random())).replace(".","").substring(0,5));$(this).next("lable.custom").length||$(this).after($('<label class="custom" for="'+this.id+'"></label>'))});$(".linkage",a).each(function(){var a=$(this);a.data("originalclass",a.attr("class"));var b=$(".linkage_switch",a);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val());b.change(function(){var a=$(this).closest(".linkage"),b=$(this);
$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val())})});$(":input.conjunct",a).change(function(){var a=$(this),b=$(this).closest("form"),c={},e=b.attr("action");-1<e.indexOf("/")?"save"==e.substring(e.lastIndexOf("/")+1)&&(e=e.substring(0,e.lastIndexOf("/"))+"/input"):"save"==e&&(e="input");var j=$(':input[type=hidden][name$=".id"]',b);j.val()&&(c.id=j.val());c[a.attr("name")]=a.val();ajax({global:!1,
quiet:!0,type:b.attr("method"),url:e,data:c,replacement:a.data("replacement")})});"undefined"!=typeof $.fn.datepicker&&$("input.date",a).datepicker({dateFormat:"yy-mm-dd"});$("input.captcha",a).focus(function(){$(this).data("_captcha_")||($(this).after('<img class="captcha" src="'+this.id+'"/>'),$("img.captcha",a).click(Captcha.refresh),$(this).data("_captcha_",!0))});"undefined"!=typeof $.fn.treeTable&&$(".treeTable",a).each(function(){$(this).treeTable({initialState:$(this).hasClass("expanded")?
"expanded":"collapsed"})});"undefined"!=typeof $.fn.chosen&&$(".chosen",a).chosen({placeholder_text:MessageBundle.get("select"),no_results_text:" "});"undefined"!=typeof $.fn.htmlarea&&$("textarea.htmlarea",a).htmlarea();$('a[data-toggle="tab"]',a).on("shown",function(a){$this=$(a.target);a=$this.attr("data-target");a||(a=(a=$this.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,""));$target=$(a);$target.hasClass("ajaxpanel")&&$target.trigger("load")});$(".carousel",a).each(function(){var a=$(this);a.carousel((new Function("return "+
(a.data("options")||"{}")))())});$(".tiped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"top"};!a.attr("title")&&a.data("tipurl")&&a.attr("title",MessageBundle.get("ajax.loading"));a.bind("hover"==b.trigger?"mouseenter":b.trigger,function(){a.hasClass("_tiped")||(a.addClass("_tiped"),$.ajax({url:a.data("tipurl"),global:!1,dataType:"html",success:function(c){a.attr("data-original-title",c);a.tooltip(b).tooltip("show")}}))});a.is(":input")&&
(b.trigger="focus",b.placement="right");a.tooltip(b)});$(".poped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"right"};a.data("popurl")&&(!b.content&&a.data("popurl")&&(b.title=MessageBundle.get("ajax.loading")),a.bind("hover"==b.trigger?"mouseenter":b.trigger,function(){a.hasClass("_poped")||(a.addClass("_poped"),$.ajax({url:a.data("popurl"),global:!1,dataType:"html",success:function(c){$("div.popover").remove();0<=c.indexOf("<title>")&&
0<c.indexOf("</title>")&&a.attr("data-original-title",c.substring(c.indexOf("<title>")+7,c.indexOf("</title>")));0<=c.indexOf("<body>")&&0<c.indexOf("</body>")&&a.attr("data-content",c.substring(c.indexOf("<body>")+6,c.indexOf("</body>")));a.popover(b).popover("show")}}))}));a.popover(b)});$(".switch",a).each(function(){var a=$(this);a.children().css("cursor","pointer").click(function(){a.children().removeClass("active").css({"font-weight":"normal"});$(this).addClass("active").css({"font-weight":"bold"})})});
$("a.popmodal",a).each(function(){var a=$(this),b=a.attr("href");-1<b.indexOf("/")&&(b=b.substring(b.lastIndexOf("/")+1));for(b+="_modal";$("#"+b).length;)b+="_";a.click(function(){$("#"+b).length?$("#"+b).modal("show"):$.get(a.attr("href"),function(c){c=c.replace(/<script(.|\s)*?\/script>/g,"");var e=$("<div/>").html(c);c=$("title",e).html();var e=$("#content",e).html(),j=a.data("modalwidth");$('<div id="'+b+'" class="modal hide fade in"'+(j?' style="width:'+j+';"':"")+'><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3 style="text-align:center;">'+
c+'</h3></div><div class="modal-body" style="padding-top:40px;">'+e+"</div></div>").appendTo(document.body);_observe($("#"+b));$("form",$("#"+b)).each(function(){this.onsuccess=function(){$("#"+b).modal("hide")}});a.attr("href","#"+b).attr("data-toggle","modal");$("#"+b).modal("show")});return!1})});"undefined"!=typeof swfobject&&($(".chart",a).each(function(){var a=$(this),b=a.attr("id"),c=a.width(),e=a.height(),j=a.data("url");0==j.indexOf("/")&&(j=document.location.protocol+"//"+document.location.host+
j);(!b||!c||!e||!j)&&alert("id,width,height,data all required");swfobject.embedSWF(CONTEXT_PATH+"/assets/images/open-flash-chart.swf",b,c,e,"9.0.0",CONTEXT_PATH+"/assets/images/expressInstall.swf",{"data-file":encodeURIComponent(j),loading:MessageBundle.get("ajax.loading")},{wmode:"transparent"});a.data("_interval")&&clearInterval(parseInt(a.data("_interval")));a.data("interval")&&(c=setInterval(function(){a.data("quiet")?$.ajax({global:!1,url:j,dataType:"text",success:function(a){document.getElementById(b).load(a)}}):
document.getElementById(b).reload(j)},parseInt(a.data("interval"))),a.data("_interval",c))}),window.save_image=function(){var a=[];a.push("<html><head><title>Charts: Export as Image</title></head><body>");$("object[data]").each(function(){a.push('<img src="data:image/png;base64,'+this.get_img_binary()+'"/>')});a.push("</body></html>");var b=window.open("","_blank");with(b.document)write(a.join("")),b.document.close()});$("a.ajax,form.ajax",a).each(function(){var a=this,b=[],c=$(a).attr("id");"string"!=
typeof c&&(c="");for(var c=($(a).data("replacement")||("FORM"==$(a).prop("tagName")?c:"")).split(","),e=0;e<c.length;e++){var j=c[e].split(":",2);(j=2==j.length?j[1]:j[0])&&b.push(j)}if("FORM"==this.tagName){var g={beforeSubmit:function(){if(!Ajax.fire(a,"onprepare"))return!1;$(".action-error").remove();if(!Form.validate(a))return!1;Indicator.text=$(a).data("indicator");$('button[type="submit"]',a).prop("disabled",!0);Ajax.fire(a,"onloading")},error:function(){Form.focus(a);a&&"FORM"==a.tagName&&
setTimeout(function(){$('button[type="submit"]',a).prop("disabled",!1)},100);Ajax.fire(a,"onerror")},success:function(b){Ajax.handleResponse(b,{target:a})},headers:{}};$(this).hasClass("view")||$.extend(g.headers,{"X-Data-Type":"json"});0<b.length&&$.extend(g.headers,{"X-Fragment":b.join(",")});$(this).bind("submit",function(){$(this).ajaxSubmit(g);return!1})}else $(this).click(function(){if(!Ajax.fire(a,"onprepare"))return!1;if(HISTORY_ENABLED&&$(this).hasClass("view")&&!$(this).hasClass("nohistory")&&
($(this).hasClass("history")||!$(this).data("replacement"))){var c=this.href;if(UrlUtils.isSameDomain(c))if(c=c.substring(c.indexOf("//")+2),c=c.substring(c.indexOf("/")),SESSION_HISTORY_SUPPORT){var e=document.location.href;history.replaceState({url:e},"",e);history.pushState({replacement:$(this).data("replacement"),url:c},"",c)}else return CONTEXT_PATH&&(c=c.substring(CONTEXT_PATH.length)),c=c.replace(/^.*#/,""),$.history.load("!"+c),!1}var g={url:this.href,type:$(this).data("method")||"GET",cache:$(this).hasClass("cache"),
beforeSend:function(){$(".action-error").remove();Indicator.text=$(a).data("indicator");Ajax.fire(a,"onloading")},error:function(){Ajax.fire(a,"onerror")},headers:{}},h={target:a};$(this).hasClass("view")||$.extend(g.headers,{"X-Data-Type":"json"});0<b.length?$.extend(g.headers,{"X-Fragment":b.join(",")}):($.extend(g.headers,{"X-Fragment":"_"}),h.replaceTitle=!0);g.success=function(a){Nav.activate(g.url);Ajax.handleResponse(a,h)};$.ajax(g);return!1})})};
var Nav={init:function(){$(document).on("click",".nav:not(.nav-tabs) li a",function(){$("li",$(this).closest(".nav")).removeClass("active");$(this).closest("li").addClass("active")})},activate:function(a){a=UrlUtils.absolutize(a);$(".nav:not(.nav-tabs) li").removeClass("active");$(".nav:not(.nav-tabs) li a").each(function(){(this.href==a||0==a.indexOf(this.href+"?"))&&$(this).closest("li").addClass("active")})}},Dialog={adapt:function(a,c){if(c){var b=c.document;c.contentDocument?b=c.contentDocument:
c.contentWindow&&(b=c.contentWindow.document);$(a).dialog("option","title",b.title);$(a).dialog("option","minHeight",e);var e=$(b).height()+20;$(c).height(e)}else $(a).dialog("option","title",Ajax.title);a.dialog("option","position","center");e=a.height();600<e&&a.dialog("option","position","top");a.dialog("moveToTop")},toggleMaximization:function(a){var c=$(a).closest(".ui-dialog"),b=c.data("orginal-width");if(b)c.width(b),c.height(c.data("orginal-height")),c.removeData("orginal-width").removeData("orginal-height"),
Dialog.adapt($(a));else{c.data("orginal-width",c.width()+0.2).data("orginal-height",c.height()+0.2);var b=$(window).width()-10,e=$(window).height()-10;c.outerWidth(b);c.outerHeight()<e&&c.outerHeight(e);a.dialog("option","position","top")}}};Captcha={refresh:function(){$("img.captcha").each(function(){var a=this.src,c=a.lastIndexOf("&");0<c&&(a=a.substring(0,c));this.src=a+"&"+Math.random()});$("input.captcha").val("").focus()}};
ArrayUtils={unique:function(a){if(a){for(var c=[],b={},e=0,d;null!=(d=a[e]);e++)b[d]||(c.push(d),b[d]=!0);return c}}};
Date.prototype.format=function(a,c,b){if("function"==typeof this.strftime)return this.strftime(a);var e=function(a,b){a=""+a;return 1==a.length?""+(null==b?"0":b)+a:a},d=[],f=!1,k=this.getHours(),h=12>k;null==c&&(c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));null==b&&(b="Sun Mon Tue Wed Thu Fri Sat".split(" "));var j;j=12<k?k-12:0==k?12:k;for(var g=0;g<a.length;++g){var l=a.charAt(g);if(f){switch(l){case "a":l=""+b[this.getDay()];break;case "b":l=""+c[this.getMonth()];break;case "d":l=
e(this.getDate());break;case "e":l=e(this.getDate()," ");break;case "H":l=e(k);break;case "I":l=e(j);break;case "l":l=e(j," ");break;case "m":l=e(this.getMonth()+1);break;case "M":l=e(this.getMinutes());break;case "S":l=e(this.getSeconds());break;case "y":l=e(this.getFullYear()%100);break;case "Y":l=""+this.getFullYear();break;case "p":l=h?"am":"pm";break;case "P":l=h?"AM":"PM";break;case "w":l=""+this.getDay()}d.push(l);f=!1}else"%"==l?f=!0:d.push(l)}return d.join("")};
(function(a){a.fn.checkavailable=function(){this.each(function(){var c=a(this);c.bind("checkavailable",function(){if(c.val()){var b=a("input[type=hidden]",c.closest("form")).not('[name^="__"]').add(c),e=c.data("checkurl");e||(e=c.closest("form").prop("action"),e=e.substring(0,e.lastIndexOf("/"))+"/checkavailable");ajax({global:!1,target:c.closest("form")[0],url:e,data:b.serialize()})}}).change(function(){c.addClass("dirty")}).blur(function(){c.hasClass("dirty")&&c.trigger("checkavailable")})});return this}})(jQuery);
Observation.checkavailable=function(a){$(":input.checkavailable",a).checkavailable()};
Observation.tags=function(a){"undefined"!=typeof $.fn.textext&&(!$.browser.msie||"8"<$.browser.version)&&$("input.tags",a).each(function(){var a=$(this),b={prompt:"...",autocomplete:{dropdownMaxHeight:"200px",render:function(a){return"string"==typeof a?a:a.label?'<div value="'+a.value+'">'+a.label+"</div>":a.value}},ext:{core:{serializeData:function(a){return a.join(",")}},itemManager:{itemToString:function(a){return"string"==typeof a?a:a.value}},autocomplete:{showDropdown:function(){$(".text-suggestion",
this.containerElement()).length&&this.containerElement().show()},renderSuggestions:function(a){var b=this;b.clearItems();var c=[];$(".text-tags .text-label",b.container).each(function(){c.push($(this).text())});$.each(a||[],function(a,d){for(var e=b.itemManager().itemToString(d),l=!1,q=0;q<c.length;q++)if(c[q]==e){l=!0;break}l||b.addSuggestion(d)})}}}},e=a.val();e&&(b.tagsItems=0==e.indexOf('["')?$.parseJSON(e):e.split(","));a.data("source")?(b.plugins="tags prompt focus autocomplete ajax arrow",
b.ajax={global:!1,url:a.data("source"),cacheResults:!1,dataCallback:function(a){return{keyword:a}}}):b.plugins="tags prompt focus";a.val("").textext(b).bind("isTagAllowed",function(a,b){var c=[];$(".text-tags .text-label",this.container).each(function(){c.push($(this).text())});for(var e=0;e<c.length;e++)if(c[e]==b.tag){b.result=!1;break}})})};
(function(a){a.ajaxupload=function(c,b){if(!c)return!1;var e={url:document.location.href,name:"file"};b=b||{};a.extend(e,b);b=e;var d;b.progress?d=a(b.progress):(d=a("#_uploadprogress"),d.length||(d=a('<progress id="_uploadprogress" style="position: fixed;z-index: 10001;left: 45%;top: 0px;width: 100px;" min="0" max="100" value="0">0</progress>').appendTo(document.body)));var f=new XMLHttpRequest;f.open("POST",b.url);f.onreadystatechange=function(){4==f.readyState&&((200<=f.status&&200>=f.status||
304==f.status)&&""!=f.responseText&&"undefined"!=typeof b.success)&&b.success(f)};d&&d.length&&(f.onload=function(){d.val(100).html(100).hide()},"upload"in f&&(f.upload.onprogress=function(a){a.lengthComputable&&(a=100*(a.loaded/a.total)|0,d.val(a).html(a).show())}));if("string"==typeof b.data){var k=b.data.split("&");b.data={};for(e=0;e<k.length;e++){var h=k[e].split("=",2);b.data[h[0]]=2==h.length?h[1]:""}}if(window.FormData){for(var j=new FormData,e=0;e<c.length;e++)j.append(b.name,c[e]);b.data&&
a.each(b.data,function(a,b){j.append(a,b)});f.send(j)}else{var g="xxxxxxxxx";f.setRequestHeader("Content-Type","multipart/form-data, boundary="+g);!window.BlobBuilder&&window.WebKitBlobBuilder&&(window.BlobBuilder=window.WebKitBlobBuilder);if("undefined"!=typeof FileReader&&"undefined"!=typeof BlobBuilder){for(e=0;e<c.length;e++){k=c[e];h=new FileReader;h.sourceFile=k;var l=0,g="xxxxxxxxx",q=new BlobBuilder;b.data&&a.each(b.data,function(a,b){var c=new BlobBuilder;c.append("--");c.append(g);c.append("\r\n");
c.append('Content-Disposition: form-data; name="');c.append(a);c.append('" ');c.append(b);c.append("\r\n");q.append(c.getBlob())});h.onload=function(a){var d=a.target.sourceFile,e=new BlobBuilder;e.append("--");e.append(g);e.append("\r\n");e.append("Content-Disposition: form-data; name=");e.append(b.name);e.append("; filename=");e.append(d.name);e.append("\r\n");e.append("Content-Type: ");e.append(d.type);e.append("\r\n\r\n");e.append(a.target.result);e.append("\r\n");q.append(e.getBlob());l++;l==
c.length&&(q.append("--"),q.append(g),q.append("--"),"undefined"!=typeof b.beforeSend&&b.beforeSend(),f.send(q.getBlob()))};h.readAsArrayBuffer(k)}return!0}e=c;k=g;h=b.name;if("undefined"!=typeof FileReaderSync){for(var m=new BlobBuilder,t=new FileReaderSync,e=event.data,r=0;r<e.length;r++)m.append("--"),m.append(k),m.append("\r\n"),m.append("Content-Disposition: form-data; name="),m.append(h),m.append("; filename="),m.append(e[r].name),m.append("\r\n"),m.append("Content-Type: "),m.append(e[r].type),
m.append("\r\n\r\n"),m.append(t.readAsArrayBuffer(e[r])),m.append("\r\n");m.append("--");m.append(k);m.append("--");q=m.getBlob()}else if(e[0].getAsBinary){m="";for(r=0;r<e.length;r++)m+="--"+k+"\r\n",m+="Content-Disposition: form-data; name="+h+"; filename="+e[r].name+"\r\n",m+="Content-Type: "+e[r].type+"\r\n\r\n",m+=e[r].getAsBinary()+"\r\n";q=m+("--"+k+"--")}else q=null;q?("undefined"!=typeof b.beforeSend&&b.beforeSend(),f.sendAsBinary?f.sendAsBinary(q):f.send(q)):f.abort()}return!0}})(jQuery);
(function(a){function c(b){b.css("min-height","100px");if(!b.hasClass("tab-pane")||!b.hasClass("cache")||!b.hasClass("loaded")){var c=b.data("url"),d={target:b[0],url:c||document.location.href,global:!1,quiet:!0,beforeSend:function(){b.data("quiet")||("undefined"!=typeof a.fn.mask?b.mask(MessageBundle.get("ajax.loading")):b.html('<div style="text-align:center;">'+MessageBundle.get("ajax.loading")+"</div>"))},complete:function(){!b.data("quiet")&&"undefined"!=typeof a.fn.unmask&&b.unmask()},success:function(c){b.addClass("loaded");
"string"!=typeof c&&(b.empty(),a.tmpl(a("#"+b.data("tmpl")),c).appendTo(b),_observe(b))}};d.replacement=c?b.attr("id")+":"+(b.data("replacement")||"content"):b.attr("id");ajax(d)}}a.fn.ajaxpanel=function(){a(this).each(function(){var b=a(this);b.bind("load",function(){c(b)});b.data("timeout")?setTimeout(function(){c(b)},parseInt(b.data("timeout"))):b.data("interval")?setInterval(function(){c(b)},parseInt(b.data("interval"))):b.hasClass("manual")||c(b)});return this}})(jQuery);
Observation.ajaxpanel=function(a){$(".ajaxpanel",a).ajaxpanel();$(".ajaxpanel .load",a).click(function(){$(this).closest(".ajaxpanel").trigger("load")})};
