jQuery.cookie=function(a,c,b){if(1<arguments.length&&(null===c||"object"!==typeof c)){b=jQuery.extend({},b);null===c&&(b.expires=-1);if("number"===typeof b.expires){var e=b.expires,d=b.expires=new Date;d.setDate(d.getDate()+e)}return document.cookie=[encodeURIComponent(a),"=",b.raw?""+c:encodeURIComponent(""+c),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}b=c||{};d=b.raw?function(a){return a}:decodeURIComponent;
return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?d(e[1]):null};
(function(a){a.fn.rc4=function(b){var c=a.extend({key:null,method:"encrypt",callback:null},b);null==a.fn.rc4.ctrlrInst&&(a.fn.rc4.ctrlrInst=new a.fn.rc4.ctrlr(c));return this.each(function(){a.fn.rc4.ctrlrInst.settings=c;a.fn.rc4.ctrlrInst.container=this;a.fn.rc4.ctrlrInst.initialise(this)})};a.extend({hexEncode:function(a){for(var c=[],d=0;256>d;d++)c[d]="0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15);for(var f=[],d=0;d<a.length;d++)f[d]=c[a.charCodeAt(d)];return f.join("")},hexDecode:function(a){for(var c=
[],d=0;256>d;d++)c["0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15)]=String.fromCharCode(d);if(!a.match(/^[a-f0-9]*$/i))return!1;a.length%2&&(a="0"+a);for(var f=[],g=0,d=0;d<a.length;d+=2)f[g++]=c[a.substr(d,2)];return f.join("")},rc4Encrypt:function(a,c){s=[];for(var d=0;256>d;d++)s[d]=d;for(var f=0,g,d=0;256>d;d++)f=(f+s[d]+a.charCodeAt(d%a.length))%256,g=s[d],s[d]=s[f],s[f]=g;for(var f=d=0,h="",i=0;i<c.length;i++)d=(d+1)%256,f=(f+s[d])%256,g=s[d],s[d]=s[f],s[f]=g,h+=String.fromCharCode(c.charCodeAt(i)^
s[(s[d]+s[f])%256]);return h},rc4Decrypt:function(b,c){return a.rc4Encrypt(b,c)},rc4EncryptStr:function(b,c){return a.hexEncode(a.rc4Encrypt(c,unescape(encodeURIComponent(b))))},rc4DecryptStr:function(b,c){return decodeURIComponent(escape(a.rc4Decrypt(c,a.hexDecode(b))))}});a.rc4={};a.fn.rc4.ctrlrInst=null;a.fn.rc4.ctrlr=function(a){this.settings=a};var c=a.fn.rc4.ctrlr;c.prototype.initialise=function(){this.settings.key&&this.settings.method&&("ENCRYPT"==a.trim(this.settings.method.toUpperCase())&&
this.setObjectValue(a.hexEncode(a.rc4Encrypt(this.settings.key,this.getObjectValue()))),"DECRYPT"==a.trim(this.settings.method.toUpperCase())&&this.setObjectValue(a.rc4Decrypt(this.settings.key,a.hexDecode(this.getObjectValue()))))};c.prototype.getObjectValue=function(){if(a.fn.rc4.ctrlrInst.container.innerHTML)return a.fn.rc4.ctrlrInst.container.innerHTML;if(a.fn.rc4.ctrlrInst.container.value)return a.fn.rc4.ctrlrInst.container.value};c.prototype.setObjectValue=function(b){a.fn.rc4.ctrlrInst.container.innerHTML&&
(a.fn.rc4.ctrlrInst.container.innerHTML=b);a.fn.rc4.ctrlrInst.container.value&&(a.fn.rc4.ctrlrInst.container.value=b)}})(jQuery);
(function(a){function c(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function e(d){for(var f=new FormData,c=0;c<d.length;c++)"file"!=d[c].type&&f.append(d[c].name,d[c].value);h.find("input:file:enabled").each(function(){var b=a(this).attr("name"),d=this.files;if(b)for(var c=0;c<d.length;c++)f.append(b,d[c])});
if(b.extraData)for(var g in b.extraData)f.append(g,b.extraData[g]);b.data=null;d=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:"POST"});d.data=null;var e=d.beforeSend;d.beforeSend=function(a,d){d.data=f;a.upload&&(a.upload.onprogress=function(a){d.progress(a.position,a.total)});e&&e.call(d,a,b)};a.ajax(d)}function d(d){function g(){function b(){try{var a=(q.contentWindow?q.contentWindow.document:q.contentDocument?q.contentDocument:q.document).readyState;c("state = "+
a);"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(d){c("Server abort: ",d," (",d.name,")"),e(x),w&&clearTimeout(w),w=void 0}}var d=h.attr("target"),v=h.attr("action");i.setAttribute("target",o);f||i.setAttribute("method","POST");v!=l.url&&i.setAttribute("action",l.url);!l.skipEncodingOverride&&(!f||/post/i.test(f))&&h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});l.timeout&&(w=setTimeout(function(){y=!0;e(A)},l.timeout));var j=[];try{if(l.extraData)for(var t in l.extraData)j.push(a('<input type="hidden" name="'+
t+'">').attr("value",l.extraData[t]).appendTo(i)[0]);l.iframeTarget||(u.appendTo("body"),q.attachEvent?q.attachEvent("onload",e):q.addEventListener("load",e,!1));setTimeout(b,15);i.submit()}finally{i.setAttribute("action",v),d?i.setAttribute("target",d):h.removeAttr("target"),a(j).remove()}}function e(b){if(!m.aborted&&!B){try{r=q.contentWindow?q.contentWindow.document:q.contentDocument?q.contentDocument:q.document}catch(d){c("cannot access response document: ",d),b=x}if(b===A&&m)m.abort("timeout");
else if(b==x&&m)m.abort("server abort");else if(r&&r.location.href!=l.iframeSrc||y){q.detachEvent?q.detachEvent("onload",e):q.removeEventListener("load",e,!1);var b="success",f;try{if(y)throw"timeout";var g="xml"==l.dataType||r.XMLDocument||a.isXMLDoc(r);c("isXml="+g);if(!g&&(window.opera&&(null==r.body||""==r.body.innerHTML))&&--E){c("requeing onLoad callback, DOM not available");setTimeout(e,250);return}var h=r.body?r.body:r.documentElement;m.responseText=h?h.innerHTML:null;m.responseXML=r.XMLDocument?
r.XMLDocument:r;g&&(l.dataType="xml");m.getResponseHeader=function(a){return{"content-type":l.dataType}[a]};h&&(m.status=Number(h.getAttribute("status"))||m.status,m.statusText=h.getAttribute("statusText")||m.statusText);var i=(l.dataType||"").toLowerCase(),v=/(json|script|text)/.test(i);if(v||l.textarea){var j=r.getElementsByTagName("textarea")[0];if(j)m.responseText=j.value,m.status=Number(j.getAttribute("status"))||m.status,m.statusText=j.getAttribute("statusText")||m.statusText;else if(v){var t=
r.getElementsByTagName("pre")[0],k=r.getElementsByTagName("body")[0];t?m.responseText=t.textContent?t.textContent:t.innerText:k&&(m.responseText=k.textContent?k.textContent:k.innerText)}}else"xml"==i&&(!m.responseXML&&null!=m.responseText)&&(m.responseXML=F(m.responseText));try{C=G(m,i,l)}catch(o){b="parsererror",m.error=f=o||b}}catch(z){c("error caught: ",z),b="error",m.error=f=z||b}m.aborted&&(c("upload aborted"),b=null);m.status&&(b=200<=m.status&&300>m.status||304===m.status?"success":"error");
"success"===b?(l.success&&l.success.call(l.context,C,"success",m),n&&a.event.trigger("ajaxSuccess",[m,l])):b&&(void 0==f&&(f=m.statusText),l.error&&l.error.call(l.context,m,b,f),n&&a.event.trigger("ajaxError",[m,l,f]));n&&a.event.trigger("ajaxComplete",[m,l]);n&&!--a.active&&a.event.trigger("ajaxStop");l.complete&&l.complete.call(l.context,m,b);B=!0;l.timeout&&clearTimeout(w);setTimeout(function(){l.iframeTarget||u.remove();m.responseXML=null},100)}}}var i=h[0],j,k,l,n,o,u,q,m,y,w;j=!!a.fn.prop;if(d)if(j)for(k=
0;k<d.length;k++)j=a(i[d[k].name]),j.prop("disabled",!1);else for(k=0;k<d.length;k++)j=a(i[d[k].name]),j.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",i).length)alert('Error: Form elements must not have name or id of "submit".');else if(l=a.extend(!0,{},a.ajaxSettings,b),l.context=l.context||l,o="jqFormIO"+(new Date).getTime(),l.iframeTarget?(u=a(l.iframeTarget),j=u.attr("name"),null==j?u.attr("name",o):o=j):(u=a('<iframe name="'+o+'" src="'+l.iframeSrc+'" />'),u.css({position:"absolute",
top:"-1000px",left:"-1000px"})),q=u[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var d=b==="timeout"?"timeout":"aborted";c("aborting upload... "+d);this.aborted=1;u.attr("src",l.iframeSrc);m.error=d;l.error&&l.error.call(l.context,m,d,b);n&&a.event.trigger("ajaxError",[m,l,d]);l.complete&&l.complete.call(l.context,m,d)}},(n=l.global)&&!a.active++&&a.event.trigger("ajaxStart"),
n&&a.event.trigger("ajaxSend",[m,l]),l.beforeSend&&!1===l.beforeSend.call(l.context,m,l))l.global&&a.active--;else if(!m.aborted){if(d=i.clk)if((j=d.name)&&!d.disabled)l.extraData=l.extraData||{},l.extraData[j]=d.value,"image"==d.type&&(l.extraData[j+".x"]=i.clk_x,l.extraData[j+".y"]=i.clk_y);var A=1,x=2,d=a("meta[name=csrf-token]").attr("content");if((j=a("meta[name=csrf-param]").attr("content"))&&d)l.extraData=l.extraData||{},l.extraData[j]=d;l.forceSync?g():setTimeout(g,10);var C,r,E=50,B,F=a.parseXML||
function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},H=a.parseJSON||function(a){return window.eval("("+a+")")},G=function(b,d,f){var c=b.getResponseHeader("content-type")||"",g=d==="xml"||!d&&c.indexOf("xml")>=0,b=g?b.responseXML:b.responseText;g&&b.documentElement.nodeName==="parsererror"&&a.error&&a.error("parsererror");
f&&f.dataFilter&&(b=f.dataFilter(b,d));typeof b==="string"&&(d==="json"||!d&&c.indexOf("json")>=0?b=H(b):(d==="script"||!d&&c.indexOf("javascript")>=0)&&a.globalEval(b));return b}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;var f,g,h=this;"function"==typeof b&&(b={success:b});f=this.attr("method");g=this.attr("action");(g=(g="string"===typeof g?a.trim(g):"")||window.location.href||"")&&(g=(g.match(/^([^#]+)/)||[])[1]);b=a.extend(!0,{url:g,success:a.ajaxSettings.success,
type:f||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);g={};this.trigger("form-pre-serialize",[this,b,g]);if(g.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return c("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i=b.traditional;void 0===i&&(i=a.ajaxSettings.traditional);var j,k=this.formToArray(b.semantic);b.data&&(b.extraData=b.data,j=a.param(b.data,
i));if(b.beforeSubmit&&!1===b.beforeSubmit(k,this,b))return c("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[k,this,b,g]);if(g.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;g=a.param(k,i);j&&(g=g?g+"&"+j:j);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+g,b.data=null):b.data=g;var n=[];b.resetForm&&n.push(function(){h.resetForm()});b.clearForm&&n.push(function(){h.clearForm(b.includeHidden)});
if(!b.dataType&&b.target){var o=b.success||function(){};n.push(function(d){var f=b.replaceTarget?"replaceWith":"html";a(b.target)[f](d).each(o,arguments)})}else b.success&&n.push(b.success);b.success=function(a,d,f){for(var c=b.context||b,g=0,e=n.length;g<e;g++)n[g].apply(c,[a,d,f||h,h])};i=a("input:file:enabled[value]",this);j=0<i.length;g="multipart/form-data"==h.attr("enctype")||"multipart/form-data"==h.attr("encoding");i=!(!j||!i.get(0).files||!window.FormData);c("fileAPI :"+i);!1!==b.iframe&&
(b.iframe||(j||g)&&!i)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){d(k)}):d(k):(j||g)&&i?(b.progress=b.progress||a.noop,e(k)):a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){if(0===this.length){var e=this.selector,d=this.context;if(!a.isReady&&e)return c("DOM not ready, queuing ajaxForm"),a(function(){a(e,d).ajaxForm(b)}),this;c("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",
function(d){d.isDefaultPrevented()||(d.preventDefault(),a(this).ajaxSubmit(b))}).bind("click.form-plugin",function(b){var d=b.target,c=a(d);if(!c.is(":submit,input:image")){d=c.closest(":submit");if(0==d.length)return;d=d[0]}var e=this;e.clk=d;"image"==d.type&&(void 0!=b.offsetX?(e.clk_x=b.offsetX,e.clk_y=b.offsetY):"function"==typeof a.fn.offset?(c=c.offset(),e.clk_x=b.pageX-c.left,e.clk_y=b.pageY-c.top):(e.clk_x=b.pageX-d.offsetLeft,e.clk_y=b.pageY-d.offsetTop));setTimeout(function(){e.clk=e.clk_x=
e.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(0===this.length)return c;var d=this[0],f=b?d.getElementsByTagName("*"):d.elements;if(!f)return c;var g,h,i,j,k,n;g=0;for(k=f.length;g<k;g++)if(h=f[g],i=h.name)if(b&&d.clk&&"image"==h.type)!h.disabled&&d.clk==h&&(c.push({name:i,value:a(h).val(),type:h.type}),c.push({name:i+".x",value:d.clk_x},{name:i+".y",value:d.clk_y}));else if((j=a.fieldValue(h,
!0))&&j.constructor==Array){h=0;for(n=j.length;h<n;h++)c.push({name:i,value:j[h]})}else null!==j&&"undefined"!=typeof j&&c.push({name:i,value:j,type:h.type});if(!b&&d.clk&&(b=a(d.clk),f=b[0],(i=f.name)&&!f.disabled&&"image"==f.type))c.push({name:i,value:b.val()}),c.push({name:i+".x",value:d.clk_x},{name:i+".y",value:d.clk_y});return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(d){var f=a.fieldValue(this,
b);if(f&&f.constructor==Array)for(var g=0,h=f.length;g<h;g++)c.push({name:d,value:f[g]});else null!==f&&"undefined"!=typeof f&&c.push({name:this.name,value:f})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,f=this.length;d<f;d++){var g=a.fieldValue(this[d],b);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?a.merge(c,g):c.push(g))}return c};a.fieldValue=function(b,c){var d=b.name,f=b.type,g=b.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&
(!d||b.disabled||"reset"==f||"button"==f||("checkbox"==f||"radio"==f)&&!b.checked||("submit"==f||"image"==f)&&b.form&&b.form.clk!=b||"select"==g&&-1==b.selectedIndex))return null;if("select"==g){var h=b.selectedIndex;if(0>h)return null;for(var d=[],g=b.options,i=(f="select-one"==f)?h+1:g.length,h=f?h:0;h<i;h++){var j=g[h];if(j.selected){var k=j.value;k||(k=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(f)return k;d.push(k)}}return d}return a(b).val()};a.fn.clearForm=
function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,f=this.tagName.toLowerCase();c.test(d)||"textarea"==f||a&&/hidden/.test(d)?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==f&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==
typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(c=a(this).parent("select"),b&&(c[0]&&"select-one"==c[0].type)&&c.find("option").selected(!1),this.selected=b)})};a.fn.ajaxSubmit.debug=!1})(jQuery);
(function(a){function c(d){function c(b){var d=RegExp(a.map(b,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(d,decodeURIComponent)}}d=a.extend({unescape:!1},d||{});b.encoder=function(a){return!0===a?function(a){return a}:"string"==typeof a&&(a=c(a.split("")))||"function"==typeof a?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(d.unescape)}var b={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(b){b=(b||window).location.hash.replace(/^#/,
"");try{return a.browser.mozilla?b:decodeURIComponent(b)}catch(d){return b}},encoder:encodeURIComponent},e={id:"__jQuery_history",init:function(){var b='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(b);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(a){var d=this._document();d.open();d.close();b.put(a,d)},get:function(){return b.get(this._document())}},d={base:{callback:void 0,type:void 0,check:function(){},
load:function(){},init:function(a,b){c(b);f.callback=a;f._options=b;f._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=b.get();f._appState=a;f.callback(a);setInterval(f.check,100)},check:function(){var a=b.get();a!=f._appState&&(f._appState=a,f.callback(a))},load:function(a){a!=f._appState&&(b.put(a),f._appState=a,f.callback(a))}},iframeTimer:{_appState:void 0,_init:function(){var a=b.get();f._appState=a;e.init().put(a);f.callback(a);setInterval(f.check,100)},
check:function(){var a=e.get(),d=b.get();d!=a&&(d==f._appState?(f._appState=a,b.put(a),f.callback(a)):(f._appState=d,e.put(d),f.callback(d)))},load:function(a){a!=f._appState&&(b.put(a),e.put(a),f._appState=a,f.callback(a))}},hashchangeEvent:{_init:function(){f.callback(b.get());a(window).bind("hashchange",f.check)},check:function(){f.callback(b.get())},load:function(a){b.put(a)}}},f=a.extend({},d.base);f.type=a.browser.msie&&(8>a.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in
window?"hashchangeEvent":"timer";a.extend(f,d[f.type]);a.history=f})(jQuery);
(function(a){a.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:0.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(c,b,e){null==b&&(b="Alert");a.alerts._show(b,c,null,"alert",function(a){e&&e(a)})},confirm:function(c,b,e){null==b&&(b="Confirm");a.alerts._show(b,c,null,"confirm",function(a){e&&e(a)})},prompt:function(c,b,e,d){null==e&&(e="Prompt");a.alerts._show(e,c,b,"prompt",function(a){d&&
d(a)})},_show:function(c,b,e,d,f){a.alerts._hide();a.alerts._overlay("show");a("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_icon"></div><div id="popup_message"></div></div></div>');a.alerts.dialogClass&&a("#popup_container").addClass(a.alerts.dialogClass);var g=a.browser.msie&&6>=parseInt(a.browser.version)?"absolute":"fixed";a("#popup_container").css({position:g,zIndex:99999,padding:0,margin:0});a("#popup_title").text(c);a("#popup_content").addClass(d);
a("#popup_message").text(b);a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />"));a("#popup_container").css({minWidth:a("#popup_container").outerWidth(),maxWidth:a("#popup_container").outerWidth()});a.alerts._reposition();a.alerts._maintainPosition(!0);switch(d){case "alert":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f(!0)});a("#popup_ok").focus().keypress(function(b){(13==
b.keyCode||27==b.keyCode)&&a("#popup_ok").trigger("click")});break;case "confirm":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f&&f(!0)});a("#popup_cancel").click(function(){a.alerts._hide();f&&f(!1)});a("#popup_ok").focus();a("#popup_ok, #popup_cancel").keypress(function(b){13==b.keyCode&&a("#popup_ok").trigger("click");
27==b.keyCode&&a("#popup_cancel").trigger("click")});break;case "prompt":a("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>"),a("#popup_prompt").width(a("#popup_message").width()),a("#popup_ok").click(function(){var b=a("#popup_prompt").val();a.alerts._hide();f&&f(b)}),a("#popup_cancel").click(function(){a.alerts._hide();
f&&f(null)}),a("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(b){13==b.keyCode&&a("#popup_ok").trigger("click");27==b.keyCode&&a("#popup_cancel").trigger("click")}),e&&a("#popup_prompt").val(e),a("#popup_prompt").focus().select()}if(a.alerts.draggable)try{a("#popup_container").draggable({handle:a("#popup_title")}),a("#popup_title").css({cursor:"move"})}catch(h){}},_hide:function(){a("#popup_container").remove();a.alerts._overlay("hide");a.alerts._maintainPosition(!1)},_overlay:function(c){switch(c){case "show":a.alerts._overlay("hide");
a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});break;case "hide":a("#popup_overlay").remove()}},_reposition:function(){var c=a(window).height()/2-a("#popup_container").outerHeight()/2+a.alerts.verticalOffset,b=a(window).width()/2-a("#popup_container").outerWidth()/2+a.alerts.horizontalOffset;0>c&&(c=0);0>b&&(b=
0);a.browser.msie&&6>=parseInt(a.browser.version)&&(c+=a(window).scrollTop());a("#popup_container").css({top:c+"px",left:b+"px"});a("#popup_overlay").height(a(document).height())},_maintainPosition:function(c){if(a.alerts.repositionOnResize)switch(c){case !0:a(window).bind("resize",a.alerts._reposition);break;case !1:a(window).unbind("resize",a.alerts._reposition)}}};jAlert=function(c,b,e){a.alerts.alert(c,b,e)};jConfirm=function(c,b,e){a.alerts.confirm(c,b,e)};jPrompt=function(c,b,e,d){a.alerts.prompt(c,
b,e,d)}})(jQuery);
(function(a){function c(){}function b(){}function e(){}function d(a,b){"string"===typeof b&&(b=b.split("."));var c=b.join(".").replace(/\.(\w)/g,function(a,b){return b.toUpperCase()}),f=b.shift();if(typeof(c=a[c])==j)if(typeof(c=a[f])!=j&&0<b.length)c=d(c,b);return c}function f(){function a(b,f){c.bind(b,function(){return f.apply(d,arguments)})}var b=i.apply(arguments),d=this,c=1===b.length?d:b.shift(),f,b=b[0]||{};for(f in b)a(f,b[f])}function g(a,b){return{input:a,form:b}}var h=(window.JSON||{}).stringify,
i=Array.prototype.slice,j="undefined",k={itemManager:b,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};h||(h=function(){alert("JSON.stringify() not found")});p=b.prototype;p.init=function(){};p.filter=function(a,b){var d=[],c,f;for(c=0;c<a.length;c++)f=a[c],this.itemContains(f,b)&&d.push(f);return d};p.itemContains=
function(a,b){return 0==this.itemToString(a).toLowerCase().indexOf(b.toLowerCase())};p.stringToItem=function(a){return a};p.itemToString=function(a){return a};p.compareItems=function(a,b){return a==b};p=c.prototype;p.init=function(b,d){var c=this,f,e,g;c._defaults=a.extend({},k);c._opts=d||{};c._plugins={};c._itemManager=e=new (c.opts("item.manager"));b=a(b);g=a(c.opts("html.wrap"));f=a(c.opts("html.hidden"));b.wrap(g).keydown(function(a){return c.onKeyDown(a)}).keyup(function(a){return c.onKeyUp(a)}).data("textext",
c);a(c).data({hiddenInput:f,wrapElement:b.parents(".text-wrap").first(),input:b});f.attr("name",b.attr("name"));b.attr("name",null);f.insertAfter(b);a.extend(!0,e,c.opts("ext.item.manager"));a.extend(!0,c,c.opts("ext.*"),c.opts("ext.core"));c.originalWidth=b.outerWidth();c.invalidateBounds();e.init(c);c.initPatches();c.initPlugins(c.opts("plugins"),a.fn.textext.plugins);c.on({setFormData:c.onSetFormData,getFormData:c.onGetFormData,setInputData:c.onSetInputData,anyKeyUp:c.onAnyKeyUp});c.trigger("postInit");
c.trigger("ready");c.getFormData(0)};p.initPatches=function(){var b=[],d=a.fn.textext.patches,c;for(c in d)b.push(c);this.initPlugins(b,d)};p.initPlugins=function(b,d){var c,f,e=[],g;"string"==typeof b&&(b=b.split(/\s*,\s*|\s+/g));for(g=0;g<b.length;g++)if(c=b[g],f=d[c])this._plugins[c]=f=new f,this[c]=function(a){return function(){return a}}(f),e.push(f),a.extend(!0,f,this.opts("ext.*"),this.opts("ext."+c));e.sort(function(a,b){a=a.initPriority();b=b.initPriority();return a===b?0:a<b?1:-1});for(g=
0;g<e.length;g++)e[g].init(this)};p.hasPlugin=function(a){return!!this._plugins[a]};p.on=f;p.bind=function(a,b){this.input().bind(a,b)};p.trigger=function(){var a=arguments;this.input().trigger(a[0],i.call(a,1))};p.itemManager=function(){return this._itemManager};p.input=function(){return a(this).data("input")};p.opts=function(a){var b=d(this._opts,a);return"undefined"==typeof b?d(this._defaults,a):b};p.wrapElement=function(){return a(this).data("wrapElement")};p.invalidateBounds=function(){var a=
this.input(),b=this.wrapElement(),d=b.parent(),c=this.originalWidth,f;this.trigger("preInvalidate");f=a.outerHeight();a.outerWidth(c);b.width(c).height(f);d.height(f);this.trigger("postInvalidate")};p.focusInput=function(){this.input()[0].focus()};p.serializeData=h;p.hiddenInput=function(){return a(this).data("hiddenInput")};p.getWeightedEventResponse=function(a,b){var d={},c=0;this.trigger(a,d,b);for(var f in d)c=Math.max(c,f);return d[c]};p.getFormData=function(a){a=this.getWeightedEventResponse("getFormData",
a||0);this.trigger("setFormData",a.form);this.trigger("setInputData",a.input)};p.onAnyKeyUp=function(a,b){this.getFormData(b)};p.onSetInputData=function(a,b){this.input().val(b)};p.onSetFormData=function(a,b){this.hiddenInput().val(this.serializeData(b))};p.onGetFormData=function(a,b){var d=this.input().val();b[0]=g(d,d)};a(["Down","Up"]).each(function(){var a=this.toString();p["onKey"+a]=function(b){var d=this.opts("keys")[b.keyCode],c=!0;if(d&&(c="!"!=d.substr(-1),d=d.replace("!",""),this.trigger(d+
"Key"+a),"Up"==a&&this._lastKeyDown==b.keyCode&&(this._lastKeyDown=null,this.trigger(d+"KeyPress")),"Down"==a))this._lastKeyDown=b.keyCode;this.trigger("anyKey"+a,b.keyCode);return c}});p=e.prototype;p.on=f;p.formDataObject=g;p.init=function(){throw Error("Not implemented");};p.baseInit=function(b,d){b._defaults=a.extend(!0,b._defaults,d);this._core=b;this._timers={}};p.startTimer=function(a,b,d){var c=this;c.stopTimer(a);c._timers[a]=setTimeout(function(){delete c._timers[a];d.apply(c)},1E3*b)};
p.stopTimer=function(a){clearTimeout(this._timers[a])};p.core=function(){return this._core};p.opts=function(a){return this.core().opts(a)};p.itemManager=function(){return this.core().itemManager()};p.input=function(){return this.core().input()};p.val=function(a){var b=this.input();if(typeof a===j)return b.val();b.val(a)};p.trigger=function(){var a=this.core();a.trigger.apply(a,arguments)};p.bind=function(a,b){this.core().bind(a,b)};p.initPriority=function(){return 0};var n=!1,o=a.fn.textext=function(b){var d;
if(!n&&null!=(d=a.fn.textext.css))a("head").append("<style>"+d+"</style>"),n=!0;return this.map(function(){var d=a(this);if(null==b)return d.data("textext");var f=new c;f.init(d,b);d.data("textext",f);return f.input()[0]})};o.addPlugin=function(a,b){o.plugins[a]=b;b.prototype=new o.TextExtPlugin};o.addPatch=function(a,b){o.patches[a]=b;b.prototype=new o.TextExtPlugin};o.TextExt=c;o.TextExtPlugin=e;o.ItemManager=b;o.plugins={};o.patches={}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtIE9Patches=c;a.fn.textext.addPatch("ie9",c);a=c.prototype;a.init=function(a){if(-1!=navigator.userAgent.indexOf("MSIE 9"))a.on({postInvalidate:this.onPostInvalidate})};a.onPostInvalidate=function(){var a=this.input(),c=a.val();a.val(Math.random());a.val(c)}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAjax=c;a.fn.textext.addPlugin("ajax",c);var b=c.prototype,e={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:!1,dataCallback:null}};b.init=function(a){this.baseInit(a,e);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};b.load=function(b){var c=this,g=c.opts("ajax.data.callback")||function(a){return{q:a}},g=a.extend(!0,{data:g(b),success:function(a){c.onComplete(a,b)},error:function(a,c){console.error(c,
b)}},c.opts("ajax"));a.ajax(g)};b.onComplete=function(a,b){var c=a;this.dontShowLoading();!0==this.opts("ajax.cache.results")&&(this._suggestions=a,c=this.itemManager().filter(a,b));this.trigger("setSuggestions",{result:c})};b.dontShowLoading=function(){this.stopTimer("loading")};b.showLoading=function(){var a=this;a.dontShowLoading();a.startTimer("loading",a.opts("ajax.loading.delay"),function(){a.trigger("showDropdown",function(b){b.clearItems();b.addDropdownItem(a.opts("ajax.loading.message")).addClass("text-loading")})})};
b.onGetSuggestions=function(a,b){var c=this,e=c._suggestions,i=(b||{}).query||"";if(e&&!0===c.opts("ajax.cache.results"))return c.onComplete(e,i);c.startTimer("ajax",c.opts("ajax.type.delay"),function(){c.showLoading();c.load(i)})}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtArrow=c;a.fn.textext.addPlugin("arrow",c);var b=c.prototype,e={html:{arrow:'<div class="text-arrow"/>'}};b.init=function(b){var c=this;c.baseInit(b,e);c._arrow=b=a(c.opts("html.arrow"));c.core().wrapElement().append(b);b.bind("click",function(a){c.onArrowClick(a)})};b.onArrowClick=function(){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtAutocomplete=c;a.fn.textext.addPlugin("autocomplete",c);var b=c.prototype,e={autocomplete:{enabled:!0,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};b.init=function(b){var c=this;c.baseInit(b,e);var b=c.input(),g;!0===c.opts("autocomplete.enabled")&&(c.on({blur:c.onBlur,anyKeyUp:c.onAnyKeyUp,deleteKeyUp:c.onAnyKeyUp,
backspaceKeyPress:c.onBackspaceKeyPress,enterKeyPress:c.onEnterKeyPress,escapeKeyPress:c.onEscapeKeyPress,setSuggestions:c.onSetSuggestions,showDropdown:c.onShowDropdown,hideDropdown:c.onHideDropdown,toggleDropdown:c.onToggleDropdown,postInvalidate:c.positionDropdown,getFormData:c.onGetFormData,downKeyDown:c.onDownKeyDown,upKeyDown:c.onUpKeyDown}),g=a(c.opts("html.dropdown")),g.insertAfter(b),c.on(g,{mouseover:c.onMouseOver,mousedown:c.onMouseDown,click:c.onClick}),g.css("maxHeight",c.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+
c.opts("autocomplete.dropdown.position")),a(c).data("container",g),a(document.body).click(function(a){c.isDropdownVisible()&&!c.withinWrapElement(a.target)&&c.trigger("hideDropdown")}),c.positionDropdown())};b.containerElement=function(){return a(this).data("container")};b.onMouseOver=function(b){b=a(b.target).closest(".text-suggestion");b.is(".text-suggestion")&&(this.clearSelected(),b.addClass("text-selected"))};b.onMouseDown=function(){this.containerElement().data("mousedownOnAutocomplete",!0)};
b.onClick=function(b){b=a(b.target).closest(".text-label");(b.is(".text-suggestion")||b.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};b.onBlur=function(){var a=this.containerElement(),b=!0===a.data("mousedownOnAutocomplete");this.isDropdownVisible()&&(b?this.core().focusInput():this.trigger("hideDropdown"));a.removeData("mousedownOnAutocomplete")};b.onBackspaceKeyPress=function(){(0<this.val().length||this.isDropdownVisible())&&this.getSuggestions()};
b.onAnyKeyUp=function(a,b){var c=null!=this.opts("keys."+b);0<this.val().length&&!c&&this.getSuggestions()};b.onDownKeyDown=function(){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};b.onUpKeyDown=function(){this.togglePreviousSuggestion()};b.onEnterKeyPress=function(){this.isDropdownVisible()&&this.selectFromDropdown()};b.onEscapeKeyPress=function(){this.isDropdownVisible()&&this.trigger("hideDropdown")};b.positionDropdown=function(){var a=this.containerElement(),b=this.opts("autocomplete.dropdown.position"),
c=this.core().wrapElement().outerHeight(),e={};e["above"===b?"bottom":"top"]=c+"px";a.css(e)};b.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};b.setSelectedSuggestion=function(b){if(b){var c=this.suggestionElements(),e=c.first(),h,i;this.clearSelected();for(i=0;i<c.length;i++)if(h=a(c[i]),this.itemManager().compareItems(h.data("text-suggestion"),b)){e=h.addClass("text-selected");break}e.addClass("text-selected");this.scrollSuggestionIntoView(e)}};b.selectedSuggestionElement=
function(){return this.suggestionElements().filter(".text-selected").first()};b.isDropdownVisible=function(){return!0===this.containerElement().is(":visible")};b.onGetFormData=function(a,b){var c=this.val();b[100]=this.formDataObject(c,c)};b.initPriority=function(){return 200};b.onHideDropdown=function(){this.hideDropdown()};b.onToggleDropdown=function(){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};b.onShowDropdown=function(b,c){var e=this.selectedSuggestionElement().data("text-suggestion");
if(!this._suggestions)return this.trigger("getSuggestions");a.isFunction(c)?c(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());this.showDropdown(this.containerElement());this.setSelectedSuggestion(e)};b.onSetSuggestions=function(a,b){var c=this._suggestions=b.result;!1!==b.showHideDropdown&&this.trigger(null===c||0===c.length?"hideDropdown":"showDropdown")};b.getSuggestions=function(){var a=this.val();this._previousInputValue!=a&&(""==a&&(current=null),this._previousInputValue=
a,this.trigger("getSuggestions",{query:a}))};b.clearItems=function(){this.containerElement().find(".text-list").children().remove()};b.renderSuggestions=function(b){var c=this;c.clearItems();a.each(b||[],function(a,b){c.addSuggestion(b)})};b.showDropdown=function(){this.containerElement().show()};b.hideDropdown=function(){var a=this.containerElement();this._previousInputValue=null;a.hide()};b.addSuggestion=function(a){var b=this.opts("autocomplete.render");this.addDropdownItem(b?b.call(this,a):this.itemManager().itemToString(a)).data("text-suggestion",
a)};b.addDropdownItem=function(b){var c=this.containerElement().find(".text-list"),e=a(this.opts("html.suggestion"));e.find(".text-label").html(b);c.append(e);return e};b.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};b.toggleNextSuggestion=function(){var a=this.selectedSuggestionElement(),b;0<a.length?(b=a.next(),0<b.length&&a.removeClass("text-selected")):b=this.suggestionElements().first();b.addClass("text-selected");this.scrollSuggestionIntoView(b)};b.togglePreviousSuggestion=
function(){var a=this.selectedSuggestionElement().prev();0!=a.length&&(this.clearSelected(),a.addClass("text-selected"),this.scrollSuggestionIntoView(a))};b.scrollSuggestionIntoView=function(a){var b=a.outerHeight(),c=this.containerElement(),e=c.innerHeight(),i=c.scrollTop(),a=(a.position()||{}).top,j=null,k=parseInt(c.css("paddingTop"));null!=a&&(a+b>e&&(j=a+i+b-e+k),0>a&&(j=a+i-k),null!=j&&c.scrollTop(j))};b.selectFromDropdown=function(){var a=this.selectedSuggestionElement().data("text-suggestion");
a&&(this.val(this.itemManager().itemToString(a)),this.core().getFormData());this.trigger("hideDropdown")};b.withinWrapElement=function(a){return 0<this.core().wrapElement().find(a).size()}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFilter=c;a.fn.textext.addPlugin("filter",c);var a=c.prototype,b={filter:{enabled:!0,items:null}};a.init=function(a){this.baseInit(a,b);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};a.onGetFormData=function(a,b){var c=this.val(),g="";this.core().hasPlugin("tags")||(this.isValueAllowed(c)&&(g=c),b[300]=this.formDataObject(c,g))};a.isValueAllowed=function(a){var b=
this.opts("filterItems")||this._suggestions||[],c=this.itemManager(),g=!this.opts("filter.enabled"),h;for(h=0;h<b.length&&!g;h++)c.compareItems(a,b[h])&&(g=!0);return g};a.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)};a.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtFocus=c;a.fn.textext.addPlugin("focus",c);var a=c.prototype,b={html:{focus:'<div class="text-focus"/>'}};a.init=function(a){this.baseInit(a,b);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};a.onBlur=function(){var a=this;clearTimeout(a._timeoutId);a._timeoutId=setTimeout(function(){a.getFocus().hide()},100)};a.onFocus=function(){clearTimeout(this._timeoutId);this.getFocus().show()};
a.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtPrompt=c;a.fn.textext.addPlugin("prompt",c);var b=c.prototype,e={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};b.init=function(b){var c;this.baseInit(b,e);c=a(this.opts("html.prompt"));a(this).data("container",c);this.core().wrapElement().append(c);this.setPrompt(this.opts("prompt"));(c=b.input().attr("placeholder"))||(c=this.opts("prompt"));b.input().attr("placeholder","");c&&this.setPrompt(c);0<a.trim(this.val()).length&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};b.onPostInit=function(){this.invalidateBounds()};b.onPostInvalidate=function(){this.invalidateBounds()};b.invalidateBounds=function(){var a=this.input();this.containerElement().css({paddingLeft:a.css("paddingLeft"),paddingTop:a.css("paddingTop")})};b.onBlur=function(){var a=this;a.startTimer("prompt",0.1,function(){a.showPrompt()})};b.showPrompt=function(){var b=this.input();0===a.trim(this.val()).length&&
!b.is(":focus")&&this.containerElement().removeClass("text-hide-prompt")};b.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};b.onFocus=function(){this.hidePrompt()};b.setPrompt=function(a){this.containerElement().text(a)};b.containerElement=function(){return a(this).data("container")}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtSuggestions=c;a.fn.textext.addPlugin("suggestions",c);var a=c.prototype,b={suggestions:null};a.init=function(a){this.baseInit(a,b);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};a.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:!1!=b})};a.onPostInit=function(){this.setSuggestions(this.opts("suggestions"),!1)};a.onGetSuggestions=function(a,b){var c=this.opts("suggestions");c.sort();this.setSuggestions(this.itemManager().filter(c,
b.query))}})(jQuery);
(function(a){function c(){}a.fn.textext.TextExtTags=c;a.fn.textext.addPlugin("tags",c);var b=c.prototype,e="text-tag",d="."+e,f=".text-label",g={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};b.init=function(b){this.baseInit(b,g);var b=this.input(),c;this.opts("tags.enabled")&&(c=a(this.opts("html.tags")),b.after(c),a(this).data("container",c),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(c,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(b,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(b.css("paddingLeft")||0),top:parseInt(b.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};b.containerElement=function(){return a(this).data("container")};b.onPostInit=function(){this.addTags(this.opts("tags.items"))};
b.onGetFormData=function(a,b,c){a=13===c?"":this.val();b[200]=this.formDataObject(a,this._formData)};b.initPriority=function(){return 100};b.onInputMouseMove=function(a){this.toggleZIndex(a)};b.onContainerMouseMove=function(a){this.toggleZIndex(a)};b.onBackspaceKeyDown=function(){var a=this.tagElements().last();0==this.val().length&&this.removeTag(a)};b.onPreInvalidate=function(){var a=this.tagElements().last(),b=a.position();0<a.length?b.left+=a.innerWidth():b=this._originalPadding;this._paddingBox=
b;this.input().css({paddingLeft:b.left,paddingTop:b.top})};b.onClick=function(b){function c(a,b){o.data(e,a);o.find(f).text(g.itemManager().itemToString(a));g.updateFormCache();k.getFormData();k.invalidateBounds();b&&k.focusInput()}var g=this,k=g.core(),b=a(b.target),n=0,o;b.is(".text-tags")?n=1:b.is(".text-remove")?(g.removeTag(b.parents(d+":first")),n=1):b.is(f)&&(o=b.parents(d+":first"),g.trigger("tagClick",o,o.data(e),c));n&&k.focusInput()};b.onEnterKeyPress=function(){var a=this.val(),a=this.itemManager().stringToItem(a);
this.isTagAllowed(a)&&(this.addTags([a]),this.core().focusInput())};b.updateFormCache=function(){var b=[];this.tagElements().each(function(){b.push(a(this).data(e))});this._formData=b};b.toggleZIndex=function(a){var b=this.input().offset(),c=a.clientX-b.left,d=a.clientY-b.top,f=this._paddingBox,a=this.containerElement(),b=a.is(".text-tags-on-top"),c=c>f.left&&d>f.top;if(!b&&!c||b&&c)a[(!b?"add":"remove")+"Class"]("text-tags-on-top")};b.tagElements=function(){return this.containerElement().find(d)};
b.isTagAllowed=function(a){a={tag:a,result:!0};this.trigger("isTagAllowed",a);return!0===a.result};b.addTags=function(a){if(a&&0!=a.length){var b=this.core(),c=this.containerElement(),d,f;for(d=0;d<a.length;d++)(f=a[d])&&this.isTagAllowed(f)&&c.append(this.renderTag(f));this.updateFormCache();b.getFormData();b.invalidateBounds()}};b.getTagElement=function(b){var c=this.tagElements(),d,f;for(d=0;d<c.length,f=a(c[d]);d++)if(this.itemManager().compareItems(f.data(e),b))return f};b.removeTag=function(b){var c=
this.core(),d;b instanceof a?(d=b,b.data(e)):d=this.getTagElement(b);d.remove();this.updateFormCache();c.getFormData();c.invalidateBounds()};b.renderTag=function(b){var c=a(this.opts("html.tag"));c.find(".text-label").text(this.itemManager().itemToString(b));c.data(e,b);return c}})(jQuery);
(function(a,c){"$:nomunge";var b=a.jQuery||a.Cowboy||(a.Cowboy={}),e;b.throttle=e=function(a,f,e,h){function i(){function b(){k=+new Date;e.apply(v,D)}function i(){j=c}var v=this,t=+new Date-k,D=arguments;h&&!j&&b();j&&clearTimeout(j);h===c&&t>a?b():!0!==f&&(j=setTimeout(h?i:b,h===c?a-t:a))}var j,k=0;"boolean"!==typeof f&&(h=e,e=f,f=c);b.guid&&(i.guid=e.guid=e.guid||b.guid++);return i};b.debounce=function(a,b,g){return g===c?e(a,b,!1):e(a,g,!1!==b)}})(this);
MessageBundle={en:{"ajax.loading":"loading...","ajax.error":"network error,please try later",required:"please input value","selection.required":"please select",phone:"please input valid phone number",email:"please input valid email",regex:"please input valid value",integer:"must be a integer","integer.positive":"must be a positive integer","double":"must be a decimal","double.positive":"must be a positive decimal","save.and.create":"save and add","no.selection":"no selection","no.modification":"no modification",
select:"please select","confirm.delete":"are sure to delete?","confirm.save":"are sure to save?","confirm.exit":"you have unsaved modification,are sure to exit?"},"zh-cn":{"ajax.loading":"\u6b63\u5728\u52a0\u8f7d...","ajax.error":"\u9519\u8bef,\u8bf7\u7a0d\u540e\u518d\u8bd5",required:"\u8bf7\u586b\u5199","selection.required":"\u8bf7\u9009\u62e9",email:"email\u4e0d\u5408\u6cd5",regex:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u683c\u5f0f",phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u53f7\u7801",integer:"\u8bf7\u586b\u5199\u6574\u6570",
"integer.positive":"\u8bf7\u586b\u5199\u6b63\u6574\u6570","double":"\u8bf7\u586b\u5199\u6570\u5b57","double.positive":"\u8bf7\u586b\u5199\u5927\u4e8e\u96f6\u7684\u6570\u5b57","save.and.create":"\u4fdd\u5b58\u5e76\u65b0\u5efa","no.selection":"\u6ca1\u6709\u9009\u4e2d","no.modification":"\u6ca1\u6709\u66f4\u6539",add:"\u6dfb\u52a0",remove:"\u5220\u9664",browse:"\u6d4f\u89c8\u6587\u4ef6",select:"\u8bf7\u9009\u62e9",pick:"\u8bf7\u6311\u9009",save:"\u4fdd\u5b58",restore:"\u8fd8\u539f",cancel:"\u53d6\u6d88",
error:"\u9519\u8bef",success:"\u64cd\u4f5c\u6210\u529f",confirm:"\u786e\u5b9a","confirm.delete":"\u786e\u5b9a\u8981\u5220\u9664?","confirm.save":"\u786e\u5b9a\u8981\u4fdd\u5b58?","confirm.exit":"\u6709\u6539\u52a8\u672a\u4fdd\u5b58,\u786e\u5b9a\u8981\u79bb\u5f00?","true":"\u662f","false":"\u5426"},get:function(){var a=arguments[0],c=MessageBundle.lang(),c=MessageBundle[c][a];"undefined"==typeof c&&(c=a);for(a=1;a<arguments.length;a++)c=c.replace("{"+a+"}",arguments[a]);return c},lang:function(){var a=
(navigator.language||navigator.browserLanguage||"").toLowerCase();MessageBundle[a]||(a="en");return a},shortLang:function(){var a=MessageBundle.lang(),c=a.indexOf("-");0<c&&(a=a.substring(0,c));return a}};var MODERN_BROWSER=!$.browser.msie||8<$.browser.version;
(function(){var a=document.domain;if(!a.match(/^(\d+\.){3}\d+$/)){a=a.split(".");try{2<a.length&&(document.domain=a[a.length-2]+"."+a[a.length-1])}catch(c){3<a.length&&(document.domain=a[a.length-3]+"."+a[a.length-2]+"."+a[a.length-1])}}$.ajaxSettings.traditional=!0;var b=$.ajax;MODERN_BROWSER&&($.ajax=function(a){a.url=UrlUtils.makeSameOrigin(a.url);a.xhrFields={withCredentials:!0};return b(a)});if("undefined"!=typeof $.rc4EncryptStr&&"false"!=$('meta[name="pe"]').attr("content")){var e=$.param;
$.param=function(a,b){(jQuery.isArray(a)||a.jquery)&&jQuery.each(a,function(){if(/password$/.test(this.name.toLowerCase()))try{var a=$.cookie("T"),a=a.substring(15,25);this.value=$.rc4EncryptStr(encodeURIComponent(this.value+a),a)}catch(b){}});return e(a,b)}}})();
Indicator={text:"",show:function(a){$("#indicator").length||$('<div id="indicator"></div>').appendTo(document.body);var c=$("#indicator");a&&c.hasClass("loading")&&c.removeClass("loading");!a&&!c.hasClass("loading")&&c.addClass("loading");c.html(Indicator.text||MessageBundle.get("ajax.loading"));c.show();Indicator.text=""},showError:function(){Indicator.text=MessageBundle.get("ajax.error");Indicator.show(!0)},hide:function(){Indicator.text="";$("#indicator")&&$("#indicator").hide()}};
UrlUtils={extractDomain:function(a){if(UrlUtils.isAbsolute(a)){var a=a.replace(/:\d+/,""),a=a.substring(a.indexOf("://")+3),c=a.indexOf("/");0<c&&(a=a.substring(0,c));return a}return document.location.hostname},isSameDomain:function(a,c){var c=c||document.location.href,b=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(c);return b==e},isSameOrigin:function(a,c){var c=c||document.location.href,b=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(c);if($.browser.msie&&b!=e)return!1;b=b.split(".");
e=e.split(".");return b[b.length-1]==e[e.length-1]&&b[b.length-2]==e[e.length-2]},makeSameOrigin:function(a,c){c=c||document.location.href;return UrlUtils.isSameOrigin(a,c)?a:c.substring(0,c.indexOf("/",c.indexOf("://")+3))+CONTEXT_PATH+"/webproxy/"+a},isAbsolute:function(a){if(!a)return!1;a=a.indexOf("://");return 4==a||5==a},absolutize:function(a){if(UrlUtils.isAbsolute(a))return a;var c=document.location.href,b=c.indexOf("://");return 0==a.length||0==a.indexOf("/")?c.substring(0,c.indexOf("/",
b+3))+CONTEXT_PATH+a:c.substring(0,c.lastIndexOf("/")+1)+a}};
Message={compose:function(a,c){return'<div class="'+c+'"><a class="close" data-dismiss="alert">&times;</a>'+a+"</div>"},showMessage:function(){Message.showActionMessage(MessageBundle.get.apply(this,arguments))},showError:function(){Message.showActionError(MessageBundle.get.apply(this,arguments))},showActionError:function(a,c){Message.showActionMessage(a,c,!0)},showActionMessage:function(a,c,b){if(a){if("string"==typeof a){var e=[];e.push(a);a=e}for(var e="",d=0;d<a.length;d++)e+=Message.compose(a[d],
b?"action-error alert alert-error":"action-message alert alert-info");e&&(a=$("#content"),b&&(c&&$(c).parents("#_window_").length)&&(a=$("#_window_")),$("#message",a).length||$('<div id="message"></div>').prependTo(a),a=$("#message",a),b&&(c&&"FORM"==$(c).prop("tagName"))&&($(c).attr("id")||$(c).attr("id","form"+(new Date).getTime()),b=$(c).attr("id"),0==$("#"+b+"_message").length&&$('<div id="'+b+'_message"></div>').insertBefore(c),a=$("#"+b+"_message")),a.html(e),$("html,body").animate({scrollTop:a.offset().top-
20},100))}},showFieldError:function(a,c,b){c=c||MessageBundle.get(b);if(a&&$(a).length)if(a=$(a),b=a.closest(".control-group"),b.addClass("error"),$(".field-error",a.parent()).remove(),$(a).is(":visible")){c=$('<div class="field-error removeonclick"><div class="field-error-content">'+c+"</div><div>").insertAfter(a);$('<div class="field-error-arrow"/>').html('<div class="line10"><\!-- --\></div><div class="line9"><\!-- --\></div><div class="line8"><\!-- --\></div><div class="line7"><\!-- --\></div><div class="line6"><\!-- --\></div><div class="line5"><\!-- --\></div><div class="line4"><\!-- --\></div><div class="line3"><\!-- --\></div><div class="line2"><\!-- --\></div><div class="line1"><\!-- --\></div>').appendTo(c);
var e=a.width(),d=c.height(),b=a.position().top,a=a.position().left+e-30;c.css({top:b+"px",left:a+"px",marginTop:-d+"px",opacity:0});c.animate({opacity:0.8})}else b.length&&$(a).is('[type="hidden"]')?($(".controls span",b).text(""),$('<span class="field-error help-inline">'+c+"</span>").appendTo($(".controls",b))):Message.showActionError(c);else Message.showActionError(c)}};
Form={focus:function(a){for(var c=$(":input:visible",a).get(),b=0;b<c.length;b++)if($(".field-error",$(c[b]).parent()).length){setTimeout(function(){$(c[b]).focus()},50);break}},validate:function(a){if("FORM"!=$(a).prop("tagName")){$(a).closest(".control-group").removeClass("error");$(".field-error",$(a).parent()).fadeIn().remove();if($(a).is(":visible")||$(a).is('[type="hidden"]')&&!$(a).prop("disabled")){var c=$(a).val();if($(a).hasClass("required")&&!c)return"SELECT"==$(a).prop("tagName")?Message.showFieldError(a,
null,"selection.required"):Message.showFieldError(a,null,"required"),!1;if($(a).hasClass("email")&&c&&!c.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))return Message.showFieldError(a,null,"email"),!1;if($(a).hasClass("regex")&&c&&!c.match(RegExp($(a).data("regex"))))return Message.showFieldError(a,null,"regex"),!1;if($(a).hasClass("phone")&&c&&!c.match(/^[\d-]+$/))return Message.showFieldError(a,null,"phone"),!1;if($(a).hasClass("integer")&&c){if($(a).hasClass("positive")&&!c.match(/^[+]?\d*$/))return Message.showFieldError(a,
null,"integer.positive"),!1;if(!$(a).hasClass("positive")&&!c.match(/^[-+]?\d*$/))return Message.showFieldError(a,null,"integer"),!1}else if($(a).hasClass("double")&&c){if($(a).hasClass("positive")&&!c.match(/^[+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double.positive"),!1;if(!$(a).hasClass("positive")&&!c.match(/^[-+]?\d+(\.\d+)?$/))return Message.showFieldError(a,null,"double"),!1}}return!0}var b=!0;$(":input",a).each(function(){Form.validate(this)||(b=!1)});b||Form.focus(a);return b}};
Ajax={defaultRepacement:"content",fire:function(a,c){if(!a)return!0;var b=a[c];"undefined"==typeof b&&(b=$(a).attr(c));if("undefined"==typeof b||!b)return!0;var e=[];if(2<arguments.length)for(var d=2;d<arguments.length;d++)e[d-2]=arguments[d];var f;if("function"==typeof b)f=b.apply(a,e);else{-1<b.indexOf("return")&&(b=b.replace("return",""));a._temp=function(){return eval(b)};try{f=a._temp()}catch(g){alert(g)}}return!1==f?!1:!0},handleResponse:function(a,c){if(a){var b=!1,e=c.target;e&&$(e).parents("div.ui-dialog").length&&
(c.quiet=!0);if("string"==typeof a&&(0==a.indexOf("{")||0==a.indexOf("[")))a=$.parseJSON(a);if("string"==typeof a){0<=a.indexOf("<title>")&&0<a.indexOf("</title>")&&(Ajax.title=a.substring(a.indexOf("<title>")+7,a.indexOf("</title>")),c.replaceTitle&&(document.title=Ajax.title));for(var d={},f=(c.replacement||$(e).attr("replacement")||("FORM"==$(e).prop("tagName")?$(e).attr("id"):null)||Ajax.defaultRepacement).split(","),g=0;g<f.length;g++){var h=f[g].split(":",2);d[h[0]]=2==h.length?h[1]:h[0]}var f=
a.replace(/<script(.|\s)*?\/script>/g,""),g=$("<div/>").html(f),i;for(i in d){h=$("#"+i);i==Ajax.defaultRepacement&&!h.length&&(h=$("body"));!c.quiet&&h.length&&$("html,body").animate({scrollTop:h.offset().top-50},100);var j=g.find("#"+d[i]);j.length?h.html(j.html()):g.find("#content").length?h.html(g.find("#content").html()):g.find("body").length?h.html(g.find("body").html()):h.html(f);!c.quiet&&"undefined"!=typeof $.effects&&h.effect("highlight");_observe(h)}g.remove();Ajax.fire(e,"onsuccess",a)}else if(Ajax.jsonResult=
a,a.fieldErrors||a.actionErrors?(b=!0,c.onerror&&c.onerror.apply(window),Ajax.fire(e,"onerror",a)):(c.onsuccess&&c.onsuccess.apply(window),Ajax.fire(e,"onsuccess",a)),Message.showActionError(a.actionErrors,e),Message.showActionMessage(a.actionMessages,e),a.fieldErrors)if(e){for(i in a.fieldErrors)Message.showFieldError(e[i],a.fieldErrors[i]);Form.focus(e)}else for(i in a.fieldErrors)Message.showActionError(a.fieldErrors[i]);e&&"FORM"==e.tagName&&(setTimeout(function(){$('button[type="submit"]',e).prop("disabled",
false);Captcha.refresh()},100),!b&&$(e).hasClass("reset")&&("function"==typeof e.reset||"object"==typeof e.reset&&!e.reset.nodeType)&&e.reset());Indicator.text="";Ajax.fire(e,"oncomplete",a)}},jsonResult:null,title:""};
function ajaxOptions(a){a=a||{};a.dataType||(a.dataType="text");a.headers||(a.headers={});$.extend(a.headers,{"X-Data-Type":a.dataType});var c=a.beforeSend;a.beforeSend=function(b){c&&c(b);Indicator.text=a.indicator;Ajax.fire(null,a.onloading)};var b=a.success;a.success=function(c,d,f){Ajax.handleResponse(c,a);b&&(!c.fieldErrors&&!c.actionErrors)&&b(c,d,f)};return a}function ajax(a){$.ajax(ajaxOptions(a))}var CONTEXT_PATH=$('meta[name="context_path"]').attr("content")||"";
"undefined"==typeof Initialization&&(Initialization={});"undefined"==typeof Observation&&(Observation={});function _init(){var a=[],c;for(c in Initialization)"function"==typeof Initialization[c]&&a.push(c);a.sort();for(c=0;c<a.length;c++)Initialization[a[c]].call(this);_observe()}
function _observe(a){a||(a=document);$(".chart,form.ajax,.ajaxpanel",a).each(function(a){$(this).attr("id")||$(this).attr("id",("a"+(a+Math.random())).replace(".","").substring(0,5))});var c=[],b;for(b in Observation)"function"==typeof Observation[b]&&c.push(b);c.sort();for(b=0;b<c.length;b++)Observation[c[b]].call(this,a)}$(_init);
Initialization.common=function(){$(document).ajaxStart(function(){Indicator.show()});$(document).ajaxError(function(){Indicator.showError()});$(document).ajaxSuccess(function(a,b){Indicator.hide();var e=b.getResponseHeader("X-Redirect-To");if(e){e=UrlUtils.absolutize(e);try{var d=top.location.href;d&&UrlUtils.isSameDomain(d,e)?top.location.href=e:document.location.href=e}catch(f){document.location.href=e}}});$(".removeonclick").live("click",function(){$(this).remove()});$("input").live("keyup",$.debounce(500,
function(a){!$(this).hasClass("email")&&(!$(this).hasClass("regex")&&13!=a.keyCode)&&Form.validate(this);return!0})).live("blur",function(){Form.validate(this);return!0});$("select").live("change",function(){Form.validate(this);return!0});$(".ui-dialog-titlebar").live("dblclick",function(){Dialog.toggleMaximization($(".ui-dialog-content",$(this).closest(".ui-dialog")))});$(".popover,.tooltip").live("mouseenter",function(){$(this).remove()});$.alerts.okButton=MessageBundle.get("confirm");$.alerts.cancelButton=
MessageBundle.get("cancel");Nav.init();Nav.activate(document.location.pathname);var a=document.location.hash;a&&$(".nav-tabs").each(function(){var c=!1;$('a[data-toggle="tab"]',this).each(function(){var b=$(this);if(!c){var e=b.attr("data-target");e||(e=(e=b.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));e==a&&(c=!0,b.tab("show"),$target=$(e),$target.hasClass("ajaxpanel")&&$target.removeClass("manual"))}})});-1!=document.location.search.indexOf("printpage=true")&&(window.print(),window.close())};
var HISTORY_ENABLED=MODERN_BROWSER&&("undefined"!=typeof history.pushState||"undefined"!=typeof $.history)&&"false"!=$('meta[name="history_enabled"]').attr("content");
if(HISTORY_ENABLED){var SESSION_HISTORY_SUPPORT="undefined"!=typeof history.pushState&&0!=document.location.hash.indexOf("#!/"),_historied_=!1;Initialization.history=function(){if(SESSION_HISTORY_SUPPORT){var a=document.location.href;history.replaceState({url:a},"",a);window.onpopstate=function(a){var b=document.location.href;a.state&&ajax({url:b,replaceTitle:!0,replacement:a.state.replacement,cache:!1,success:function(){Nav.activate(b)},headers:{"X-Fragment":"_"}})}}else $.history.init(function(a){if(!(!a&&
!_historied_||a&&0>a.indexOf("!"))){var b=document.location.href;0<b.indexOf("#")&&(b=b.substring(0,b.indexOf("#")));a.length&&(a=a.substring(1),UrlUtils.isSameDomain(a)&&CONTEXT_PATH&&(a=CONTEXT_PATH+a),b=a);_historied_=!0;ajax({url:b,cache:!0,replaceTitle:!0,success:function(){Nav.activate(b)},headers:{"X-Fragment":"_"}})}},{unescape:!0})}}
Observation.common=function(a){$(".controls .field-error",a).each(function(){var a=$(this).text(),b=$(":input",$(this).parent());$(this).remove();Message.showFieldError(b,a)});var c="FORM"==$(a).prop("tagName")&&$(a).hasClass("focus")?a:$(".focus:eq(0)",a);if("FORM"!=c.prop("tagName")&&c.attr("name"))c.focus();else for(var c=$(":input:visible",c).toArray(),b=0;b<c.length;b++){var e=$(c[b]);if(e.attr("name")&&!e.val()){e.focus();break}}$("form",a).each(function(){$(this).hasClass("ajax")||$(this).submit(function(){$(".action-error").remove();
return Form.validate(this)})});$('input[type="text"]',a).each(function(){$(this).attr("autocomplete")||$(this).attr("autocomplete","off");var a=$(this).attr("maxlength");if(!a||3E3<a)$(this).hasClass("date")?$(this).attr("maxlength","10"):$(this).hasClass("integer")?$(this).attr("maxlength","11"):$(this).hasClass("double")?$(this).attr("maxlength","22"):$(this).attr("maxlength","255")});$(".linkage",a).each(function(){var a=$(this);a.data("originalclass",a.attr("class"));var b=$(".linkage_switch",
a);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val());b.change(function(){var a=$(this).closest(".linkage"),b=$(this);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val())})});$(":input.conjunct",a).change(function(){var a=$(this),b=$(this).closest("form"),c=$(':input[type=hidden][name$=".id"]',
b),b=b.attr("action"),b=-1<b.indexOf("/")?b.substring(0,b.lastIndexOf("/"))+"/input":"input",e={};c.val()&&(e.id=c.val());e[a.attr("name")]=a.val();ajax({global:!1,quiet:!0,method:"GET",url:b,data:e,replacement:a.attr("replacement")})});!$.browser.msie&&"undefined"!=typeof $.fn.elastic&&$("textarea.elastic",a).elastic();"undefined"!=typeof $.fn.datepicker&&$("input.date",a).datepicker({dateFormat:"yy-mm-dd",zIndex:2E3});$("input.captcha",a).focus(function(){$(this).data("_captcha_")||($(this).after('<img class="captcha" src="'+
this.id+'"/>'),$("img.captcha",a).click(Captcha.refresh),$(this).data("_captcha_",!0))});"undefined"!=typeof $.fn.treeTable&&$(".treeTable",a).each(function(){$(this).treeTable({initialState:$(this).hasClass("expanded")?"expanded":"collapsed"})});"undefined"!=typeof $.fn.chosen&&$(".chosen",a).chosen({placeholder_text:MessageBundle.get("select"),no_results_text:" "});$('a[data-toggle="tab"]',a).on("shown",function(a){$this=$(a.target);a=$this.attr("data-target");a||(a=(a=$this.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,
""));$target=$(a);$target.hasClass("ajaxpanel")&&$target.trigger("load")});$(".carousel",a).each(function(){var a=$(this);a.carousel((new Function("return "+(a.data("options")||"{}")))())});$(".tiped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"top"};!a.attr("title")&&a.data("tipurl")&&a.attr("title",MessageBundle.get("ajax.loading"));a.bind(b.trigger,function(){a.hasClass("_tiped")||(a.addClass("_tiped"),$.ajax({url:a.data("tipurl"),
global:!1,dataType:"html",success:function(c){a.attr("data-original-title",c);a.tooltip(b).tooltip("show")}}))});a.is(":input")&&(b.trigger="focus",b.placement="right");a.tooltip(b)});$(".poped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"right",title:a.data("title"),content:a.data("content")};!b.content&&a.data("popurl")&&(b.title=MessageBundle.get("ajax.loading"));a.bind(b.trigger,function(){if(!a.hasClass("_poped")){a.addClass("_poped");
$.ajax({url:a.data("popurl"),global:false,dataType:"html",success:function(c){$("div.popover").remove();c.indexOf("<title>")>=0&&c.indexOf("</title>")>0&&a.attr("data-original-title",c.substring(c.indexOf("<title>")+7,c.indexOf("</title>")));c.indexOf("<body>")>=0&&c.indexOf("</body>")>0&&a.attr("data-content",c.substring(c.indexOf("<body>")+6,c.indexOf("</body>")));a.popover(b).popover("show")}})}});a.popover(b)});$(".switch",a).each(function(){var a=$(this);a.children().css("cursor","pointer").click(function(){a.children().removeClass("active").css({"font-weight":"normal"});
$(this).addClass("active").css({"font-weight":"bold"})})});"undefined"!=typeof swfobject&&($(".chart",a).each(function(){var a=$(this),b=a.attr("id"),c=a.width(),e=a.height(),i=a.attr("data");0==i.indexOf("/")&&(i=document.location.protocol+"//"+document.location.host+i);(!b||!c||!e||!i)&&alert("id,width,height,data all required");swfobject.embedSWF(CONTEXT_PATH+"/assets/images/open-flash-chart.swf",b,c,e,"9.0.0",CONTEXT_PATH+"/assets/images/expressInstall.swf",{"data-file":encodeURIComponent(i),
loading:MessageBundle.get("ajax.loading")},{wmode:"transparent"});a.data("_interval")&&clearInterval(parseInt(a.data("_interval")));a.data("interval")&&(c=setInterval(function(){a.data("quiet")?$.ajax({global:!1,url:i,dataType:"text",success:function(a){document.getElementById(b).load(a)}}):document.getElementById(b).reload(i)},parseInt(a.data("interval"))),a.data("_interval",c))}),window.save_image=function(){var a=[];a.push("<html><head><title>Charts: Export as Image</title></head><body>");$("object[data]").each(function(){a.push('<img src="data:image/png;base64,'+
this.get_img_binary()+'"/>')});a.push("</body></html>");var b=window.open("","_blank");with(b.document)write(a.join("")),b.document.close()});$("a.ajax,form.ajax",a).each(function(){var a=this,b=[],c=$(a).attr("id");typeof c!="string"&&(c="");for(var c=($(a).attr("replacement")||($(a).prop("tagName")=="FORM"?c:"")).split(","),e=0;e<c.length;e++){var i=c[e].split(":",2);(i=i.length==2?i[1]:i[0])&&b.push(i)}if(this.tagName=="FORM"){var j={beforeSubmit:function(){if(!Ajax.fire(a,"onprepare"))return false;
$(".action-error").remove();if(!Form.validate(a))return false;Indicator.text=$(a).data("indicator");$('button[type="submit"]',a).prop("disabled",true);Ajax.fire(a,"onloading")},error:function(){Form.focus(a);a&&a.tagName=="FORM"&&setTimeout(function(){$('button[type="submit"]',a).prop("disabled",false)},100);Ajax.fire(a,"onerror")},success:function(b){Ajax.handleResponse(b,{target:a})},headers:{}};$(this).hasClass("view")||$.extend(j.headers,{"X-Data-Type":"json"});b.length>0&&$.extend(j.headers,
{"X-Fragment":b.join(",")});$(this).bind("submit",function(){$(this).ajaxSubmit(j);return false})}else $(this).click(function(){if(!Ajax.fire(a,"onprepare"))return false;if(HISTORY_ENABLED&&$(this).hasClass("view")&&($(this).hasClass("history")||!$(this).attr("replacement"))){var c=this.href;if(UrlUtils.isSameDomain(c)){c=c.substring(c.indexOf("//")+2);c=c.substring(c.indexOf("/"));if(SESSION_HISTORY_SUPPORT)history.pushState({replacement:$(this).attr("replacement"),url:c},"",c);else{CONTEXT_PATH&&
(c=c.substring(CONTEXT_PATH.length));c=c.replace(/^.*#/,"");$.history.load("!"+c);return false}}}var e={url:this.href,type:$(this).attr("method")||"GET",cache:$(this).hasClass("cache"),beforeSend:function(){$(".action-error").remove();Indicator.text=$(a).data("indicator");Ajax.fire(a,"onloading")},error:function(){Ajax.fire(a,"onerror")},headers:{}},g={target:a};$(this).hasClass("view")||$.extend(e.headers,{"X-Data-Type":"json"});if(b.length>0)$.extend(e.headers,{"X-Fragment":b.join(",")});else{$.extend(e.headers,
{"X-Fragment":"_"});g.replaceTitle=true}e.success=function(a){Nav.activate(e.url);Ajax.handleResponse(a,g)};$.ajax(e);return false})})};
var Nav={init:function(){$(".nav:not(.nav-tabs) li a").live("click",function(){$("li",$(this).closest(".nav")).removeClass("active");$(this).closest("li").addClass("active")})},activate:function(a){a=UrlUtils.absolutize(a);$(".nav:not(.nav-tabs) li a").each(function(){if(this.href==a||0==a.indexOf(this.href+"?"))$("li",$(this).closest(".nav")).removeClass("active"),$(this).closest("li").addClass("active")})}},Dialog={adapt:function(a,c){if(c){var b=c.document;c.contentDocument?b=c.contentDocument:
c.contentWindow&&(b=c.contentWindow.document);$(a).dialog("option","title",b.title);$(a).dialog("option","minHeight",e);var e=$(b).height()+20;$(c).height(e)}else $(a).dialog("option","title",Ajax.title);a.dialog("option","position","center");e=a.height();600<e&&a.dialog("option","position","top");a.dialog("moveToTop")},toggleMaximization:function(a){var c=$(a).closest(".ui-dialog"),b=c.data("orginal-width");if(b)c.width(b),c.height(c.data("orginal-height")),c.removeData("orginal-width").removeData("orginal-height"),
Dialog.adapt($(a));else{c.data("orginal-width",c.width()+0.2).data("orginal-height",c.height()+0.2);var b=$(window).width()-10,e=$(window).height()-10;c.width(b);$(a).dialog("option","minHeight")<e&&c.height(e);a.dialog("option","position","top")}}};Captcha={refresh:function(){$("img.captcha").each(function(){var a=this.src,c=a.lastIndexOf("&");0<c&&(a=a.substring(0,c));this.src=a+"&"+Math.random()});$("input.captcha").val("").focus()}};
ArrayUtils={unique:function(a){if(a){for(var c=[],b={},e=0,d;null!=(d=a[e]);e++)b[d]||(c.push(d),b[d]=!0);return c}}};
Date.prototype.format=function(a,c,b){if("function"==typeof this.strftime)return this.strftime(a);var e=function(a,b){a=""+a;return 1==a.length?""+(null==b?"0":b)+a:a},d=[],f=!1,g=this.getHours(),h=12>g;null==c&&(c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));null==b&&(b="Sun Mon Tue Wed Thu Fri Sat".split(" "));var i;i=12<g?g-12:0==g?12:g;for(var j=0;j<a.length;++j){var k=a.charAt(j);if(f){switch(k){case "a":k=""+b[this.getDay()];break;case "b":k=""+c[this.getMonth()];break;case "d":k=
e(this.getDate());break;case "e":k=e(this.getDate()," ");break;case "H":k=e(g);break;case "I":k=e(i);break;case "l":k=e(i," ");break;case "m":k=e(this.getMonth()+1);break;case "M":k=e(this.getMinutes());break;case "S":k=e(this.getSeconds());break;case "y":k=e(this.getFullYear()%100);break;case "Y":k=""+this.getFullYear();break;case "p":k=h?"am":"pm";break;case "P":k=h?"AM":"PM";break;case "w":k=""+this.getDay()}d.push(k);f=!1}else"%"==k?f=!0:d.push(k)}return d.join("")};
(function(a){a.fn.checkavailable=function(){this.each(function(){var c=a(this);c.bind("checkavailable",function(){if(c.val()){var b=a("input[type=hidden]",c.closest("form")).not('[name^="__"]').add(c),e=c.attr("checkurl");e||(e=c.closest("form").prop("action"),e=e.substring(0,e.lastIndexOf("/"))+"/checkavailable");ajax({global:!1,target:c.closest("form")[0],url:e,data:b.serialize()})}}).change(function(){c.addClass("dirty")}).blur(function(){c.hasClass("dirty")&&c.trigger("checkavailable")})});return this}})(jQuery);
Observation.checkavailable=function(a){$(":input.checkavailable",a).checkavailable()};
Observation.tags=function(a){"undefined"!=typeof $.fn.textext&&(!$.browser.msie||"8"<$.browser.version)&&$("input.tags",a).each(function(){var a=$(this),b={prompt:"...",autocomplete:{dropdownMaxHeight:"200px",render:function(a){return"string"==typeof a?a:a.label?'<div value="'+a.value+'">'+a.label+"</div>":a.value}},ext:{core:{serializeData:function(a){return a.join(",")}},itemManager:{itemToString:function(a){return"string"==typeof a?a:a.value}},autocomplete:{showDropdown:function(){$(".text-suggestion",
this.containerElement()).length&&this.containerElement().show()},renderSuggestions:function(a){var b=this;b.clearItems();var c=[];$(".text-tags .text-label",b.container).each(function(){c.push($(this).text())});$.each(a||[],function(a,d){for(var e=b.itemManager().itemToString(d),k=!1,n=0;n<c.length;n++)if(c[n]==e){k=!0;break}k||b.addSuggestion(d)})}}}},e=a.val();e&&(b.tagsItems=0==e.indexOf('["')?$.parseJSON(e):e.split(","));a.attr("source")?(b.plugins="tags prompt focus autocomplete ajax arrow",
b.ajax={global:!1,url:a.attr("source"),cacheResults:!1,dataCallback:function(a){return{keyword:a}}}):b.plugins="tags prompt focus";a.val("").textext(b).bind("isTagAllowed",function(a,b){var c=[];$(".text-tags .text-label",this.container).each(function(){c.push($(this).text())});for(var e=0;e<c.length;e++)if(c[e]==b.tag){b.result=false;break}})})};
(function(a){function c(a,c,d){if("undefined"!=typeof FileReaderSync){for(var f=new BlobBuilder,g=new FileReaderSync,a=event.data,h=0;h<a.length;h++)f.append("--"),f.append(d),f.append("\r\n"),f.append("Content-Disposition: form-data; name="),f.append(c),f.append("; filename="),f.append(a[h].name),f.append("\r\n"),f.append("Content-Type: "),f.append(a[h].type),f.append("\r\n\r\n"),f.append(g.readAsArrayBuffer(a[h])),f.append("\r\n");f.append("--");f.append(d);f.append("--");return f.getBlob()}if(a[0].getAsBinary){f=
"";for(h=0;h<a.length;h++)f+="--"+d+"\r\n",f+="Content-Disposition: form-data; name="+c+"; filename="+a[h].name+"\r\n",f+="Content-Type: "+a[h].type+"\r\n\r\n",f+=a[h].getAsBinary()+"\r\n";return f+("--"+d+"--")}return null}a.ajaxupload=function(b,e){if(!b)return!1;var d={url:document.location.href,name:"file"},e=e||{};a.extend(d,e);var e=d,f;e.progress?f=a(e.progress):(f=a("#_uploadprogress"),f.length||(f=a('<progress id="_uploadprogress" style="position: fixed;z-index: 10001;left: 45%;top: 0px;width: 100px;" min="0" max="100" value="0">0</progress>').appendTo(document.body)));
var g=new XMLHttpRequest;g.open("POST",e.url);g.onreadystatechange=function(){g.readyState==4&&((g.status>=200&&g.status<=200||g.status==304)&&g.responseText!=""&&typeof e.success!="undefined")&&e.success(g)};f&&f.length&&(g.onload=function(){f.val(100).html(100).hide()},"upload"in g&&(g.upload.onprogress=function(a){if(a.lengthComputable){a=a.loaded/a.total*100|0;f.val(a).html(a).show()}}));if(window.FormData){for(var h=new FormData,d=0;d<b.length;d++)h.append(e.name,b[d]);g.send(h)}else{var i="xxxxxxxxx";
g.setRequestHeader("Content-Type","multipart/form-data, boundary="+i);!window.BlobBuilder&&window.WebKitBlobBuilder&&(window.BlobBuilder=window.WebKitBlobBuilder);if("undefined"!=typeof FileReader&&"undefined"!=typeof BlobBuilder){for(d=0;d<b.length;d++){var h=b[d],j=new FileReader;j.sourceFile=h;var k=0,i="xxxxxxxxx",n=new BlobBuilder;j.onload=function(a){var c=a.target.sourceFile,d=new BlobBuilder;d.append("--");d.append(i);d.append("\r\n");d.append("Content-Disposition: form-data; name=");d.append(e.name);
d.append("; filename=");d.append(c.name);d.append("\r\n");d.append("Content-Type: ");d.append(c.type);d.append("\r\n\r\n");d.append(a.target.result);d.append("\r\n");n.append(d.getBlob());k++;if(k==b.length){n.append("--");n.append(i);n.append("--");typeof e.beforeSend!="undefined"&&e.beforeSend();g.send(n.getBlob())}};j.readAsArrayBuffer(h)}return!0}if(n=c(b,e.name,i))return"undefined"!=typeof e.beforeSend&&e.beforeSend(),g.sendAsBinary?g.sendAsBinary(n):g.send(n),!0;g.abort()}return!1}})(jQuery);
(function(a){function c(b){b.css("min-height","100px");if(!b.hasClass("tab-pane")||!b.hasClass("cache")||!b.hasClass("loaded")){var c=b.data("url"),d={target:b[0],url:c||document.location.href,global:!1,quiet:!0,beforeSend:function(){b.data("quiet")||("undefined"!=typeof a.fn.mask?b.mask(MessageBundle.get("ajax.loading")):b.html('<div style="text-align:center;">'+MessageBundle.get("ajax.loading")+"</div>"))},complete:function(){!b.data("quiet")&&"undefined"!=typeof a.fn.unmask&&b.unmask()},success:function(c){b.addClass("loaded");
"string"!=typeof c&&(b.empty(),a.tmpl(a("#"+b.data("tmpl")),c).appendTo(b),_observe(b))}};d.replacement=c?b.attr("id")+":"+(b.attr("replacement")||"content"):b.attr("id");ajax(d)}}a.fn.ajaxpanel=function(){a(this).each(function(){var b=a(this);b.bind("load",function(){c(b)});b.data("timeout")?setTimeout(function(){c(b)},parseInt(b.data("timeout"))):b.data("interval")?setInterval(function(){c(b)},parseInt(b.data("interval"))):b.hasClass("manual")||c(b)});return this}})(jQuery);
Observation.ajaxpanel=function(a){$(".ajaxpanel",a).ajaxpanel();$(".ajaxpanel .load",a).click(function(){$(this).closest(".ajaxpanel").trigger("load")})};
