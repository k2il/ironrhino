(function(a){var b=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[],b=c[1]||"",c=c[2]||"0",e={};b&&(e[b]=!0,e.version=c);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0);a.browser=e})(jQuery,window);
jQuery.cookie=function(a,b,c){if(1<arguments.length&&(null===b||"object"!==typeof b)){c=jQuery.extend({},c);null===b&&(c.expires=-1);if("number"===typeof c.expires){var e=c.expires,d=c.expires=new Date;d.setDate(d.getDate()+e)}return document.cookie=[encodeURIComponent(a),"=",c.raw?String(b):encodeURIComponent(String(b)),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};d=c.raw?function(a){return a}:
decodeURIComponent;return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?d(e[1]):null};
(function(a){a.fn.rc4=function(c){var b=a.extend({key:null,method:"encrypt",callback:null},c);null==a.fn.rc4.ctrlrInst&&(a.fn.rc4.ctrlrInst=new a.fn.rc4.ctrlr(b));return this.each(function(){a.fn.rc4.ctrlrInst.settings=b;a.fn.rc4.ctrlrInst.container=this;a.fn.rc4.ctrlrInst.initialise(this)})};a.extend({hexEncode:function(a){for(var b=[],d=0;256>d;d++)b[d]="0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15);for(var f=[],d=0;d<a.length;d++)f[d]=b[a.charCodeAt(d)];return f.join("")},hexDecode:function(a){for(var b=
[],d=0;256>d;d++)b["0123456789abcdef".charAt(d>>4)+"0123456789abcdef".charAt(d&15)]=String.fromCharCode(d);if(!a.match(/^[a-f0-9]*$/i))return!1;a.length%2&&(a="0"+a);for(var f=[],l=0,d=0;d<a.length;d+=2)f[l++]=b[a.substr(d,2)];return f.join("")},rc4Encrypt:function(a,b){s=[];for(var d=0;256>d;d++)s[d]=d;for(var f=0,l,d=0;256>d;d++)f=(f+s[d]+a.charCodeAt(d%a.length))%256,l=s[d],s[d]=s[f],s[f]=l;for(var f=d=0,h="",j=0;j<b.length;j++)d=(d+1)%256,f=(f+s[d])%256,l=s[d],s[d]=s[f],s[f]=l,h+=String.fromCharCode(b.charCodeAt(j)^
s[(s[d]+s[f])%256]);return h},rc4Decrypt:function(c,b){return a.rc4Encrypt(c,b)},rc4EncryptStr:function(c,b){return a.hexEncode(a.rc4Encrypt(b,unescape(encodeURIComponent(c))))},rc4DecryptStr:function(c,b){return decodeURIComponent(escape(a.rc4Decrypt(b,a.hexDecode(c))))}});a.rc4={};a.fn.rc4.ctrlrInst=null;a.fn.rc4.ctrlr=function(a){this.settings=a};var b=a.fn.rc4.ctrlr;b.prototype.initialise=function(){this.settings.key&&this.settings.method&&("ENCRYPT"==a.trim(this.settings.method.toUpperCase())&&
this.setObjectValue(a.hexEncode(a.rc4Encrypt(this.settings.key,this.getObjectValue()))),"DECRYPT"==a.trim(this.settings.method.toUpperCase())&&this.setObjectValue(a.rc4Decrypt(this.settings.key,a.hexDecode(this.getObjectValue()))))};b.prototype.getObjectValue=function(){if(a.fn.rc4.ctrlrInst.container.innerHTML)return a.fn.rc4.ctrlrInst.container.innerHTML;if(a.fn.rc4.ctrlrInst.container.value)return a.fn.rc4.ctrlrInst.container.value};b.prototype.setObjectValue=function(c){a.fn.rc4.ctrlrInst.container.innerHTML&&
(a.fn.rc4.ctrlrInst.container.innerHTML=c);a.fn.rc4.ctrlrInst.container.value&&(a.fn.rc4.ctrlrInst.container.value=c)}})(jQuery);
(function(a){function b(){if(a.fn.ajaxSubmit.debug){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(c):window.opera&&window.opera.postError&&window.opera.postError(c)}}a.fn.ajaxSubmit=function(c){function e(f){function e(){function c(){try{var a=(t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document).readyState;b("state = "+a);"uninitialized"==a.toLowerCase()&&setTimeout(c,50)}catch(d){b("Server abort: ",
d," (",d.name,")"),h(z),x&&clearTimeout(x),x=void 0}}var f=l.attr("target"),g=l.attr("action");j.setAttribute("target",m);d||j.setAttribute("method","POST");g!=k.url&&j.setAttribute("action",k.url);!k.skipEncodingOverride&&(!d||/post/i.test(d))&&l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});k.timeout&&(x=setTimeout(function(){A=!0;h(C)},k.timeout));var q=[];try{if(k.extraData)for(var v in k.extraData)q.push(a('<input type="hidden" name="'+v+'">').attr("value",k.extraData[v]).appendTo(j)[0]);
k.iframeTarget||(r.appendTo("body"),t.attachEvent?t.attachEvent("onload",h):t.addEventListener("load",h,!1));setTimeout(c,15);j.submit()}finally{j.setAttribute("action",g),f?j.setAttribute("target",f):l.removeAttr("target"),a(q).remove()}}function h(d){if(!n.aborted&&!D){try{u=t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document}catch(c){b("cannot access response document: ",c),d=z}if(d===C&&n)n.abort("timeout");else if(d==z&&n)n.abort("server abort");else if(u&&
u.location.href!=k.iframeSrc||A){t.detachEvent?t.detachEvent("onload",h):t.removeEventListener("load",h,!1);d="success";var f;try{if(A)throw"timeout";var e="xml"==k.dataType||u.XMLDocument||a.isXMLDoc(u);b("isXml="+e);if(!e&&(window.opera&&(null==u.body||""==u.body.innerHTML))&&--G){b("requeing onLoad callback, DOM not available");setTimeout(h,250);return}var l=u.body?u.body:u.documentElement;n.responseText=l?l.innerHTML:null;n.responseXML=u.XMLDocument?u.XMLDocument:u;e&&(k.dataType="xml");n.getResponseHeader=
function(a){return{"content-type":k.dataType}[a]};l&&(n.status=Number(l.getAttribute("status"))||n.status,n.statusText=l.getAttribute("statusText")||n.statusText);var j=(k.dataType||"").toLowerCase(),g=/(json|script|text)/.test(j);if(g||k.textarea){var q=u.getElementsByTagName("textarea")[0];if(q)n.responseText=q.value,n.status=Number(q.getAttribute("status"))||n.status,n.statusText=q.getAttribute("statusText")||n.statusText;else if(g){var v=u.getElementsByTagName("pre")[0],y=u.getElementsByTagName("body")[0];
v?n.responseText=v.textContent?v.textContent:v.innerText:y&&(n.responseText=y.textContent?y.textContent:y.innerText)}}else"xml"==j&&(!n.responseXML&&null!=n.responseText)&&(n.responseXML=H(n.responseText));try{var e=n,l=k,m=e.getResponseHeader("content-type")||"",B="xml"===j||!j&&0<=m.indexOf("xml"),w=B?e.responseXML:e.responseText;B&&"parsererror"===w.documentElement.nodeName&&a.error&&a.error("parsererror");l&&l.dataFilter&&(w=l.dataFilter(w,j));"string"===typeof w&&("json"===j||!j&&0<=m.indexOf("json")?
w=I(w):("script"===j||!j&&0<=m.indexOf("javascript"))&&a.globalEval(w));E=w}catch(J){d="parsererror",n.error=f=J||d}}catch(F){b("error caught: ",F),d="error",n.error=f=F||d}n.aborted&&(b("upload aborted"),d=null);n.status&&(d=200<=n.status&&300>n.status||304===n.status?"success":"error");"success"===d?(k.success&&k.success.call(k.context,E,"success",n),p&&a.event.trigger("ajaxSuccess",[n,k])):d&&(void 0==f&&(f=n.statusText),k.error&&k.error.call(k.context,n,d,f),p&&a.event.trigger("ajaxError",[n,
k,f]));p&&a.event.trigger("ajaxComplete",[n,k]);p&&!--a.active&&a.event.trigger("ajaxStop");k.complete&&k.complete.call(k.context,n,d);D=!0;k.timeout&&clearTimeout(x);setTimeout(function(){k.iframeTarget||r.remove();n.responseXML=null},100)}}}var j=l[0],g,q,k,p,m,r,t,n,A,x;g=!!a.fn.prop;if(f)if(g)for(q=0;q<f.length;q++)g=a(j[f[q].name]),g.prop("disabled",!1);else for(q=0;q<f.length;q++)g=a(j[f[q].name]),g.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",j).length)alert('Error: Form elements must not have name or id of "submit".');
else if(k=a.extend(!0,{},a.ajaxSettings,c),k.context=k.context||k,m="jqFormIO"+(new Date).getTime(),k.iframeTarget?(r=a(k.iframeTarget),g=r.attr("name"),null==g?r.attr("name",m):m=g):(r=a('<iframe name="'+m+'" src="'+k.iframeSrc+'" />'),r.css({position:"absolute",top:"-1000px",left:"-1000px"})),t=r[0],n={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(d){var c="timeout"===
d?"timeout":"aborted";b("aborting upload... "+c);this.aborted=1;r.attr("src",k.iframeSrc);n.error=c;k.error&&k.error.call(k.context,n,c,d);p&&a.event.trigger("ajaxError",[n,k,c]);k.complete&&k.complete.call(k.context,n,c)}},(p=k.global)&&!a.active++&&a.event.trigger("ajaxStart"),p&&a.event.trigger("ajaxSend",[n,k]),k.beforeSend&&!1===k.beforeSend.call(k.context,n,k))k.global&&a.active--;else if(!n.aborted){if(f=j.clk)if((g=f.name)&&!f.disabled)k.extraData=k.extraData||{},k.extraData[g]=f.value,"image"==
f.type&&(k.extraData[g+".x"]=j.clk_x,k.extraData[g+".y"]=j.clk_y);var C=1,z=2;f=a("meta[name=csrf-token]").attr("content");if((g=a("meta[name=csrf-param]").attr("content"))&&f)k.extraData=k.extraData||{},k.extraData[g]=f;k.forceSync?e():setTimeout(e,10);var E,u,G=50,D,H=a.parseXML||function(a,d){window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)):d=(new DOMParser).parseFromString(a,"text/xml");return d&&d.documentElement&&"parsererror"!=d.documentElement.nodeName?
d:null},I=a.parseJSON||function(a){return window.eval("("+a+")")}}}if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;var d,f,l=this;"function"==typeof c&&(c={success:c});d=this.attr("method");f=this.attr("action");(f=(f="string"===typeof f?a.trim(f):"")||window.location.href||"")&&(f=(f.match(/^([^#]+)/)||[])[1]);c=a.extend(!0,{url:f,success:a.ajaxSettings.success,type:d||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},
c);f={};this.trigger("form-pre-serialize",[this,c,f]);if(f.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&!1===c.beforeSerialize(this,c))return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=c.traditional;void 0===h&&(h=a.ajaxSettings.traditional);var j,g=this.formToArray(c.semantic);c.data&&(c.extraData=c.data,j=a.param(c.data,h));if(c.beforeSubmit&&!1===c.beforeSubmit(g,this,c))return b("ajaxSubmit: submit aborted via beforeSubmit callback"),
this;this.trigger("form-submit-validate",[g,this,c,f]);if(f.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;f=a.param(g,h);j&&(f=f?f+"&"+j:j);"GET"==c.type.toUpperCase()?(c.url+=(0<=c.url.indexOf("?")?"&":"?")+f,c.data=null):c.data=f;var k=[];c.resetForm&&k.push(function(){l.resetForm()});c.clearForm&&k.push(function(){l.clearForm(c.includeHidden)});if(!c.dataType&&c.target){var p=c.success||function(){};k.push(function(d){var b=c.replaceTarget?"replaceWith":"html";
a(c.target)[b](d).each(p,arguments)})}else c.success&&k.push(c.success);c.success=function(a,d,b){for(var f=c.context||c,e=0,h=k.length;e<h;e++)k[e].apply(f,[a,d,b||l,l])};h=a("input:file:enabled[value]",this);j=0<h.length;f="multipart/form-data"==l.attr("enctype")||"multipart/form-data"==l.attr("encoding");h=!(!j||!h.get(0).files||!window.FormData);b("fileAPI :"+h);if(!1!==c.iframe&&(c.iframe||(j||f)&&!h))c.closeKeepAlive?a.get(c.closeKeepAlive,function(){e(g)}):e(g);else if((j||f)&&h){c.progress=
c.progress||a.noop;var m=new FormData;for(j=0;j<g.length;j++)"file"!=g[j].type&&m.append(g[j].name,g[j].value);l.find("input:file:enabled").each(function(){var d=a(this).attr("name"),c=this.files;if(d)for(var b=0;b<c.length;b++)m.append(d,c[b])});if(c.extraData)for(var r in c.extraData)m.append(r,c.extraData[r]);c.data=null;r=a.extend(!0,{},a.ajaxSettings,c,{contentType:!1,processData:!1,cache:!1,type:"POST"});r.data=null;var q=r.beforeSend;r.beforeSend=function(a,d){d.data=m;a.upload&&(a.upload.onprogress=
function(a){d.progress(a.position,a.total)});q&&q.call(d,a,c)};a.ajax(r)}else a.ajax(c);this.trigger("form-submit-notify",[this,c]);return this};a.fn.ajaxForm=function(c){if(0===this.length){var e=this.selector,d=this.context;if(!a.isReady&&e)return b("DOM not ready, queuing ajaxForm"),a(function(){a(e,d).ajaxForm(c)}),this;b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||
(d.preventDefault(),a(this).ajaxSubmit(c))}).bind("click.form-plugin",function(d){var c=d.target,b=a(c);if(!b.is(":submit,input:image")){c=b.closest(":submit");if(0==c.length)return;c=c[0]}var e=this;e.clk=c;"image"==c.type&&(void 0!=d.offsetX?(e.clk_x=d.offsetX,e.clk_y=d.offsetY):"function"==typeof a.fn.offset?(b=b.offset(),e.clk_x=d.pageX-b.left,e.clk_y=d.pageY-b.top):(e.clk_x=d.pageX-c.offsetLeft,e.clk_y=d.pageY-c.offsetTop));setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)})};a.fn.ajaxFormUnbind=
function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(c){var b=[];if(0===this.length)return b;var d=this[0],f=c?d.getElementsByTagName("*"):d.elements;if(!f)return b;var l,h,j,g,k,p;l=0;for(k=f.length;l<k;l++)if(h=f[l],j=h.name)if(c&&d.clk&&"image"==h.type)!h.disabled&&d.clk==h&&(b.push({name:j,value:a(h).val(),type:h.type}),b.push({name:j+".x",value:d.clk_x},{name:j+".y",value:d.clk_y}));else if((g=a.fieldValue(h,!0))&&g.constructor==Array){h=0;for(p=g.length;h<
p;h++)b.push({name:j,value:g[h]})}else null!==g&&"undefined"!=typeof g&&b.push({name:j,value:g,type:h.type});if(!c&&d.clk&&(c=a(d.clk),f=c[0],(j=f.name)&&!f.disabled&&"image"==f.type))b.push({name:j,value:c.val()}),b.push({name:j+".x",value:d.clk_x},{name:j+".y",value:d.clk_y});return b};a.fn.formSerialize=function(c){return a.param(this.formToArray(c))};a.fn.fieldSerialize=function(c){var b=[];this.each(function(){var d=this.name;if(d){var f=a.fieldValue(this,c);if(f&&f.constructor==Array)for(var l=
0,h=f.length;l<h;l++)b.push({name:d,value:f[l]});else null!==f&&"undefined"!=typeof f&&b.push({name:this.name,value:f})}});return a.param(b)};a.fn.fieldValue=function(c){for(var b=[],d=0,f=this.length;d<f;d++){var l=a.fieldValue(this[d],c);null===l||("undefined"==typeof l||l.constructor==Array&&!l.length)||(l.constructor==Array?a.merge(b,l):b.push(l))}return b};a.fieldValue=function(c,b){var d=c.name,f=c.type,l=c.tagName.toLowerCase();void 0===b&&(b=!0);if(b&&(!d||c.disabled||"reset"==f||"button"==
f||("checkbox"==f||"radio"==f)&&!c.checked||("submit"==f||"image"==f)&&c.form&&c.form.clk!=c||"select"==l&&-1==c.selectedIndex))return null;if("select"==l){var h=c.selectedIndex;if(0>h)return null;for(var d=[],l=c.options,j=(f="select-one"==f)?h+1:l.length,h=f?h:0;h<j;h++){var g=l[h];if(g.selected){var k=g.value;k||(k=g.attributes&&g.attributes.value&&!g.attributes.value.specified?g.text:g.value);if(f)return k;d.push(k)}}return d}return a(c).val()};a.fn.clearForm=function(c){return this.each(function(){a("input,select,textarea",
this).clearFields(c)})};a.fn.clearFields=a.fn.clearInputs=function(a){var b=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,f=this.tagName.toLowerCase();b.test(d)||"textarea"==f||a&&/hidden/.test(d)?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==f&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&
this.reset()})};a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(c){void 0===c&&(c=!0);return this.each(function(){var b=this.type;"checkbox"==b||"radio"==b?this.checked=c:"option"==this.tagName.toLowerCase()&&(b=a(this).parent("select"),c&&(b[0]&&"select-one"==b[0].type)&&b.find("option").selected(!1),this.selected=c)})};a.fn.ajaxSubmit.debug=!1})(jQuery);
(function(a){var b={put:function(a,d){(d||window).location.hash=this.encoder(a)},get:function(d){d=(d||window).location.hash.replace(/^#/,"");try{return a.browser.mozilla?d:decodeURIComponent(d)}catch(c){return d}},encoder:encodeURIComponent},c={id:"__jQuery_history",init:function(){var d='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(d);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(a){var d=this._document();
d.open();d.close();b.put(a,d)},get:function(){return b.get(this._document())}},e={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(c,e){var h;h=a.extend({unescape:!1},e||{});var j=h.unescape;if(!0===j)h=function(a){return a};else{if(h="string"==typeof j){h=j.split("");var g=RegExp(a.map(h,encodeURIComponent).join("|"),"ig");h=j=function(a){return a.replace(g,decodeURIComponent)}}h=h||"function"==typeof j?function(a){return j(encodeURIComponent(a))}:encodeURIComponent}b.encoder=
h;d.callback=c;d._options=e;d._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=b.get();d._appState=a;d.callback(a);setInterval(d.check,100)},check:function(){var a=b.get();a!=d._appState&&(d._appState=a,d.callback(a))},load:function(a){a!=d._appState&&(b.put(a),d._appState=a,d.callback(a))}},iframeTimer:{_appState:void 0,_init:function(){var a=b.get();d._appState=a;c.init().put(a);d.callback(a);setInterval(d.check,100)},check:function(){var a=c.get(),e=b.get();
e!=a&&(e==d._appState?(d._appState=a,b.put(a),d.callback(a)):(d._appState=e,c.put(e),d.callback(e)))},load:function(a){a!=d._appState&&(b.put(a),c.put(a),d._appState=a,d.callback(a))}},hashchangeEvent:{_init:function(){d.callback(b.get());a(window).bind("hashchange",d.check)},check:function(){d.callback(b.get())},load:function(a){b.put(a)}}},d=a.extend({},e.base);d.type=a.browser.msie&&(8>a.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";a.extend(d,
e[d.type]);a.history=d})(jQuery);
(function(a){a.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:0.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(b,c,e){null==c&&(c="Alert");a.alerts._show(c,b,null,"alert",function(a){e&&e(a)})},confirm:function(b,c,e){null==c&&(c="Confirm");a.alerts._show(c,b,null,"confirm",function(a){e&&e(a)})},prompt:function(b,c,e,d){null==e&&(e="Prompt");a.alerts._show(e,b,c,"prompt",function(a){d&&
d(a)})},_show:function(b,c,e,d,f){a.alerts._hide();a.alerts._overlay("show");a("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_icon"></div><div id="popup_message"></div></div></div>');a.alerts.dialogClass&&a("#popup_container").addClass(a.alerts.dialogClass);var l=a.browser.msie&&6>=parseInt(a.browser.version)?"absolute":"fixed";a("#popup_container").css({position:l,zIndex:99999,padding:0,margin:0});a("#popup_title").text(b);a("#popup_content").addClass(d);
a("#popup_message").text(c);a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />"));a("#popup_container").css({minWidth:a("#popup_container").outerWidth(),maxWidth:a("#popup_container").outerWidth()});a.alerts._reposition();a.alerts._maintainPosition(!0);switch(d){case "alert":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f(!0)});a("#popup_ok").focus().keypress(function(d){(13==
d.keyCode||27==d.keyCode)&&a("#popup_ok").trigger("click")});break;case "confirm":a("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>");a("#popup_ok").click(function(){a.alerts._hide();f&&f(!0)});a("#popup_cancel").click(function(){a.alerts._hide();f&&f(!1)});a("#popup_ok").focus();a("#popup_ok, #popup_cancel").keypress(function(d){13==d.keyCode&&a("#popup_ok").trigger("click");
27==d.keyCode&&a("#popup_cancel").trigger("click")});break;case "prompt":a("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button id="popup_ok" class="btn">'+a.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+a.alerts.cancelButton+"</button></div>"),a("#popup_prompt").width(a("#popup_message").width()),a("#popup_ok").click(function(){var d=a("#popup_prompt").val();a.alerts._hide();f&&f(d)}),a("#popup_cancel").click(function(){a.alerts._hide();
f&&f(null)}),a("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(d){13==d.keyCode&&a("#popup_ok").trigger("click");27==d.keyCode&&a("#popup_cancel").trigger("click")}),e&&a("#popup_prompt").val(e),a("#popup_prompt").focus().select()}if(a.alerts.draggable)try{a("#popup_container").draggable({handle:a("#popup_title")}),a("#popup_title").css({cursor:"move"})}catch(h){}},_hide:function(){a("#popup_container").remove();a.alerts._overlay("hide");a.alerts._maintainPosition(!1)},_overlay:function(b){switch(b){case "show":a.alerts._overlay("hide");
a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});break;case "hide":a("#popup_overlay").remove()}},_reposition:function(){var b=a(window).height()/2-a("#popup_container").outerHeight()/2+a.alerts.verticalOffset,c=a(window).width()/2-a("#popup_container").outerWidth()/2+a.alerts.horizontalOffset;0>b&&(b=0);0>c&&(c=
0);a.browser.msie&&6>=parseInt(a.browser.version)&&(b+=a(window).scrollTop());a("#popup_container").css({top:b+"px",left:c+"px"});a("#popup_overlay").height(a(document).height())},_maintainPosition:function(b){if(a.alerts.repositionOnResize)switch(b){case !0:a(window).bind("resize",a.alerts._reposition);break;case !1:a(window).unbind("resize",a.alerts._reposition)}}};jAlert=function(b,c,e){a.alerts.alert(b,c,e)};jConfirm=function(b,c,e){a.alerts.confirm(b,c,e)};jPrompt=function(b,c,e,d){a.alerts.prompt(b,
c,e,d)}})(jQuery);
(function(a){function b(){}function c(){}function e(){}function d(a,c){"string"===typeof c&&(c=c.split("."));var b=c.join(".").replace(/\.(\w)/g,function(a,d){return d.toUpperCase()}),f=c.shift();if(typeof(b=a[b])==k)if(typeof(b=a[f])!=k&&0<c.length)b=d(b,c);return b}function f(){function a(d,f){b.bind(d,function(){return f.apply(c,arguments)})}var d=j.apply(arguments),c=this,b=1===d.length?c:d.shift(),f,d=d[0]||{};for(f in d)a(f,d[f])}function l(a,d){return{input:a,form:d}}var h=(JSON||{}).stringify,
j=Array.prototype.slice,g,k="undefined",p={itemManager:c,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!h)throw Error("JSON.stringify() not found");g=c.prototype;g.init=function(){};g.filter=function(a,d){var c=[],b,f;for(b=0;b<a.length;b++)f=a[b],this.itemContains(f,d)&&c.push(f);return c};g.itemContains=
function(a,d){return 0==this.itemToString(a).toLowerCase().indexOf(d.toLowerCase())};g.stringToItem=function(a){return a};g.itemToString=function(a){return a};g.compareItems=function(a,d){return a==d};g=b.prototype;g.init=function(d,c){var b=this,f,e,h;b._defaults=a.extend({},p);b._opts=c||{};b._plugins={};b._itemManager=e=new (b.opts("item.manager"));d=a(d);h=a(b.opts("html.wrap"));f=a(b.opts("html.hidden"));d.wrap(h).keydown(function(a){return b.onKeyDown(a)}).keyup(function(a){return b.onKeyUp(a)}).data("textext",
b);a(b).data({hiddenInput:f,wrapElement:d.parents(".text-wrap").first(),input:d});f.attr("name",d.attr("name"));d.attr("name",null);f.insertAfter(d);a.extend(!0,e,b.opts("ext.item.manager"));a.extend(!0,b,b.opts("ext.*"),b.opts("ext.core"));b.originalWidth=d.outerWidth();b.invalidateBounds();e.init(b);b.initPatches();b.initPlugins(b.opts("plugins"),a.fn.textext.plugins);b.on({setFormData:b.onSetFormData,getFormData:b.onGetFormData,setInputData:b.onSetInputData,anyKeyUp:b.onAnyKeyUp});b.trigger("postInit");
b.trigger("ready");b.getFormData(0)};g.initPatches=function(){var d=[],b=a.fn.textext.patches,c;for(c in b)d.push(c);this.initPlugins(d,b)};g.initPlugins=function(d,b){var c,f,e=[],h;"string"==typeof d&&(d=d.split(/\s*,\s*|\s+/g));for(h=0;h<d.length;h++)if(c=d[h],f=b[c])this._plugins[c]=f=new f,this[c]=function(a){return function(){return a}}(f),e.push(f),a.extend(!0,f,this.opts("ext.*"),this.opts("ext."+c));e.sort(function(a,d){a=a.initPriority();d=d.initPriority();return a===d?0:a<d?1:-1});for(h=
0;h<e.length;h++)e[h].init(this)};g.hasPlugin=function(a){return!!this._plugins[a]};g.on=f;g.bind=function(a,d){this.input().bind(a,d)};g.trigger=function(){var a=arguments;this.input().trigger(a[0],j.call(a,1))};g.itemManager=function(){return this._itemManager};g.input=function(){return a(this).data("input")};g.opts=function(a){var b=d(this._opts,a);return"undefined"==typeof b?d(this._defaults,a):b};g.wrapElement=function(){return a(this).data("wrapElement")};g.invalidateBounds=function(){var a=
this.input(),d=this.wrapElement(),b=d.parent(),c=this.originalWidth,f;this.trigger("preInvalidate");f=a.outerHeight();a.outerWidth(c);d.width(c).height(f);b.height(f);this.trigger("postInvalidate")};g.focusInput=function(){this.input()[0].focus()};g.serializeData=h;g.hiddenInput=function(){return a(this).data("hiddenInput")};g.getWeightedEventResponse=function(a,d){var b={},c=0;this.trigger(a,b,d);for(var f in b)c=Math.max(c,f);return b[c]};g.getFormData=function(a){a=this.getWeightedEventResponse("getFormData",
a||0);this.trigger("setFormData",a.form);this.trigger("setInputData",a.input)};g.onAnyKeyUp=function(a,d){this.getFormData(d)};g.onSetInputData=function(a,d){this.input().val(d)};g.onSetFormData=function(a,d){this.hiddenInput().val(this.serializeData(d))};g.onGetFormData=function(a,d){var b=this.input().val();d[0]=l(b,b)};a(["Down","Up"]).each(function(){var a=this.toString();g["onKey"+a]=function(d){var b=this.opts("keys")[d.keyCode],c=!0;b&&(c="!"!=b.substr(-1),b=b.replace("!",""),this.trigger(b+
"Key"+a),"Up"==a&&this._lastKeyDown==d.keyCode&&(this._lastKeyDown=null,this.trigger(b+"KeyPress")),"Down"==a&&(this._lastKeyDown=d.keyCode));this.trigger("anyKey"+a,d.keyCode);return c}});g=e.prototype;g.on=f;g.formDataObject=l;g.init=function(){throw Error("Not implemented");};g.baseInit=function(d,b){d._defaults=a.extend(!0,d._defaults,b);this._core=d;this._timers={}};g.startTimer=function(a,d,b){var c=this;c.stopTimer(a);c._timers[a]=setTimeout(function(){delete c._timers[a];b.apply(c)},1E3*d)};
g.stopTimer=function(a){clearTimeout(this._timers[a])};g.core=function(){return this._core};g.opts=function(a){return this.core().opts(a)};g.itemManager=function(){return this.core().itemManager()};g.input=function(){return this.core().input()};g.val=function(a){var d=this.input();if(typeof a===k)return d.val();d.val(a)};g.trigger=function(){var a=this.core();a.trigger.apply(a,arguments)};g.bind=function(a,d){this.core().bind(a,d)};g.initPriority=function(){return 0};var m=!1,r=a.fn.textext=function(d){var c;
if(!m&&null!=(c=a.fn.textext.css))a("head").append("<style>"+c+"</style>"),m=!0;return this.map(function(){var c=a(this);if(null==d)return c.data("textext");var f=new b;f.init(c,d);c.data("textext",f);return f.input()[0]})};r.addPlugin=function(a,d){r.plugins[a]=d;d.prototype=new r.TextExtPlugin};r.addPatch=function(a,d){r.patches[a]=d;d.prototype=new r.TextExtPlugin};r.TextExt=b;r.TextExtPlugin=e;r.ItemManager=c;r.plugins={};r.patches={}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtIE9Patches=b;a.fn.textext.addPatch("ie9",b);a=b.prototype;a.init=function(a){if(-1!=navigator.userAgent.indexOf("MSIE 9"))a.on({postInvalidate:this.onPostInvalidate})};a.onPostInvalidate=function(){var a=this.input(),b=a.val();a.val(Math.random());a.val(b)}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtAjax=b;a.fn.textext.addPlugin("ajax",b);var c=b.prototype,e={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:!1,dataCallback:null}};c.init=function(a){this.baseInit(a,e);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};c.load=function(d){var b=this,c=b.opts("ajax.data.callback")||function(a){return{q:a}},c=a.extend(!0,{data:c(d),success:function(a){b.onComplete(a,d)},error:function(a,b){console.error(b,
d)}},b.opts("ajax"));a.ajax(c)};c.onComplete=function(a,b){var c=a;this.dontShowLoading();!0==this.opts("ajax.cache.results")&&(this._suggestions=a,c=this.itemManager().filter(a,b));this.trigger("setSuggestions",{result:c})};c.dontShowLoading=function(){this.stopTimer("loading")};c.showLoading=function(){var a=this;a.dontShowLoading();a.startTimer("loading",a.opts("ajax.loading.delay"),function(){a.trigger("showDropdown",function(b){b.clearItems();b.addDropdownItem(a.opts("ajax.loading.message")).addClass("text-loading")})})};
c.onGetSuggestions=function(a,b){var c=this,e=c._suggestions,j=(b||{}).query||"";if(e&&!0===c.opts("ajax.cache.results"))return c.onComplete(e,j);c.startTimer("ajax",c.opts("ajax.type.delay"),function(){c.showLoading();c.load(j)})}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtArrow=b;a.fn.textext.addPlugin("arrow",b);var c=b.prototype,e={html:{arrow:'<div class="text-arrow"/>'}};c.init=function(d){var b=this;b.baseInit(d,e);b._arrow=d=a(b.opts("html.arrow"));b.core().wrapElement().append(d);d.bind("click",function(a){b.onArrowClick(a)})};c.onArrowClick=function(){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtAutocomplete=b;a.fn.textext.addPlugin("autocomplete",b);var c=b.prototype,e={autocomplete:{enabled:!0,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};c.init=function(d){var b=this;b.baseInit(d,e);d=b.input();var c;!0===b.opts("autocomplete.enabled")&&(b.on({blur:b.onBlur,anyKeyUp:b.onAnyKeyUp,deleteKeyUp:b.onAnyKeyUp,
backspaceKeyPress:b.onBackspaceKeyPress,enterKeyPress:b.onEnterKeyPress,escapeKeyPress:b.onEscapeKeyPress,setSuggestions:b.onSetSuggestions,showDropdown:b.onShowDropdown,hideDropdown:b.onHideDropdown,toggleDropdown:b.onToggleDropdown,postInvalidate:b.positionDropdown,getFormData:b.onGetFormData,downKeyDown:b.onDownKeyDown,upKeyDown:b.onUpKeyDown}),c=a(b.opts("html.dropdown")),c.insertAfter(d),b.on(c,{mouseover:b.onMouseOver,mousedown:b.onMouseDown,click:b.onClick}),c.css("maxHeight",b.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+
b.opts("autocomplete.dropdown.position")),a(b).data("container",c),a(document.body).click(function(a){b.isDropdownVisible()&&!b.withinWrapElement(a.target)&&b.trigger("hideDropdown")}),b.positionDropdown())};c.containerElement=function(){return a(this).data("container")};c.onMouseOver=function(d){d=a(d.target).closest(".text-suggestion");d.is(".text-suggestion")&&(this.clearSelected(),d.addClass("text-selected"))};c.onMouseDown=function(){this.containerElement().data("mousedownOnAutocomplete",!0)};
c.onClick=function(d){d=a(d.target).closest(".text-label");(d.is(".text-suggestion")||d.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};c.onBlur=function(){var a=this.containerElement(),b=!0===a.data("mousedownOnAutocomplete");this.isDropdownVisible()&&(b?this.core().focusInput():this.trigger("hideDropdown"));a.removeData("mousedownOnAutocomplete")};c.onBackspaceKeyPress=function(){(0<this.val().length||this.isDropdownVisible())&&this.getSuggestions()};
c.onAnyKeyUp=function(a,b){var c=null!=this.opts("keys."+b);0<this.val().length&&!c&&this.getSuggestions()};c.onDownKeyDown=function(){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};c.onUpKeyDown=function(){this.togglePreviousSuggestion()};c.onEnterKeyPress=function(){this.isDropdownVisible()&&this.selectFromDropdown()};c.onEscapeKeyPress=function(){this.isDropdownVisible()&&this.trigger("hideDropdown")};c.positionDropdown=function(){var a=this.containerElement(),b=this.opts("autocomplete.dropdown.position"),
c=this.core().wrapElement().outerHeight(),e={};e["above"===b?"bottom":"top"]=c+"px";a.css(e)};c.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};c.setSelectedSuggestion=function(d){if(d){var b=this.suggestionElements(),c=b.first(),e,j;this.clearSelected();for(j=0;j<b.length;j++)if(e=a(b[j]),this.itemManager().compareItems(e.data("text-suggestion"),d)){c=e.addClass("text-selected");break}c.addClass("text-selected");this.scrollSuggestionIntoView(c)}};c.selectedSuggestionElement=
function(){return this.suggestionElements().filter(".text-selected").first()};c.isDropdownVisible=function(){return!0===this.containerElement().is(":visible")};c.onGetFormData=function(a,b){var c=this.val();b[100]=this.formDataObject(c,c)};c.initPriority=function(){return 200};c.onHideDropdown=function(){this.hideDropdown()};c.onToggleDropdown=function(){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};c.onShowDropdown=function(b,c){var e=this.selectedSuggestionElement().data("text-suggestion");
if(!this._suggestions)return this.trigger("getSuggestions");a.isFunction(c)?c(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());this.showDropdown(this.containerElement());this.setSelectedSuggestion(e)};c.onSetSuggestions=function(a,b){var c=this._suggestions=b.result;!1!==b.showHideDropdown&&this.trigger(null===c||0===c.length?"hideDropdown":"showDropdown")};c.getSuggestions=function(){var a=this.val();this._previousInputValue!=a&&(""==a&&(current=null),this._previousInputValue=
a,this.trigger("getSuggestions",{query:a}))};c.clearItems=function(){this.containerElement().find(".text-list").children().remove()};c.renderSuggestions=function(b){var c=this;c.clearItems();a.each(b||[],function(a,b){c.addSuggestion(b)})};c.showDropdown=function(){this.containerElement().show()};c.hideDropdown=function(){var a=this.containerElement();this._previousInputValue=null;a.hide()};c.addSuggestion=function(a){var b=this.opts("autocomplete.render");this.addDropdownItem(b?b.call(this,a):this.itemManager().itemToString(a)).data("text-suggestion",
a)};c.addDropdownItem=function(b){var c=this.containerElement().find(".text-list"),e=a(this.opts("html.suggestion"));e.find(".text-label").html(b);c.append(e);return e};c.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};c.toggleNextSuggestion=function(){var a=this.selectedSuggestionElement(),b;0<a.length?(b=a.next(),0<b.length&&a.removeClass("text-selected")):b=this.suggestionElements().first();b.addClass("text-selected");this.scrollSuggestionIntoView(b)};c.togglePreviousSuggestion=
function(){var a=this.selectedSuggestionElement().prev();0!=a.length&&(this.clearSelected(),a.addClass("text-selected"),this.scrollSuggestionIntoView(a))};c.scrollSuggestionIntoView=function(a){var b=a.outerHeight(),c=this.containerElement(),e=c.innerHeight(),j=c.scrollTop();a=(a.position()||{}).top;var g=null,k=parseInt(c.css("paddingTop"));null!=a&&(a+b>e&&(g=a+j+b-e+k),0>a&&(g=a+j-k),null!=g&&c.scrollTop(g))};c.selectFromDropdown=function(){var a=this.selectedSuggestionElement().data("text-suggestion");
a&&(this.val(this.itemManager().itemToString(a)),this.core().getFormData());this.trigger("hideDropdown")};c.withinWrapElement=function(a){return 0<this.core().wrapElement().find(a).size()}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtFilter=b;a.fn.textext.addPlugin("filter",b);a=b.prototype;var c={filter:{enabled:!0,items:null}};a.init=function(a){this.baseInit(a,c);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};a.onGetFormData=function(a,b){var c=this.val(),l="";this.core().hasPlugin("tags")||(this.isValueAllowed(c)&&(l=c),b[300]=this.formDataObject(c,l))};a.isValueAllowed=function(a){var b=
this.opts("filterItems")||this._suggestions||[],c=this.itemManager(),l=!this.opts("filter.enabled"),h;for(h=0;h<b.length&&!l;h++)c.compareItems(a,b[h])&&(l=!0);return l};a.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)};a.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtFocus=b;a.fn.textext.addPlugin("focus",b);a=b.prototype;var c={html:{focus:'<div class="text-focus"/>'}};a.init=function(a){this.baseInit(a,c);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};a.onBlur=function(){var a=this;clearTimeout(a._timeoutId);a._timeoutId=setTimeout(function(){a.getFocus().hide()},100)};a.onFocus=function(){clearTimeout(this._timeoutId);this.getFocus().show()};
a.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtPrompt=b;a.fn.textext.addPlugin("prompt",b);var c=b.prototype,e={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};c.init=function(b){var c;this.baseInit(b,e);c=a(this.opts("html.prompt"));a(this).data("container",c);this.core().wrapElement().append(c);this.setPrompt(this.opts("prompt"));(c=b.input().attr("placeholder"))||(c=this.opts("prompt"));b.input().attr("placeholder","");c&&this.setPrompt(c);0<a.trim(this.val()).length&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};c.onPostInit=function(){this.invalidateBounds()};c.onPostInvalidate=function(){this.invalidateBounds()};c.invalidateBounds=function(){var a=this.input();this.containerElement().css({paddingLeft:a.css("paddingLeft"),paddingTop:a.css("paddingTop")})};c.onBlur=function(){var a=this;a.startTimer("prompt",0.1,function(){a.showPrompt()})};c.showPrompt=function(){var b=this.input();0===a.trim(this.val()).length&&
!b.is(":focus")&&this.containerElement().removeClass("text-hide-prompt")};c.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};c.onFocus=function(){this.hidePrompt()};c.setPrompt=function(a){this.containerElement().text(a)};c.containerElement=function(){return a(this).data("container")}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtSuggestions=b;a.fn.textext.addPlugin("suggestions",b);a=b.prototype;var c={suggestions:null};a.init=function(a){this.baseInit(a,c);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};a.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:!1!=b})};a.onPostInit=function(){this.setSuggestions(this.opts("suggestions"),!1)};a.onGetSuggestions=function(a,b){var c=this.opts("suggestions");c.sort();this.setSuggestions(this.itemManager().filter(c,
b.query))}})(jQuery);
(function(a){function b(){}a.fn.textext.TextExtTags=b;a.fn.textext.addPlugin("tags",b);var c=b.prototype,e="text-tag",d="."+e,f=".text-label",l={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};c.init=function(b){this.baseInit(b,l);b=this.input();var c;this.opts("tags.enabled")&&(c=a(this.opts("html.tags")),b.after(c),a(this).data("container",c),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(c,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(b,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(b.css("paddingLeft")||0),top:parseInt(b.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};c.containerElement=function(){return a(this).data("container")};c.onPostInit=function(){this.addTags(this.opts("tags.items"))};
c.onGetFormData=function(a,b,c){a=13===c?"":this.val();b[200]=this.formDataObject(a,this._formData)};c.initPriority=function(){return 100};c.onInputMouseMove=function(a){this.toggleZIndex(a)};c.onContainerMouseMove=function(a){this.toggleZIndex(a)};c.onBackspaceKeyDown=function(){var a=this.tagElements().last();0==this.val().length&&this.removeTag(a)};c.onPreInvalidate=function(){var a=this.tagElements().last(),b=a.position();0<a.length?b.left+=a.innerWidth():b=this._originalPadding;this._paddingBox=
b;this.input().css({paddingLeft:b.left,paddingTop:b.top})};c.onClick=function(b){function c(a,b){m.data(e,a);m.find(f).text(l.itemManager().itemToString(a));l.updateFormCache();k.getFormData();k.invalidateBounds();b&&k.focusInput()}var l=this,k=l.core();b=a(b.target);var p=0,m;b.is(".text-tags")?p=1:b.is(".text-remove")?(l.removeTag(b.parents(d+":first")),p=1):b.is(f)&&(m=b.parents(d+":first"),l.trigger("tagClick",m,m.data(e),c));p&&k.focusInput()};c.onEnterKeyPress=function(){var a=this.val(),a=
this.itemManager().stringToItem(a);this.isTagAllowed(a)&&(this.addTags([a]),this.core().focusInput())};c.updateFormCache=function(){var b=[];this.tagElements().each(function(){b.push(a(this).data(e))});this._formData=b};c.toggleZIndex=function(a){var b=this.input().offset(),c=a.clientX-b.left,d=a.clientY-b.top,e=this._paddingBox;a=this.containerElement();b=a.is(".text-tags-on-top");c=c>e.left&&d>e.top;if(!b&&!c||b&&c)a[(!b?"add":"remove")+"Class"]("text-tags-on-top")};c.tagElements=function(){return this.containerElement().find(d)};
c.isTagAllowed=function(a){a={tag:a,result:!0};this.trigger("isTagAllowed",a);return!0===a.result};c.addTags=function(a){if(a&&0!=a.length){var b=this.core(),c=this.containerElement(),d,e;for(d=0;d<a.length;d++)(e=a[d])&&this.isTagAllowed(e)&&c.append(this.renderTag(e));this.updateFormCache();b.getFormData();b.invalidateBounds()}};c.getTagElement=function(b){var c=this.tagElements(),d,f;for(d=0;d<c.length,f=a(c[d]);d++)if(this.itemManager().compareItems(f.data(e),b))return f};c.removeTag=function(b){var c=
this.core(),d;b instanceof a?(d=b,b.data(e)):d=this.getTagElement(b);d.remove();this.updateFormCache();c.getFormData();c.invalidateBounds()};c.renderTag=function(b){var c=a(this.opts("html.tag"));c.find(".text-label").text(this.itemManager().itemToString(b));c.data(e,b);return c}})(jQuery);
(function(a,b){"$:nomunge";var c=a.jQuery||a.Cowboy||(a.Cowboy={}),e;c.throttle=e=function(a,e,l,h){function j(){function c(){k=+new Date;l.apply(r,v)}function j(){g=b}var r=this,q=+new Date-k,v=arguments;h&&!g&&c();g&&clearTimeout(g);h===b&&q>a?c():!0!==e&&(g=setTimeout(h?j:c,h===b?a-q:a))}var g,k=0;"boolean"!==typeof e&&(h=l,l=e,e=b);c.guid&&(j.guid=l.guid=l.guid||c.guid++);return j};c.debounce=function(a,c,l){return l===b?e(a,c,!1):e(a,l,!1!==c)}})(this);
MessageBundle={en:{"ajax.loading":"loading...","ajax.error":"network error,please try later",required:"please input value","selection.required":"please select",phone:"please input valid phone number",email:"please input valid email",regex:"please input valid value",integer:"must be a integer","integer.positive":"must be a positive integer","double":"must be a decimal","double.positive":"must be a positive decimal","save.and.create":"save and add","no.selection":"no selection","no.modification":"no modification",
select:"please select","confirm.delete":"are you sure to delete?","confirm.save":"are you sure to save?","confirm.exit":"you have unsaved modification,are you sure to exit?","confirm.action":"please confirm this action?","unsupported.browser":"unsupported browser","action.denied":"requested action denied","maximum.exceeded":"{0} , exceed maximum {1}"},zh_CN:{"ajax.loading":"\u6b63\u5728\u52a0\u8f7d...","ajax.error":"\u9519\u8bef,\u8bf7\u7a0d\u540e\u518d\u8bd5",required:"\u8bf7\u586b\u5199","selection.required":"\u8bf7\u9009\u62e9",
email:"email\u4e0d\u5408\u6cd5",regex:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u683c\u5f0f",phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u53f7\u7801",integer:"\u8bf7\u586b\u5199\u6574\u6570","integer.positive":"\u8bf7\u586b\u5199\u6b63\u6574\u6570","double":"\u8bf7\u586b\u5199\u6570\u5b57","double.positive":"\u8bf7\u586b\u5199\u5927\u4e8e\u96f6\u7684\u6570\u5b57","save.and.create":"\u4fdd\u5b58\u5e76\u65b0\u5efa","no.selection":"\u6ca1\u6709\u9009\u4e2d","no.modification":"\u6ca1\u6709\u66f4\u6539",add:"\u6dfb\u52a0",
remove:"\u5220\u9664",browse:"\u6d4f\u89c8\u6587\u4ef6",select:"\u8bf7\u9009\u62e9",pick:"\u8bf7\u6311\u9009",save:"\u4fdd\u5b58",restore:"\u8fd8\u539f",cancel:"\u53d6\u6d88",error:"\u9519\u8bef",success:"\u64cd\u4f5c\u6210\u529f",confirm:"\u786e\u5b9a","confirm.delete":"\u786e\u5b9a\u8981\u5220\u9664?","confirm.save":"\u786e\u5b9a\u8981\u4fdd\u5b58?","confirm.exit":"\u6709\u6539\u52a8\u672a\u4fdd\u5b58,\u786e\u5b9a\u8981\u79bb\u5f00?","confirm.action":"\u8bf7\u786e\u8ba4\u6b64\u64cd\u4f5c","true":"\u662f",
"false":"\u5426","unsupported.browser":"\u4f60\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd","action.denied":"\u4f60\u62d2\u7edd\u4e86\u8bf7\u6c42","maximum.exceeded":"{0} ,\u8d85\u8fc7\u6700\u5927\u9650\u5236\u6570{1}"},get:function(){var a=arguments[0],b=MessageBundle.lang(),b=MessageBundle[b][a];"undefined"==typeof b&&(b=a);for(a=1;a<arguments.length;a++)b=b.replace("{"+(a-1)+"}",arguments[a]);return b},lang:function(){var a=$.cookie("locale")||navigator.language||navigator.browserLanguage||
"",b=a.indexOf("-");0<b&&(a=a.substring(0,b)+"_"+a.substring(b+1).toUpperCase());MessageBundle[a]||(b=a.indexOf("_"),0<b&&(a=a.substring(0,b)),MessageBundle[a]||(a="en"));return a},shortLang:function(){var a=MessageBundle.lang(),b=a.indexOf("_");0<b&&(a=a.substring(0,b));return a}};var MODERN_BROWSER=!$.browser.msie||8<$.browser.version;
(function(){var a=document.domain;if(!a.match(/^(\d+\.){3}\d+$/)){a=a.split(".");try{2<a.length&&(document.domain=a[a.length-2]+"."+a[a.length-1])}catch(b){3<a.length&&(document.domain=a[a.length-3]+"."+a[a.length-2]+"."+a[a.length-1])}}$.ajaxSettings.traditional=!0;var c=$.ajax;MODERN_BROWSER&&($.ajax=function(a){a.url=UrlUtils.makeSameOrigin(a.url);a.xhrFields={withCredentials:!0};return c(a)});if("undefined"!=typeof $.rc4EncryptStr&&"false"!=$('meta[name="pe"]').attr("content")){var e=$.param;
$.param=function(a,b){(jQuery.isArray(a)||a.jquery)&&jQuery.each(a,function(){if(/password$/.test(this.name.toLowerCase()))try{var a=$.cookie("T"),a=a.substring(15,25);this.value=$.rc4EncryptStr(encodeURIComponent(this.value+a),a)}catch(b){}});return e(a,b)}}})();
Indicator={text:"",show:function(a){$("#indicator").length||$('<div id="indicator"></div>').appendTo(document.body);var b=$("#indicator");a&&b.hasClass("loading")&&b.removeClass("loading");!a&&!b.hasClass("loading")&&b.addClass("loading");b.html(Indicator.text||MessageBundle.get("ajax.loading"));b.show();Indicator.text=""},showError:function(){Indicator.text=MessageBundle.get("ajax.error");Indicator.show(!0)},hide:function(){Indicator.text="";$("#indicator")&&$("#indicator").hide()}};
UrlUtils={extractDomain:function(a){if(UrlUtils.isAbsolute(a)){a=a.replace(/:\d+/,"");a=a.substring(a.indexOf("://")+3);var b=a.indexOf("/");0<b&&(a=a.substring(0,b));return a}return document.location.hostname},isSameDomain:function(a,b){b=b||document.location.href;var c=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(b);return c==e},isSameOrigin:function(a,b){b=b||document.location.href;var c=UrlUtils.extractDomain(a),e=UrlUtils.extractDomain(b);if($.browser.msie&&c!=e)return!1;c=c.split(".");
e=e.split(".");return c[c.length-1]==e[e.length-1]&&c[c.length-2]==e[e.length-2]},makeSameOrigin:function(a,b){b=b||document.location.href;return UrlUtils.isSameOrigin(a,b)?a:b.substring(0,b.indexOf("/",b.indexOf("://")+3))+CONTEXT_PATH+"/webproxy/"+a},isAbsolute:function(a){if(!a)return!1;a=a.indexOf("://");return 4==a||5==a},absolutize:function(a){if(UrlUtils.isAbsolute(a))return a;var b=document.location.href,c=b.indexOf("://");return 0==a.length||0==a.indexOf("/")?b.substring(0,b.indexOf("/",
c+3))+CONTEXT_PATH+a:b.substring(0,b.lastIndexOf("/")+1)+a}};
Message={compose:function(a,b){return'<div class="'+b+'"><a class="close" data-dismiss="alert">&times;</a>'+a+"</div>"},showMessage:function(){Message.showActionMessage(MessageBundle.get.apply(this,arguments))},showError:function(){Message.showActionError(MessageBundle.get.apply(this,arguments))},showActionError:function(a,b){Message.showActionMessage(a,b,!0)},showActionMessage:function(a,b,c){if(a){if("string"==typeof a){var e=[];e.push(a);a=e}for(var e="",d=0;d<a.length;d++)e+=Message.compose(a[d],
c?"action-error alert alert-error":"action-message alert alert-info");e&&(a=$("#content"),$(".ui-dialog:visible").length&&(a=$(".ui-dialog:visible .ui-dialog-content")),$(".modal:visible").length&&(a=$(".modal:visible .modal-body")),$("#message",a).length||$('<div id="message"></div>').prependTo(a),a=$("#message",a),c&&(b&&"FORM"==$(b).prop("tagName"))&&($(b).attr("id")||$(b).attr("id","form"+(new Date).getTime()),c=$(b).attr("id"),0==$("#"+c+"_message").length&&$('<div id="'+c+'_message"></div>').insertBefore(b),
a=$("#"+c+"_message")),a.html(e),_observe(a),$("html,body").animate({scrollTop:a.offset().top-50},100))}},showFieldError:function(a,b,c){b=b||MessageBundle.get(c);if(a&&$(a).length)if(a=$(a),c=a.closest(".control-group"),c.addClass("error"),$(".field-error",a.parent()).remove(),$(a).is(":visible")){b=$('<div class="field-error removeonclick"><div class="field-error-content">'+b+"</div><div>").insertAfter(a);$('<div class="field-error-arrow"/>').html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>').appendTo(b);
var e=a.width(),d=b.height();c=a.position().top;a=a.position().left+e-30;b.css({top:c+"px",left:a+"px",marginTop:-d+"px",opacity:0});b.animate({opacity:0.8})}else c.length&&$(a).is('[type="hidden"]')?($(".controls span",c).text(""),$('<span class="field-error help-inline">'+b+"</span>").appendTo($(".controls",c))):Message.showActionError(b);else Message.showActionError(b)}};
Form={focus:function(a){for(var b=$(":input:visible",a).get(),c=0;c<b.length;c++)if($(".field-error",$(b[c]).parent()).length){setTimeout(function(){$(b[c]).focus()},50);break}},validate:function(a){if("FORM"!=$(a).prop("tagName")){$(a).closest(".control-group").removeClass("error");$(".field-error",$(a).parent()).fadeIn().remove();if($(a).is(":visible")||$(a).is('[type="hidden"]')&&!$(a).prop("disabled")){var b=$(a).val();if($(a).hasClass("required")&&!b)return"SELECT"==$(a).prop("tagName")?Message.showFieldError(a,
null,"selection.required"):Message.showFieldError(a,null,"required"),!1;if($(a).hasClass("email")&&b&&!b.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))return Message.showFieldError(a,null,"email"),!1;if($(a).hasClass("regex")&&b&&!b.match(RegExp($(a).data("regex"))))return Message.showFieldError(a,null,"regex"),!1;if($(a).hasClass("phone")&&b&&!b.match(/^[\d-]+$/))return Message.showFieldError(a,null,"phone"),!1;if(($(a).hasClass("integer")||$(a).hasClass("long"))&&b){if($(a).hasClass("positive")&&
(!b.match(/^[+]?\d*$/)||!$(a).hasClass("zero")&&0==parseInt(b)))return Message.showFieldError(a,null,"integer.positive"),!1;if(!$(a).hasClass("positive")&&!b.match(/^[-+]?\d*$/))return Message.showFieldError(a,null,"integer"),!1}else if($(a).hasClass("double")&&b){if($(a).hasClass("positive")&&(!b.match(/^[+]?\d+(\.\d+)?$/)||!$(a).hasClass("zero")&&0==parseFloat(b)))return Message.showFieldError(a,null,"double.positive"),!1;if(!$(a).hasClass("positive")&&!b.match(/^[-+]?\d+(\.\d+)?$/))return Message.showFieldError(a,
null,"double"),!1}}return!0}var c=!0;$(":input",a).each(function(){Form.validate(this)||(c=!1)});c||Form.focus(a);return c}};
Ajax={defaultRepacement:"content",fire:function(a,b){if(!a)return!0;var c=a[b];"undefined"==typeof c&&(c=$(a).attr(b));if("undefined"==typeof c||!c)return!0;var e=[];if(2<arguments.length)for(var d=2;d<arguments.length;d++)e[d-2]=arguments[d];var f;if("function"==typeof c)f=c.apply(a,e);else{-1<c.indexOf("return")&&(c=c.replace("return",""));a._temp=function(){return eval(c)};try{f=a._temp()}catch(l){alert(l)}}return!1==f?!1:!0},handleResponse:function(a,b){if(a){var c=!1,e=b.target;e&&$(e).parents("div.ui-dialog").length&&
(b.quiet=!0);if("string"==typeof a&&(0==a.indexOf("{")||0==a.indexOf("[")))a=$.parseJSON(a);if("string"==typeof a){0<=a.indexOf("<title>")&&0<a.indexOf("</title>")&&(Ajax.title=a.substring(a.indexOf("<title>")+7,a.indexOf("</title>")),b.replaceTitle&&(document.title=Ajax.title));for(var d={},f=(b.replacement||$(e).data("replacement")||("FORM"==$(e).prop("tagName")?$(e).attr("id"):null)||Ajax.defaultRepacement).split(","),l=0;l<f.length;l++){var h=f[l].split(":",2);d[h[0]]=2==h.length?h[1]:h[0]}var f=
a.replace(/<script(.|\s)*?\/script>/g,""),l=$("<div/>").html(f),j;for(j in d){h=$("#"+j);j==Ajax.defaultRepacement&&!h.length&&(h=$("body"));if(!b.quiet&&h.length){var g=$(".pin",h),g=g.length?g.offset().top:h.offset().top;$("html,body").animate({scrollTop:g-50},100)}g=l.find("#"+d[j]);g.length?h.html(g.html()):l.find("#content").length?h.html(l.find("#content").html()):l.find("body").length?h.html(l.find("body").html()):h.html(f);!b.quiet&&"undefined"!=typeof $.effects&&h.effect("highlight");_observe(h)}l.remove();
Ajax.fire(e,"onsuccess",a)}else if(Ajax.jsonResult=a,a.fieldErrors||a.actionErrors?(c=!0,b.onerror&&b.onerror.apply(window),Ajax.fire(e,"onerror",a)):(b.onsuccess&&b.onsuccess.apply(window),Ajax.fire(e,"onsuccess",a)),setTimeout(function(){Message.showActionError(a.actionErrors,e);Message.showActionMessage(a.actionMessages,e)},500),a.fieldErrors)if(e){for(j in a.fieldErrors)Message.showFieldError(e[j],a.fieldErrors[j]);Form.focus(e)}else for(j in a.fieldErrors)Message.showActionError(a.fieldErrors[j]);
e&&"FORM"==e.tagName&&(!c&&$(e).hasClass("disposable")?setTimeout(function(){$(":input",e).prop("disabled",!0)},100):setTimeout(function(){$('button[type="submit"]',e).prop("disabled",!1);Captcha.refresh()},100),!c&&($(e).hasClass("reset")&&e.reset)&&e.reset());Indicator.text="";Ajax.fire(e,"oncomplete",a)}},jsonResult:null,title:""};
function ajaxOptions(a){a=a||{};a.dataType||(a.dataType="text");a.headers||(a.headers={});$.extend(a.headers,{"X-Data-Type":a.dataType});var b=a.beforeSend;a.beforeSend=function(c){b&&b(c);Indicator.text=a.indicator;Ajax.fire(null,a.onloading)};var c=a.success;a.success=function(b,d,f){Ajax.handleResponse(b,a);c&&(!b.fieldErrors&&!b.actionErrors)&&c(b,d,f)};return a}function ajax(a){$.ajax(ajaxOptions(a))}var CONTEXT_PATH=$('meta[name="context_path"]').attr("content")||"";
"undefined"==typeof Initialization&&(Initialization={});"undefined"==typeof Observation&&(Observation={});function _init(){var a=[],b;for(b in Initialization)"function"==typeof Initialization[b]&&a.push(b);a.sort();for(b=0;b<a.length;b++)Initialization[a[b]].call(this);_observe()}
function _observe(a){a||(a=document);$(".chart,form.ajax,.ajaxpanel",a).each(function(a){$(this).attr("id")||$(this).attr("id",("a"+(a+Math.random())).replace(".","").substring(0,5))});var b=[],c;for(c in Observation)"function"==typeof Observation[c]&&b.push(c);b.sort();for(c=0;c<b.length;c++)Observation[b[c]].call(this,a)}$(_init);
Initialization.common=function(){$(document).ajaxStart(function(){Indicator.show()});$(document).ajaxError(function(){Indicator.showError()});$(document).ajaxSuccess(function(a,c){Indicator.hide();var e=c.getResponseHeader("X-Redirect-To");if(e){$("body").html('<div class="modal"><div class="modal-body"><div class="progress progress-striped active"><div class="bar" style="width: 50%;"></div></div></div></div>');e=UrlUtils.absolutize(e);try{var d=top.location.href;d&&UrlUtils.isSameDomain(d,e)?top.location.href=
e:document.location.href=e}catch(f){document.location.href=e}}});$(document).on("click",".removeonclick",function(){$(this).remove()}).on("keyup","input,textarea",$.debounce(200,function(a){!$(this).hasClass("email")&&!$(this).hasClass("regex")&&13!=a.keyCode&&$(this).val()&&Form.validate(this);return!0})).on("focusout","input,textarea",function(){($(this).hasClass("email")||$(this).hasClass("regex")||!$(this).hasClass("required"))&&Form.validate(this);return!0}).on("change","select",function(){Form.validate(this);
return!0}).on("dblclick",".ui-dialog-titlebar",function(){Dialog.toggleMaximization($(".ui-dialog-content",$(this).closest(".ui-dialog")))}).on("mouseenter",".popover,.tooltip",function(){$(this).remove()}).on("click",":submit",function(){$(this).addClass("clicked")});$.alerts.okButton=MessageBundle.get("confirm");$.alerts.cancelButton=MessageBundle.get("cancel");Nav.init();Nav.activate(document.location.pathname);var a=document.location.hash;a&&$(".nav-tabs").each(function(){var b=!1;$('a[data-toggle="tab"]',
this).each(function(){var c=$(this);if(!b){var e=c.attr("data-target");e||(e=(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));e==a&&(b=!0,c.tab("show"),$target=$(e),$target.hasClass("ajaxpanel")&&$target.removeClass("manual"))}})});$(document.body).hasClass("render-location-qrcode")&&($('<div id="render-location-qrcode" style="width:15px;position:fixed;bottom:0;right:0;cursor:pointer;"><i class="icon-qrcode"></i></div>').appendTo(document.body),$("#render-location-qrcode").click(function(){var a=
$(this);a.hide();var c=$('<div class="modal" style="z-index:10000;"><div style="padding: 5px 5px 0 0;"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button></div><div class="modal-body" style="max-height:600px;"><div class="location-qrcode">'+document.location.href+"</div></div></div>").appendTo(document.body);$(".location-qrcode",c).encodeqrcode();$("button.close",c).click(function(){c.remove();a.show()})}));-1!=document.location.search.indexOf("printpage=true")&&
(window.print(),window.close())};var HISTORY_ENABLED=MODERN_BROWSER&&("undefined"!=typeof history.pushState||"undefined"!=typeof $.history)&&"false"!=$('meta[name="history_enabled"]').attr("content");
if(HISTORY_ENABLED){var SESSION_HISTORY_SUPPORT="undefined"!=typeof history.pushState&&0!=document.location.hash.indexOf("#!/"),_historied_=!1;Initialization.history=function(){SESSION_HISTORY_SUPPORT?window.onpopstate=function(a){var b=document.location.href;Nav.activate(b);a.state&&ajax({url:b,replaceTitle:!0,replacement:a.state.replacement,cache:!1,headers:{"X-Fragment":"_"}})}:$.history.init(function(a){if(!(!a&&!_historied_||a&&0>a.indexOf("!"))){var b=document.location.href;0<b.indexOf("#")&&
(b=b.substring(0,b.indexOf("#")));a.length&&(a=a.substring(1),UrlUtils.isSameDomain(a)&&CONTEXT_PATH&&(a=CONTEXT_PATH+a),b=a);_historied_=!0;ajax({url:b,cache:!0,replaceTitle:!0,success:function(){Nav.activate(b)},headers:{"X-Fragment":"_"}})}},{unescape:!0})}}
Observation.common=function(a){$(".controls .field-error",a).each(function(){var a=$(this).text(),b=$(":input",$(this).parent());$(this).remove();Message.showFieldError(b,a)});var b="FORM"==$(a).prop("tagName")&&$(a).hasClass("focus")?a:$(".focus:eq(0)",a);if("FORM"!=b.prop("tagName")&&b.attr("name"))b.focus();else for(var b=$(":input:visible",b).toArray(),c=0;c<b.length;c++){var e=$(b[c]);if(e.attr("name")&&!e.val()){e.focus();break}}$("form",a).each(function(){$(this).hasClass("ajax")||$(this).submit(function(){$(".action-error").remove();
return Form.validate(this)})});$('input[type="text"]',a).on("paste",function(){var a=$(this);setTimeout(function(){a.val($.trim(a.val()))},50)}).each(function(){$(this).attr("autocomplete")||$(this).attr("autocomplete","off");var a=$(this).attr("maxlength");if(!a||3E3<a)$(this).hasClass("date")?$(this).attr("maxlength","10"):$(this).hasClass("integer")?$(this).attr("maxlength","11"):$(this).hasClass("long")?$(this).attr("maxlength","20"):$(this).hasClass("double")?$(this).attr("maxlength","22"):$(this).attr("maxlength",
"255")});MODERN_BROWSER&&$('input[type="checkbox"].custom,input[type="radio"].custom',a).each(function(a){$(this).hide();this.id||(this.id=("a"+(a+Math.random())).replace(".","").substring(0,9));$(this).next("lable.custom").length||$(this).after($('<label class="custom" for="'+this.id+'"></label>'))});$(".linkage",a).each(function(){var a=$(this);a.data("originalclass",a.attr("class"));var b=$(".linkage_switch",a);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");
a.attr("class",a.data("originalclass")+" "+b.val());b.change(function(){var a=$(this).closest(".linkage"),b=$(this);$(".linkage_component",a).show();$(".linkage_component",a).not("."+b.val()).hide().filter(":input").val("");a.attr("class",a.data("originalclass")+" "+b.val())})});$(":input.conjunct",a).change(function(){var a=$(this),b=$(this).closest("form"),c={},e=b.attr("action");-1<e.indexOf("/")?"save"==e.substring(e.lastIndexOf("/")+1)&&(e=e.substring(0,e.lastIndexOf("/"))+"/input"):"save"==
e&&(e="input");var j=$(':input[type=hidden][name$=".id"]',b);j.val()&&(c.id=j.val());c[a.attr("name")]=a.val();ajax({global:!1,quiet:!0,type:b.attr("method"),url:e,data:c,replacement:a.data("replacement")})});"undefined"!=typeof $.fn.datepicker&&$("input.date:not([readonly]):not([disabled])",a).datepicker({dateFormat:"yy-mm-dd"});$("input.captcha",a).focus(function(){$(this).data("_captcha_")||($(this).after('<img class="captcha" src="'+this.id+'"/>'),$("img.captcha",a).click(Captcha.refresh),$(this).data("_captcha_",
!0))});"undefined"!=typeof $.fn.treeTable&&$(".treeTable",a).each(function(){$(this).treeTable({initialState:$(this).hasClass("expanded")?"expanded":"collapsed"})});"undefined"!=typeof $.fn.chosen&&$(".chosen",a).chosen({placeholder_text:MessageBundle.get("select"),no_results_text:" "});"undefined"!=typeof $.fn.htmlarea&&$("textarea.htmlarea",a).htmlarea();$('a[data-toggle="tab"]',a).on("shown",function(a){$this=$(a.target);a=$this.attr("data-target");a||(a=(a=$this.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,
""));$target=$(a);$target.hasClass("ajaxpanel")&&$target.trigger("load")});$(".carousel",a).each(function(){var a=$(this);a.carousel((new Function("return "+(a.data("options")||"{}")))())});$(".tiped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"top"};!a.attr("title")&&a.data("tipurl")&&a.attr("title",MessageBundle.get("ajax.loading"));a.bind("hover"==b.trigger?"mouseenter":b.trigger,function(){a.hasClass("_tiped")||(a.addClass("_tiped"),
$.ajax({url:a.data("tipurl"),global:!1,dataType:"html",success:function(c){a.attr("data-original-title",c);a.tooltip(b).tooltip("show")}}))});a.is(":input")&&(b.trigger="focus",b.placement="right");a.tooltip(b)});$(".poped",a).each(function(){var a=$(this),b={html:!0,trigger:a.data("trigger")||"hover",placement:a.data("placement")||"right"};a.data("popurl")&&(!b.content&&a.data("popurl")&&(b.title=MessageBundle.get("ajax.loading")),a.bind("hover"==b.trigger?"mouseenter":b.trigger,function(){a.hasClass("_poped")||
(a.addClass("_poped"),$.ajax({url:a.data("popurl"),global:!1,dataType:"html",success:function(c){$("div.popover").remove();0<=c.indexOf("<title>")&&0<c.indexOf("</title>")&&a.attr("data-original-title",c.substring(c.indexOf("<title>")+7,c.indexOf("</title>")));0<=c.indexOf("<body>")&&0<c.indexOf("</body>")&&a.attr("data-content",c.substring(c.indexOf("<body>")+6,c.indexOf("</body>")));a.popover(b).popover("show")}}))}));a.popover(b)});$(".btn-switch",a).each(function(){var a=$(this);a.children().css("cursor",
"pointer").click(function(){a.children().removeClass("active").css({"font-weight":"normal"});$(this).addClass("active").css({"font-weight":"bold"})})});$("a.popmodal",a).each(function(){var a=$(this),b=a.attr("href");-1<b.indexOf("/")&&(b=b.substring(b.lastIndexOf("/")+1));for(b+="_modal";$("#"+b).length;)b+="_";a.click(function(){$("#"+b).length?$("#"+b).modal("show"):$.get(a.attr("href"),function(c){c=c.replace(/<script(.|\s)*?\/script>/g,"");var e=$("<div/>").html(c);c=$("title",e).html();var e=
$("#content",e).html(),j=a.data("modalwidth");$('<div id="'+b+'" class="modal hide fade in"'+(j?' style="width:'+j+';"':"")+'><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3 style="text-align:center;">'+c+'</h3></div><div class="modal-body" style="padding-top:40px;">'+e+"</div></div>").appendTo(document.body);_observe($("#"+b));$("form",$("#"+b)).each(function(){this.onsuccess=function(){$("#"+b).modal("hide")}});a.attr("href","#"+b).attr("data-toggle","modal");$("#"+
b).modal("show")});return!1})});"undefined"!=typeof swfobject&&($(".chart",a).each(function(){var a=$(this),b=a.attr("id"),c=a.width(),e=a.height(),j=a.data("url");0==j.indexOf("/")&&(j=document.location.protocol+"//"+document.location.host+j);(!b||!c||!e||!j)&&alert("id,width,height,data all required");swfobject.embedSWF(CONTEXT_PATH+"/assets/images/open-flash-chart.swf",b,c,e,"9.0.0",CONTEXT_PATH+"/assets/images/expressInstall.swf",{"data-file":encodeURIComponent(j),loading:MessageBundle.get("ajax.loading")},
{wmode:"transparent"});a.data("_interval")&&clearInterval(parseInt(a.data("_interval")));a.data("interval")&&(c=setInterval(function(){a.data("quiet")?$.ajax({global:!1,url:j,dataType:"text",success:function(a){document.getElementById(b).load(a)}}):document.getElementById(b).reload(j)},parseInt(a.data("interval"))),a.data("_interval",c))}),window.save_image=function(){var a=[];a.push("<html><head><title>Charts: Export as Image</title></head><body>");$("object[data]").each(function(){a.push('<img src="data:image/png;base64,'+
this.get_img_binary()+'"/>')});a.push("</body></html>");var b=window.open("","_blank");b.document.write(a.join(""));b.document.close()});$("a.ajax,form.ajax",a).each(function(){var a=this,b=[],c=$(a).attr("id");"string"!=typeof c&&(c="");for(var c=($(a).data("replacement")||("FORM"==$(a).prop("tagName")?c:"")).split(","),e=0;e<c.length;e++){var j=c[e].split(":",2);(j=2==j.length?j[1]:j[0])&&b.push(j)}if("FORM"==this.tagName){var g={beforeSubmit:function(){if(!Ajax.fire(a,"onprepare"))return!1;$(".action-error").remove();
if(!Form.validate(a))return!1;Indicator.text=$(a).data("indicator");$('button[type="submit"]',a).prop("disabled",!0);Ajax.fire(a,"onloading")},error:function(){Form.focus(a);a&&"FORM"==a.tagName&&setTimeout(function(){$('button[type="submit"]',a).prop("disabled",!1)},100);Ajax.fire(a,"onerror")},success:function(b){Ajax.handleResponse(b,{target:a})},headers:{}};$(this).hasClass("view")||$.extend(g.headers,{"X-Data-Type":"json"});0<b.length&&$.extend(g.headers,{"X-Fragment":b.join(",")});$(this).bind("submit",
function(){var a=$(".clicked",this).removeClass("clicked");if(a.hasClass("noajax"))return!0;var b=$(this),c=!1;b.hasClass("history")&&(c=!0);if(a.data("action")||b.parents(".ui-dialog,.tab-content").length)c=!1;if(c&&"undefined"!=typeof history.pushState){a=b.attr("action");if(b=b.serializeArray())$.map(b,function(a){"resultPage.pageNo"==a.name?a.name="pn":"resultPage.pageSize"==a.name?a.name="ps":"check"==a.name?(a.name="",a.value=""):"keyword"==a.name&&!a.value&&(a.name="",a.value="")}),(b=$.param(b).replace(/(&=)/g,
""))&&(a+=(0<a.indexOf("?")?"&":"?")+b);b=document.location.href;history.replaceState({url:b},"",b);history.pushState(a,"",a)}$(this).ajaxSubmit(g);return!1})}else $(this).click(function(){if(!Ajax.fire(a,"onprepare"))return!1;if(HISTORY_ENABLED&&$(this).hasClass("view")&&!$(this).hasClass("nohistory")&&($(this).hasClass("history")||!$(this).data("replacement"))){var c=this.href;if(UrlUtils.isSameDomain(c))if(c=c.substring(c.indexOf("//")+2),c=c.substring(c.indexOf("/")),SESSION_HISTORY_SUPPORT){var e=
document.location.href;history.replaceState({url:e},"",e);history.pushState({replacement:$(this).data("replacement"),url:c},"",c)}else return CONTEXT_PATH&&(c=c.substring(CONTEXT_PATH.length)),c=c.replace(/^.*#/,""),$.history.load("!"+c),!1}var g={url:this.href,type:$(this).data("method")||"GET",cache:$(this).hasClass("cache"),beforeSend:function(){$(".action-error").remove();Indicator.text=$(a).data("indicator");Ajax.fire(a,"onloading")},error:function(){Ajax.fire(a,"onerror")},headers:{}},h={target:a};
$(this).hasClass("view")||$.extend(g.headers,{"X-Data-Type":"json"});0<b.length?$.extend(g.headers,{"X-Fragment":b.join(",")}):($.extend(g.headers,{"X-Fragment":"_"}),h.replaceTitle=!0);g.success=function(a){Nav.activate(g.url);Ajax.handleResponse(a,h)};$.ajax(g);return!1})})};
var Nav={init:function(){$(document).on("click",".nav:not(.nav-tabs) li a",function(){$("li",$(this).closest(".nav")).removeClass("active");Nav.indicate($(this))})},activate:function(a){a=UrlUtils.absolutize(a);$(".nav:not(.nav-tabs) li").removeClass("active");$(".nav:not(.nav-tabs) li a").each(function(){(this.href==a||0==a.indexOf(this.href+"?"))&&Nav.indicate($(this))})},indicate:function(a){var b=a.closest("li.dropdown");if(b.length){if(!a.hasClass("dropdown-toggle")){b.addClass("active");var c=
$("#nav-breadcrumb");c.length?c.html(""):c=$('<ul id="nav-breadcrumb" class="breadcrumb"/>').prependTo($("#content"));c.append("<li>"+b.children("a").text()+' <span class="divider">/</span></li>').append('<li class="active">'+a.text()+"</li>")}}else $(a).closest("li").addClass("active"),$("#nav-breadcrumb").remove()}},Dialog={adapt:function(a,b){if(b){var c=b.document;b.contentDocument?c=b.contentDocument:b.contentWindow&&(c=b.contentWindow.document);$(a).dialog("option","title",c.title);$(a).dialog("option",
"minHeight",e);var e=$(c).height()+20;$(b).height(e)}else $(a).dialog("option","title",Ajax.title);a.dialog("option","position","center");e=a.height();600<e&&a.dialog("option","position","top");a.dialog("moveToTop")},toggleMaximization:function(a){var b=$(a).closest(".ui-dialog"),c=b.data("orginal-width");if(c)b.width(c),b.height(b.data("orginal-height")),b.removeData("orginal-width").removeData("orginal-height"),Dialog.adapt($(a));else{b.data("orginal-width",b.width()+0.2).data("orginal-height",
b.height()+0.2);var c=$(window).width()-10,e=$(window).height()-10;b.outerWidth(c);b.outerHeight()<e&&b.outerHeight(e);a.dialog("option","position","top")}}};Captcha={refresh:function(){$("img.captcha").each(function(){var a=this.src,b=a.lastIndexOf("&");0<b&&(a=a.substring(0,b));this.src=a+"&"+Math.random()});$("input.captcha").val("").focus()}};ArrayUtils={unique:function(a){if(a){for(var b=[],c={},e=0,d;null!=(d=a[e]);e++)c[d]||(b.push(d),c[d]=!0);return b}}};
Date.prototype.format=function(a,b,c){if("function"==typeof this.strftime)return this.strftime(a);var e=function(a,b){a=""+a;return 1==a.length?""+(null==b?"0":b)+a:a},d=[],f=!1,l=this.getHours(),h=12>l;null==b&&(b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));null==c&&(c="Sun Mon Tue Wed Thu Fri Sat".split(" "));var j;j=12<l?l-12:0==l?12:l;for(var g=0;g<a.length;++g){var k=a.charAt(g);if(f){switch(k){case "a":k=""+c[this.getDay()];break;case "b":k=""+b[this.getMonth()];break;case "d":k=
e(this.getDate());break;case "e":k=e(this.getDate()," ");break;case "H":k=e(l);break;case "I":k=e(j);break;case "l":k=e(j," ");break;case "m":k=e(this.getMonth()+1);break;case "M":k=e(this.getMinutes());break;case "S":k=e(this.getSeconds());break;case "y":k=e(this.getFullYear()%100);break;case "Y":k=""+this.getFullYear();break;case "p":k=h?"am":"pm";break;case "P":k=h?"AM":"PM";break;case "w":k=""+this.getDay()}d.push(k);f=!1}else"%"==k?f=!0:d.push(k)}return d.join("")};
(function(a){a.fn.checkavailable=function(){this.each(function(){var b=a(this);b.bind("checkavailable",function(){if(b.val()){var c=a("input[type=hidden]",b.closest("form")).not('[name^="__"]').not(".nocheck").add(b),e=b.data("checkurl");e||(e=b.closest("form").prop("action"),e=e.substring(0,e.lastIndexOf("/"))+"/checkavailable");ajax({global:!1,target:b.closest("form")[0],url:e,data:c.serialize()})}}).change(function(){b.addClass("dirty")}).blur(function(){b.hasClass("dirty")&&!b.next(".field-error").length&&
b.trigger("checkavailable")})});return this}})(jQuery);Observation.checkavailable=function(a){$(":input.checkavailable",a).checkavailable()};
Observation.tags=function(a){"undefined"!=typeof $.fn.textext&&(!$.browser.msie||"8"<$.browser.version)&&$("input.tags",a).each(function(){var a=$(this),c={prompt:"...",autocomplete:{dropdownMaxHeight:"200px",render:function(a){return"string"==typeof a?a:a.label?'<div value="'+a.value+'">'+a.label+"</div>":a.value}},ext:{core:{serializeData:function(a){return a.join(",")}},itemManager:{itemToString:function(a){return"string"==typeof a?a:a.value}},autocomplete:{showDropdown:function(){$(".text-suggestion",
this.containerElement()).length&&this.containerElement().show()},renderSuggestions:function(a){var b=this;b.clearItems();var c=[];$(".text-tags .text-label",b.container).each(function(){c.push($(this).text())});$.each(a||[],function(a,d){for(var e=b.itemManager().itemToString(d),k=!1,p=0;p<c.length;p++)if(c[p]==e){k=!0;break}k||b.addSuggestion(d)})}}}},e=a.val();e&&(c.tagsItems=0==e.indexOf('["')?$.parseJSON(e):e.split(","));a.data("source")?(c.plugins="tags prompt focus autocomplete ajax arrow",
c.ajax={global:!1,url:a.data("source"),cacheResults:!1,dataCallback:function(a){return{keyword:a}}}):c.plugins="tags prompt focus";a.val("").textext(c).bind("isTagAllowed",function(a,b){var c=[];$(".text-tags .text-label",this.container).each(function(){c.push($(this).text())});for(var e=0;e<c.length;e++)if(c[e]==b.tag){b.result=!1;break}});a.blur(function(){(a.hasClass("required")||a.val())&&$(this).trigger("enterKeyPress").val("")})})};
(function(a){a.ajaxupload=function(b,c){if(!b)return!1;var e={url:document.location.href,name:"file"};c=c||{};a.extend(e,c);c=e;var d;c.progress?d=a(c.progress):(d=a("#_uploadprogress"),d.length||(d=a('<progress id="_uploadprogress" style="position: fixed;z-index: 10001;left: 45%;top: 0px;width: 100px;" min="0" max="100" value="0">0</progress>').appendTo(document.body)));var f=new XMLHttpRequest;f.open("POST",c.url);f.onreadystatechange=function(){4==f.readyState&&((200<=f.status&&200>=f.status||
304==f.status)&&""!=f.responseText&&"undefined"!=typeof c.success)&&c.success(f)};d&&d.length&&(f.onload=function(){d.val(100).html(100).hide()},"upload"in f&&(f.upload.onprogress=function(a){a.lengthComputable&&(a=100*(a.loaded/a.total)|0,d.val(a).html(a).show())}));if("string"==typeof c.data){var l=c.data.split("&");c.data={};for(e=0;e<l.length;e++){var h=l[e].split("=",2);c.data[h[0]]=2==h.length?h[1]:""}}if(window.FormData){for(var j=new FormData,e=0;e<b.length;e++)j.append(c.name,b[e]);c.data&&
a.each(c.data,function(a,b){j.append(a,b)});f.send(j)}else{var g="xxxxxxxxx";f.setRequestHeader("Content-Type","multipart/form-data, boundary="+g);!window.BlobBuilder&&window.WebKitBlobBuilder&&(window.BlobBuilder=window.WebKitBlobBuilder);if("undefined"!=typeof FileReader&&"undefined"!=typeof BlobBuilder){for(e=0;e<b.length;e++){l=b[e];h=new FileReader;h.sourceFile=l;var k=0,g="xxxxxxxxx",p=new BlobBuilder;c.data&&a.each(c.data,function(a,b){var c=new BlobBuilder;c.append("--");c.append(g);c.append("\r\n");
c.append('Content-Disposition: form-data; name="');c.append(a);c.append('" ');c.append(b);c.append("\r\n");p.append(c.getBlob())});h.onload=function(a){var d=a.target.sourceFile,e=new BlobBuilder;e.append("--");e.append(g);e.append("\r\n");e.append("Content-Disposition: form-data; name=");e.append(c.name);e.append("; filename=");e.append(d.name);e.append("\r\n");e.append("Content-Type: ");e.append(d.type);e.append("\r\n\r\n");e.append(a.target.result);e.append("\r\n");p.append(e.getBlob());k++;k==
b.length&&(p.append("--"),p.append(g),p.append("--"),"undefined"!=typeof c.beforeSend&&c.beforeSend(),f.send(p.getBlob()))};h.readAsArrayBuffer(l)}return!0}e=b;l=g;h=c.name;if("undefined"!=typeof FileReaderSync){for(var m=new BlobBuilder,r=new FileReaderSync,e=event.data,q=0;q<e.length;q++)m.append("--"),m.append(l),m.append("\r\n"),m.append("Content-Disposition: form-data; name="),m.append(h),m.append("; filename="),m.append(e[q].name),m.append("\r\n"),m.append("Content-Type: "),m.append(e[q].type),
m.append("\r\n\r\n"),m.append(r.readAsArrayBuffer(e[q])),m.append("\r\n");m.append("--");m.append(l);m.append("--");p=m.getBlob()}else if(e[0].getAsBinary){m="";for(q=0;q<e.length;q++)m+="--"+l+"\r\n",m+="Content-Disposition: form-data; name="+h+"; filename="+e[q].name+"\r\n",m+="Content-Type: "+e[q].type+"\r\n\r\n",m+=e[q].getAsBinary()+"\r\n";p=m+("--"+l+"--")}else p=null;p?("undefined"!=typeof c.beforeSend&&c.beforeSend(),f.sendAsBinary?f.sendAsBinary(p):f.send(p)):f.abort()}return!0}})(jQuery);
(function(a){function b(b){b.css("min-height","100px");if(!b.hasClass("tab-pane")||!b.hasClass("cache")||!b.hasClass("loaded")){var e=b.data("url"),d={target:b[0],url:e||document.location.href,global:!1,quiet:!0,beforeSend:function(){b.data("quiet")||("undefined"!=typeof a.fn.mask?b.mask(MessageBundle.get("ajax.loading")):b.html('<div style="text-align:center;">'+MessageBundle.get("ajax.loading")+"</div>"))},complete:function(){!b.data("quiet")&&"undefined"!=typeof a.fn.unmask&&b.unmask()},success:function(){b.addClass("loaded")}};
d.replacement=e?b.attr("id")+":"+(b.data("replacement")||"content"):b.attr("id");ajax(d)}}a.fn.ajaxpanel=function(){a(this).each(function(){var c=a(this);c.bind("load",function(){b(c)});c.data("timeout")?setTimeout(function(){b(c)},parseInt(c.data("timeout"))):c.data("interval")?setInterval(function(){b(c)},parseInt(c.data("interval"))):c.hasClass("manual")||b(c)});return this}})(jQuery);Observation.ajaxpanel=function(a){$(".ajaxpanel",a).ajaxpanel();$(".ajaxpanel .load",a).click(function(){$(this).closest(".ajaxpanel").trigger("load")})};
(function(a){a(function(){a(document).on("click",".toolbar .pagination .firstPage:not(.disabled) a",function(){var b=a(this).closest("form");a(".inputPage",b).val(1);b.submit();return!1}).on("click",".toolbar .pagination .prevPage:not(.disabled) a",function(){var b=a(this).closest("form");a(".inputPage",b).val(function(a,b){return parseInt(b)-1});b.submit();return!1}).on("click",".toolbar .pagination .nextPage:not(.disabled) a",function(){var b=a(this).closest("form");a(".inputPage",b).val(function(a,
b){return parseInt(b)+1});b.submit();return!1}).on("click",".toolbar .pagination .lastPage:not(.disabled) a",function(){var b=a(this).closest("form");a(".inputPage",b).val(a(".totalPage strong",b).text());b.submit();return!1}).on("change",".toolbar .pagination .inputPage",function(b){a(b.target).closest("form").submit();b.preventDefault()}).on("change",".toolbar .pagination select.pageSize",function(b){b=a(b.target).closest("form");a(".inputPage",b).val(1);b.submit()}).on("keydown",'.toolbar input[name="keyword"]',
function(b){var c=a(b.target).closest("form");if(13==b.keyCode)return a(".inputPage",c).val(1),c.submit(),!1}).on("click",".toolbar .icon-search",function(b){b=a(b.target).closest("form");a(".inputPage",b).val(1);b.submit();return!1})})})(jQuery);
