<chapter id="advanced-remoting">
	<title>远程服务</title>
	<para>
    	ironrhino会把实现了打上了@Remoting的接口的bean对外发布hessian和httpinvoker服务.
    	对外发布服务实例
		<programlisting>
		<![CDATA[
package org.ironrhino.security.service;

import org.ironrhino.core.metadata.Remoting;
import org.ironrhino.core.service.BaseManager;
import org.springframework.security.core.userdetails.UserDetailsService;

import org.ironrhino.security.model.User;

@Remoting
public interface UserManager extends BaseManager<User>, UserDetailsService {

			public User loadUserByUsername(String username);

}

		]]>
		</programlisting>
		对接远程服务配置实例
		<programlisting>
		<![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<beans default-autowire="byName"
			xmlns="http://www.springframework.org/schema/beans"
			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			xmlns:p="http://www.springframework.org/schema/p"
			xmlns:context="http://www.springframework.org/schema/context"
			xmlns:aop="http://www.springframework.org/schema/aop"
			xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">
			<bean id="hessianUserManager" class="org.ironrhino.core.remoting.HessianClient" p:serviceInterface="org.ironrhino.security.service.UserManager" p:host="localhost" p:port="8080"/>
			<bean id="httpInvokerUserManager" class="org.ironrhino.core.remoting.HttpInvokerClient" p:serviceInterface="org.ironrhino.security.service.UserManager" p:host="localhost" p:port="8080"/>
</beans>
		]]>
		</programlisting>
	</para>
	<para>
    	如果需要在一个分布式系统内自动发布和发现远程服务,则可以使用hadoop的zookeeper来管理,首先需要启动一个zookeeper实例
    	然后在服务器端和客户端都在spring里面配置使用zookeeper管理远程服务,客户端可以省略host属性因为会自动查找host,port默认是8080
		<programlisting>
		<![CDATA[
			<bean id="serviceRegistry" class="org.ironrhino.core.remoting.impl.ZookeeperServiceRegistry" p:connectString="localhost:2181/remoting"/>
		]]>
		</programlisting>    	
	</para>
</chapter>


